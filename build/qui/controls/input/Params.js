define("qui/classes/DOM",[],function(){"use strict";return window.$quistorage={},new Class({Implements:[Options,Events],Type:"qui/classes/DOM",options:{},$uid:null,initialize:function(t){t=t||{},t.events&&(this.addEvents(t.events),delete t.events),t.methods&&(Object.append(this,t.methods),delete t.methods),this.setAttributes(t),this.fireEvent("init",[this])},$family:function(){return"undefined"!=typeof this.Type?this.Type:typeOf(this)},getId:function(){return this.$uid||(this.$uid=String.uniqueID()),this.$uid},getType:function(){return typeOf(this)},setAttribute:function(t,e){if(this.fireEvent("setAttribute",[t,e]),"undefined"!=typeof this.options[t])return this.options[t]=e,this;var i=Slick.uidOf(this);return"undefined"==typeof window.$quistorage[i]&&(window.$quistorage[i]={}),window.$quistorage[i][t]=e,this},destroy:function(){this.fireEvent("destroy",[this]);var t=Slick.uidOf(this);t in window.$quistorage&&delete window.$quistorage[t],this.removeEvents()},setOptions:function(t){this.setAttributes(t)},setAttributes:function(t){t=t||{};for(var e in t)t.hasOwnProperty(e)&&this.setAttribute(e,t[e]);return this},getAttribute:function(t){if(t in this.options)return this.options[t];var e=Slick.uidOf(this);return"undefined"==typeof window.$quistorage[e]?!1:"undefined"!=typeof window.$quistorage[e][t]?window.$quistorage[e][t]:!1},getAllAttributes:function(){return this.getAttributes()},getAttributes:function(){return this.options},getStorageAttributes:function(){var t=Slick.uidOf(this);return t in window.$quistorage?window.$quistorage[t]:{}},existAttribute:function(t){if("undefined"!=typeof this.options[t])return!0;var e=Slick.uidOf(this);return window.$quistorage[e]&&window.$quistorage[e][t]},getEvents:function(t){return"undefined"==typeof this.$events?!1:"undefined"!=typeof this.$events[t]?this.$events[t]:!1}})}),function(){var t=this.ElementQueries=function(){function e(t){t||(t=document.documentElement);var e=getComputedStyle(t,"fontSize");return parseFloat(e)||16}function i(t,i){var n=i.replace(/[0-9]*/,"");switch(i=parseFloat(i),n){case"px":return i;case"em":return i*e(t);case"rem":return i*e();case"vw":return i*document.documentElement.clientWidth/100;case"vh":return i*document.documentElement.clientHeight/100;case"vmin":case"vmax":var s=document.documentElement.clientWidth/100,o=document.documentElement.clientHeight/100,r=Math["vmin"===n?"min":"max"];return i*r(s,o);default:return i}}function n(t){this.element=t,this.options={};var e,n,s,o,r,u,l,a=0,c=0;this.addOption=function(t){var e=[t.mode,t.property,t.value].join(",");this.options[e]=t};var h=["min-width","min-height","max-width","max-height"];this.call=function(){a=this.element.offsetWidth,c=this.element.offsetHeight,r={};for(e in this.options)this.options.hasOwnProperty(e)&&(n=this.options[e],s=i(this.element,n.value),o="width"==n.property?a:c,l=n.mode+"-"+n.property,u="","min"==n.mode&&o>=s&&(u+=n.value),"max"==n.mode&&s>=o&&(u+=n.value),r[l]||(r[l]=""),u&&-1===(" "+r[l]+" ").indexOf(" "+u+" ")&&(r[l]+=" "+u));for(var t in h)r[h[t]]?this.element.setAttribute(h[t],r[h[t]].substr(1)):this.element.removeAttribute(h[t])}}function s(t,e){t.elementQueriesSetupInformation?t.elementQueriesSetupInformation.addOption(e):(t.elementQueriesSetupInformation=new n(t),t.elementQueriesSetupInformation.addOption(e),t.elementQueriesSensor=new ResizeSensor(t,function(){t.elementQueriesSetupInformation.call()})),t.elementQueriesSetupInformation.call(),this.withTracking&&l.push(t)}function o(t,e,i,n){var o;if(document.querySelectorAll&&(o=document.querySelectorAll.bind(document)),o||"undefined"==typeof $$||(o=$$),o||"undefined"==typeof jQuery||(o=jQuery),!o)throw"No document.querySelectorAll, jQuery or Mootools's $$ found.";for(var r=o(t),u=0,l=r.length;l>u;u++)s(r[u],{mode:e,property:i,value:n})}function r(t){var e;for(t=t.replace(/'/g,'"');null!==(e=a.exec(t));)5<e.length&&o(e[1]||e[5],e[2],e[3],e[4])}function u(t){if(t){if("string"==typeof t)return t=t.toLowerCase(),void((-1!==t.indexOf("min-width")||-1!==t.indexOf("max-width"))&&r(t));for(var e="",i=0,n=t.length;n>i;i++)1===t[i].type?(e=t[i].selectorText||t[i].cssText,-1!==e.indexOf("min-height")||-1!==e.indexOf("max-height")?r(e):(-1!==e.indexOf("min-width")||-1!==e.indexOf("max-width"))&&r(e)):4===t[i].type&&u(t[i].cssRules||t[i].rules)}}this.sheetList={},this.withTracking=!1;var l=[],a=/,?([^,\n]*)\[[\s\t]*(min|max)-(width|height)[\s\t]*[~$\^]?=[\s\t]*"([^"]*)"[\s\t]*]([^\n\s\{]*)/gim;this.init=function(t){var e,i,n;for(this.withTracking=t,e=0,i=document.styleSheets.length;i>e;e++)try{if(n=document.styleSheets[e],"string"==typeof n.href&&"undefined"!=typeof this.sheetList[n.href])continue;u(n.cssText||n.cssRules||n.rules),this.sheetList[n.href]=!0}catch(s){}},this.update=function(t){this.withTracking=t,this.init()},this.detach=function(){if(!this.withTracking)throw"withTracking is not enabled. We can not detach elements since we don not store it.Use ElementQueries.withTracking = true; before domready.";for(var e;e=l.pop();)t.detach(e);l=[]}};t.update=function(e){t.instance.update(e)},t.detach=function(t){t.elementQueriesSetupInformation?(t.elementQueriesSensor.detach(),delete t.elementQueriesSetupInformation,delete t.elementQueriesSensor,console.log("detached")):console.log("detached already",t)},t.withTracking=!1,t.init=function(){t.instance||(t.instance=new t),t.instance.init(t.withTracking)};var e=function(t){if(document.addEventListener&&document.addEventListener("DOMContentLoaded",t,!1),/KHTML|WebKit|iCab/i.test(navigator.userAgent))var e=setInterval(function(){/loaded|complete/i.test(document.readyState)&&(t(),clearInterval(e))},10);window.onload=t};window.addEventListener?window.addEventListener("load",t.init,!1):window.attachEvent("onload",t.init),e(t.init)}(),define("qui/lib/element-query/ElementQuery",function(){}),function(){this.ResizeSensor=function(t,e){function i(){this.q=[],this.add=function(t){this.q.push(t)};var t,e;this.call=function(){for(t=0,e=this.q.length;e>t;t++)this.q[t].call()}}function n(t,e){return t.currentStyle?t.currentStyle[e]:window.getComputedStyle?window.getComputedStyle(t,null).getPropertyValue(e):t.style[e]}function s(t,e){if(t.resizedAttached){if(t.resizedAttached)return void t.resizedAttached.add(e)}else t.resizedAttached=new i,t.resizedAttached.add(e);t.resizeSensor=document.createElement("div"),t.resizeSensor.className="resize-sensor";var s="position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: scroll; z-index: -1; visibility: hidden;",o="position: absolute; left: 0; top: 0;";t.resizeSensor.style.cssText=s,t.resizeSensor.innerHTML='<div class="resize-sensor-expand" style="'+s+'"><div style="'+o+'"></div></div><div class="resize-sensor-shrink" style="'+s+'"><div style="'+o+' width: 200%; height: 200%"></div></div>',t.appendChild(t.resizeSensor),{fixed:1,absolute:1}[n(t,"position")]||(t.style.position="relative");var r,u,l=t.resizeSensor.childNodes[0],a=l.childNodes[0],c=t.resizeSensor.childNodes[1],h=(c.childNodes[0],function(){a.style.width=l.offsetWidth+10+"px",a.style.height=l.offsetHeight+10+"px",l.scrollLeft=l.scrollWidth,l.scrollTop=l.scrollHeight,c.scrollLeft=c.scrollWidth,c.scrollTop=c.scrollHeight,r=t.offsetWidth,u=t.offsetHeight});h();var d=function(){t.resizedAttached&&t.resizedAttached.call()},f=function(t,e,i){t.attachEvent?t.attachEvent("on"+e,i):t.addEventListener(e,i)};f(l,"scroll",function(){(t.offsetWidth>r||t.offsetHeight>u)&&d(),h()}),f(c,"scroll",function(){(t.offsetWidth<r||t.offsetHeight<u)&&d(),h()})}if("[object Array]"===Object.prototype.toString.call(t)||"undefined"!=typeof jQuery&&t instanceof jQuery||"undefined"!=typeof Elements&&t instanceof Elements)for(var o=0,r=t.length;r>o;o++)s(t[o],e);else s(t,e);this.detach=function(){ResizeSensor.detach(t)}},this.ResizeSensor.detach=function(t){t.resizeSensor&&(t.removeChild(t.resizeSensor),delete t.resizeSensor,delete t.resizedAttached)}}(),define("qui/lib/element-query/ResizeSensor",function(){}),define("qui/classes/Controls",["require","qui/classes/DOM","qui/lib/element-query/ElementQuery","qui/lib/element-query/ResizeSensor"],function(t,e){"use strict";return new Class({Extends:e,Type:"qui/classes/Controls",initialize:function(){this.$controls={},this.$cids={},this.$types={},this.ElementQueries=new ElementQueries},get:function(t){return"undefined"==typeof this.$controls[t]?[]:this.$controls[t]},getById:function(t){return t in this.$cids?this.$cids[t]:!1},getByType:function(t){return t in this.$types?this.$types[t]:[]},loadType:function(e,i){e.match(/qui\//)||(e="qui/"+e),t([e],i)},isControl:function(t){return"undefined"!=typeof t&&t?"undefined"!=typeof t.getType:!1},add:function(t){var e=this,i=t.getAttribute("name"),n=typeOf(t);i&&""!==i||(i="#unknown"),"undefined"==typeof this.$controls[i]&&(this.$controls[i]=[]),"undefined"==typeof this.$types[n]&&(this.$types[n]=[]),this.$controls[i].push(t),this.$types[n].push(t),this.$cids[t.getId()]=t,t.addEvent("onDestroy",function(){e.destroy(t)})},destroy:function(t){var e=t.getAttribute("name"),i=typeOf(t),n=t.getId();e&&""!==e||(e="#unknown"),"undefined"!=typeof this.$cids[n]&&delete this.$cids[n];var s,o,r=[];if("undefined"!=typeof this.$controls[e]){for(s=0,o=this.$controls[e].length;o>s;s++)n!==this.$controls[e][s].getId()&&r.push(this.$controls[e][s]);this.$controls[e]=r,r.length||delete this.$controls[e]}if(r=[],"undefined"!=typeof this.$types[i])for(s=0,o=this.$types[i].length;o>s;s++)n!==this.$types[i][s].getId()&&r.push(this.$types[i][s]);this.$types[i]=r}})}),define("qui/classes/Windows",["require","qui/classes/DOM"],function(t,e){"use strict";return new Class({Extends:e,Type:"qui/classes/Windows",Binds:["$onWindowOpen","$onWindowClose","$onWindowDestroy"],initialize:function(){this.$windows=[],this.$currentWindow=null},register:function(t){t.addEvents({onOpenBegin:this.$onWindowOpen,onDestroy:this.$onWindowDestroy,onClose:this.$onWindowClose}),this.$windows.push(t)},$onWindowOpen:function(t){if(this.$currentWindow){var e=this.$currentWindow.getElm().getStyle("zIndex");t.Background.getElm().setStyle("zIndex",e+1),t.getElm().setStyle("zIndex",e+2)}this.$currentWindow=t},$onWindowDestroy:function(t){this.$currentWindow==t&&(this.$currentWindow=null)},$onWindowClose:function(t){this.$currentWindow==t&&(this.$currentWindow=null)},openAlert:function(t){return this.createAlert(t).then(function(t){return t.open(),t})},openConfirm:function(t){return this.createConfirm(t).then(function(t){return t.open(),t})},openPopup:function(t){return this.createPopup(t).then(function(t){return t.open(),t})},openPrompt:function(t){return this.createPrompt(t).then(function(t){return t.open(),t})},openSubmit:function(t){return this.createAlert(t).then(function(t){return t.open(),t})},createAlert:function(e){return new Promise(function(i,n){t(["qui/controls/windows/Alert"],function(t){i(new t(e))},n)})},createConfirm:function(e){return new Promise(function(i,n){t(["qui/controls/windows/Confirm"],function(t){i(new t(e))},n)})},createPopup:function(e){return new Promise(function(i,n){t(["qui/controls/windows/Popup"],function(t){i(new t(e))},n)})},createPrompt:function(e){return new Promise(function(i,n){t(["qui/controls/windows/Prompt"],function(t){i(new t(e))},n)})},createSubmit:function(e){return new Promise(function(i,n){t(["qui/controls/windows/Submit"],function(t){i(new t(e))},n)})}})});var needle=["qui/classes/DOM"];("undefined"==typeof window.localStorage||"undefined"==typeof window.sessionStorage)&&needle.push("qui/classes/storage/Polyfill"),define("qui/classes/storage/Storage",needle,function(t){"use strict";return new Class({Extends:t,Type:"qui/classes/storage/Storage",$data:{},set:function(t,e){try{window.localStorage.setItem(t,e)}catch(i){this.$data[t]=e}},get:function(t){try{return window.localStorage.getItem(t)}catch(e){}return"undefined"!=typeof this.$data[t]?this.$data[t]:null},remove:function(t){try{window.localStorage.removeItem(t)}catch(e){}"undefined"!=typeof this.$data[t]&&delete this.$data[t]},clear:function(){this.$data={};try{window.localStorage.clear()}catch(t){}}})}),function t(e,i,n){function s(r,u){if(!i[r]){if(!e[r]){var l="function"==typeof require&&require;if(!u&&l)return l(r,!0);if(o)return o(r,!0);var a=new Error("Cannot find module '"+r+"'");throw a.code="MODULE_NOT_FOUND",a}var c=i[r]={exports:{}};e[r][0].call(c.exports,function(t){var i=e[r][1][t];return s(i?i:t)},c,c.exports,t,e,i,n)}return i[r].exports}for(var o="function"==typeof require&&require,r=0;r<n.length;r++)s(n[r]);return s}({1:[function(t,e){e.exports=function(){var e=t("events"),i={};return i.createDomain=i.create=function(){function t(t){i.emit("error",t)}var i=new e.EventEmitter;return i.add=function(e){e.on("error",t)},i.remove=function(e){e.removeListener("error",t)},i.bind=function(e){return function(){var i=Array.prototype.slice.call(arguments);try{e.apply(null,i)}catch(n){t(n)}}},i.intercept=function(e){return function(i){if(i)t(i);else{var n=Array.prototype.slice.call(arguments,1);try{e.apply(null,n)}catch(i){t(i)}}}},i.run=function(e){try{e()}catch(i){t(i)}return this},i.dispose=function(){return this.removeAllListeners(),this},i.enter=i.exit=function(){return this},i},i}.call(this)},{events:2}],2:[function(t,e){function i(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(t){return"function"==typeof t}function s(t){return"number"==typeof t}function o(t){return"object"==typeof t&&null!==t}function r(t){return void 0===t}e.exports=i,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._maxListeners=void 0,i.defaultMaxListeners=10,i.prototype.setMaxListeners=function(t){if(!s(t)||0>t||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},i.prototype.emit=function(t){var e,i,s,u,l,a;if(this._events||(this._events={}),"error"===t&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if(e=arguments[1],e instanceof Error)throw e;throw TypeError('Uncaught, unspecified "error" event.')}if(i=this._events[t],r(i))return!1;if(n(i))switch(arguments.length){case 1:i.call(this);break;case 2:i.call(this,arguments[1]);break;case 3:i.call(this,arguments[1],arguments[2]);break;default:for(s=arguments.length,u=new Array(s-1),l=1;s>l;l++)u[l-1]=arguments[l];i.apply(this,u)}else if(o(i)){for(s=arguments.length,u=new Array(s-1),l=1;s>l;l++)u[l-1]=arguments[l];for(a=i.slice(),s=a.length,l=0;s>l;l++)a[l].apply(this,u)}return!0},i.prototype.addListener=function(t,e){var s;if(!n(e))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,n(e.listener)?e.listener:e),this._events[t]?o(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,o(this._events[t])&&!this._events[t].warned){var s;s=r(this._maxListeners)?i.defaultMaxListeners:this._maxListeners,s&&s>0&&this._events[t].length>s&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace())}return this},i.prototype.on=i.prototype.addListener,i.prototype.once=function(t,e){function i(){this.removeListener(t,i),s||(s=!0,e.apply(this,arguments))}if(!n(e))throw TypeError("listener must be a function");var s=!1;return i.listener=e,this.on(t,i),this},i.prototype.removeListener=function(t,e){var i,s,r,u;if(!n(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(i=this._events[t],r=i.length,s=-1,i===e||n(i.listener)&&i.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(o(i)){for(u=r;u-->0;)if(i[u]===e||i[u].listener&&i[u].listener===e){s=u;break}if(0>s)return this;1===i.length?(i.length=0,delete this._events[t]):i.splice(s,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},i.prototype.removeAllListeners=function(t){var e,i;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(i=this._events[t],n(i))this.removeListener(t,i);else for(;i.length;)this.removeListener(t,i[i.length-1]);return delete this._events[t],this},i.prototype.listeners=function(t){var e;return e=this._events&&this._events[t]?n(this._events[t])?[this._events[t]]:this._events[t].slice():[]},i.listenerCount=function(t,e){var i;return i=t._events&&t._events[e]?n(t._events[e])?1:t._events[e].length:0}},{}],3:[function(t,e){function i(){if(!r){r=!0;for(var t,e=o.length;e;){t=o,o=[];for(var i=-1;++i<e;)t[i]();e=o.length}r=!1}}function n(){}var s=e.exports={},o=[],r=!1;s.nextTick=function(t){o.push(t),r||setTimeout(i,0)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=n,s.addListener=n,s.once=n,s.off=n,s.removeListener=n,s.removeAllListeners=n,s.emit=n,s.binding=function(){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},{}],4:[function(t,e){"use strict";function i(){}function n(t){try{return t.then}catch(e){return p=e,g}}function s(t,e){try{return t(e)}catch(i){return p=i,g}}function o(t,e,i){try{t(e,i)}catch(n){return p=n,g}}function r(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._32=0,this._8=null,this._89=[],t!==i&&f(t,this)}function u(t,e,n){return new t.constructor(function(s,o){var u=new r(i);u.then(s,o),l(t,new d(e,n,u))})}function l(t,e){for(;3===t._32;)t=t._8;return 0===t._32?void t._89.push(e):void m(function(){var i=1===t._32?e.onFulfilled:e.onRejected;if(null===i)return void(1===t._32?a(e.promise,t._8):c(e.promise,t._8));var n=s(i,t._8);n===g?c(e.promise,p):a(e.promise,n)})}function a(t,e){if(e===t)return c(t,new TypeError("A promise cannot be resolved with itself."));if(e&&("object"==typeof e||"function"==typeof e)){var i=n(e);if(i===g)return c(t,p);if(i===t.then&&e instanceof r)return t._32=3,t._8=e,void h(t);if("function"==typeof i)return void f(i.bind(e),t)}t._32=1,t._8=e,h(t)}function c(t,e){t._32=2,t._8=e,h(t)}function h(t){for(var e=0;e<t._89.length;e++)l(t,t._89[e]);t._89=null}function d(t,e,i){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=i}function f(t,e){var i=!1,n=o(t,function(t){i||(i=!0,a(e,t))},function(t){i||(i=!0,c(e,t))});i||n!==g||(i=!0,c(e,p))}var m=t("asap/raw"),p=null,g={};e.exports=r,r._83=i,r.prototype.then=function(t,e){if(this.constructor!==r)return u(this,t,e);var n=new r(i);return l(this,new d(t,e,n)),n}},{"asap/raw":8}],5:[function(t,e){"use strict";function i(t){var e=new n(n._83);return e._32=1,e._8=t,e}{var n=t("./core.js");t("asap/raw")}e.exports=n;var s=i(!0),o=i(!1),r=i(null),u=i(void 0),l=i(0),a=i("");n.resolve=function(t){if(t instanceof n)return t;if(null===t)return r;if(void 0===t)return u;if(t===!0)return s;if(t===!1)return o;if(0===t)return l;if(""===t)return a;if("object"==typeof t||"function"==typeof t)try{var e=t.then;if("function"==typeof e)return new n(e.bind(t))}catch(c){return new n(function(t,e){e(c)})}return i(t)},n.all=function(t){var e=Array.prototype.slice.call(t);return new n(function(t,i){function s(r,u){if(u&&("object"==typeof u||"function"==typeof u)){if(u instanceof n&&u.then===n.prototype.then){for(;3===u._32;)u=u._8;return 1===u._32?s(r,u._8):(2===u._32&&i(u._8),void u.then(function(t){s(r,t)},i))}var l=u.then;if("function"==typeof l){var a=new n(l.bind(u));return void a.then(function(t){s(r,t)},i)}}e[r]=u,0===--o&&t(e)}if(0===e.length)return t([]);for(var o=e.length,r=0;r<e.length;r++)s(r,e[r])})},n.reject=function(t){return new n(function(e,i){i(t)})},n.race=function(t){return new n(function(e,i){t.forEach(function(t){n.resolve(t).then(e,i)})})},n.prototype["catch"]=function(t){return this.then(null,t)}},{"./core.js":4,"asap/raw":8}],6:[function(t,e){"use strict";function i(){if(u.length)throw u.shift()}function n(t){var e;e=r.length?r.pop():new s,e.task=t,o(e)}function s(){this.task=null}var o=t("./raw"),r=[],u=[],l=o.makeRequestCallFromTimer(i);e.exports=n,s.prototype.call=function(){try{this.task.call()}catch(t){n.onerror?n.onerror(t):(u.push(t),l())}finally{this.task=null,r[r.length]=this}}},{"./raw":7}],7:[function(t,e){(function(t){"use strict";function i(t){u.length||(r(),l=!0),u[u.length]=t}function n(){for(;a<u.length;){var t=a;if(a+=1,u[t].call(),a>c){for(var e=0,i=u.length-a;i>e;e++)u[e]=u[e+a];u.length-=a,a=0}}u.length=0,a=0,l=!1}function s(t){var e=1,i=new h(t),n=document.createTextNode("");return i.observe(n,{characterData:!0}),function(){e=-e,n.data=e}}function o(t){return function(){function e(){clearTimeout(i),clearInterval(n),t()}var i=setTimeout(e,0),n=setInterval(e,50)}}e.exports=i;var r,u=[],l=!1,a=0,c=1024,h=t.MutationObserver||t.WebKitMutationObserver;r="function"==typeof h?s(n):o(n),i.requestFlush=r,i.makeRequestCallFromTimer=o}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],8:[function(t,e){(function(i){"use strict";function n(t){l.length||(o(),a=!0),l[l.length]=t}function s(){for(;c<l.length;){var t=c;if(c+=1,l[t].call(),c>h){for(var e=0,i=l.length-c;i>e;e++)l[e]=l[e+c];l.length-=c,c=0}}l.length=0,c=0,a=!1}function o(){var e=i.domain;e&&(r||(r=t("domain")),r.active=i.domain=null),a&&u?setImmediate(s):i.nextTick(s),e&&(r.active=i.domain=e)}var r,u="function"==typeof setImmediate;e.exports=n;var l=[],a=!1,c=0,h=1024;n.requestFlush=o}).call(this,t("_process"))},{_process:3,domain:1}],9:[function(){"function"!=typeof Promise.prototype.done&&(Promise.prototype.done=function(){var t=arguments.length?this.then.apply(this,arguments):this;t.then(null,function(t){setTimeout(function(){throw t},0)})})},{}],10:[function(t){t("asap");"undefined"==typeof Promise&&(Promise=t("./lib/core.js"),t("./lib/es6-extensions.js")),t("./polyfill-done.js")},{"./lib/core.js":4,"./lib/es6-extensions.js":5,"./polyfill-done.js":9,asap:6}]},{},[10]),define("qui/lib/polyfills/Promise",function(){}),define("qui/classes/QUI",["require","qui/classes/DOM","qui/classes/Controls","qui/classes/Windows","qui/classes/storage/Storage","qui/lib/polyfills/Promise"],function(t,e,i,n,s){"use strict";return new Class({Extends:e,Type:"qui/classes/QUI",initialize:function(e){if(this.setAttributes({debug:!1,fetchErrors:!0}),this.parent(e),this.getAttribute("fetchErrors")){var o=this;t.onError=function(t,e){o.trigger("ERROR :"+t+"\nRequire :"+e)},window.onerror=this.trigger.bind(this)}this.Controls=new i,this.Windows=new n,this.Storage=new s,this.MessageHandler=null},namespace:function(){for(var t,e=arguments,i=this,n=0,s=0,o=e.length,r=null,u=null;o>n;n+=1)for(r=e[n].split("."),t=r.length,s=0;t>s;s+=1)u=r[s],i[u]=i[u]||{},i=i[u];return i},parse:function(e,i){return new Promise(function(n,s){if("undefined"==typeof e&&(e=document.body),"element"!==typeOf(e))return n(),void("undefined"!=typeof i&&i());var o=document.id(e).getElements("[data-qui]"),r=o.map(function(t){return t.get("data-qui")});r=r.filter(function(t){return""!==t}).clean(),t(r,function(){var t,e,s,u,l={TEXTAREA:!0,INPUT:!0};for(t=0,e=r.length;e>t;t++)s=arguments[t],u=o[t],u.get("data-quiid")||("undefined"!=typeof l[u.nodeName]||""!==u.get("html").trim()?(new s).imports(u):(new s).replaces(u));n(),"undefined"!=typeof i&&i()},function(t){s(t)})})},triggerError:function(t){return this.trigger(t.getMessage(),"",0)},trigger:function(t,e,i){return this.fireEvent("error",[t,e,i]),this},getMessageHandler:function(e){var i=this;return new Promise(function(n,s){return"undefined"==typeof i.$execGetMessageHandler||i.MessageHandler?(i.$execGetMessageHandler=!0,i.MessageHandler?("function"===typeOf(e)&&e(i.MessageHandler),void n(i.MessageHandler)):void t(["qui/controls/messages/Handler"],function(t){i.MessageHandler=new t,"function"===typeOf(e)&&e(i.MessageHandler),n(i.MessageHandler)},s)):(i.$execGetMessageHandler=!0,void function(){i.getMessageHandler(e)}.delay(20,i))})},getControls:function(t){this.Controls&&t(this.Controls)}})}),define("qui/QUI",["qui/classes/QUI"],function(t){"use strict";return"undefined"==typeof window.QUI&&(window.QUI=new t),document.fireEvent("qui-loaded"),document.addEvent("domready",function(){window.QUI.parse(document.body)}),window.QUI}),define("qui/classes/Locale",["qui/classes/DOM"],function(t){"use strict";return new Class({Extends:t,Type:"qui/classes/Locale",current:"en",langs:{},no_translation:!1,initialize:function(t){this.parent(t)},setCurrent:function(t){this.current=t},getCurrent:function(){return this.current},getGroups:function(){return this.current in this.langs?Object.keys(this.langs[this.current]):[]},set:function(t,e,i,n){if(this.langs[t]||(this.langs[t]={}),this.langs[t][e]||(this.langs[t][e]={}),"undefined"!=typeof n)return this.langs[t][e][i]=n,this;var s=this.langs[t][e];for(var o in i)i.hasOwnProperty(o)&&(s[o]=i[o]);this.langs[t][e]=s},get:function(t,e,i){if("undefined"==typeof i)return this.$get(t,e);var n=this.$get(t,e);for(t in i)i.hasOwnProperty(t)&&(n=n.replace("["+t+"]",i[t]));return n},$get:function(t,e){return this.no_translation?"["+t+"] "+e:this.langs[this.current]&&this.langs[this.current][t]&&this.langs[this.current][t][e]?this.langs[this.current][t][e]:this.langs[this.current]&&this.langs[this.current][t]&&"undefined"==typeof e?this.langs[this.current][t]:(this.fireEvent("error",["No translation found for ["+t+"] "+e,this]),"["+t+"] "+e)},exists:function(t,e){return this.langs[this.current]&&this.langs[this.current][t]&&this.langs[this.current][t][e]?!0:this.langs[this.current]&&this.langs[this.current][t]&&"undefined"==typeof e?!0:!1}})}),define("qui/Locale",["qui/classes/Locale"],function(t){"use strict";return"undefined"==typeof window.QUILocale&&(window.QUILocale=new t),window.QUILocale}),define("qui/lib/require-css/normalize",[],function(){function t(t,i,s){if(t.match(u)||t.match(r))return t;t=o(t);var l=s.match(r),a=i.match(r);return!a||l&&l[1]==a[1]&&l[2]==a[2]?n(e(t,i),s):e(t,i)}function e(t,e){if("./"==t.substr(0,2)&&(t=t.substr(2)),t.match(u)||t.match(r))return t;var i=e.split("/"),n=t.split("/");for(i.pop();curPart=n.shift();)".."==curPart?i.pop():i.push(curPart);return i.join("/")}function n(t,e){var n=e.split("/");for(n.pop(),e=n.join("/")+"/",i=0;e.substr(i,1)==t.substr(i,1);)i++;for(;"/"!=e.substr(i,1);)i--;e=e.substr(i+1),t=t.substr(i+1),n=e.split("/");var s=t.split("/");for(out="";n.shift();)out+="../";for(;curPart=s.shift();)out+=curPart+"/";return out.substr(0,out.length-1)}var s=/([^:])\/+/g,o=function(t){return t.replace(s,"$1/")},r=/[^\:\/]*:\/\/([^\/])*/,u=/^(\/|data:)/,l=function(e,i,n){i=o(i),n=o(n);for(var s,r,e,u=/@import\s*("([^"]*)"|'([^']*)')|url\s*\(\s*(\s*"([^"]*)"|'([^']*)'|[^\)]*\s*)\s*\)/gi;s=u.exec(e);){r=s[3]||s[2]||s[5]||s[6]||s[4];var l;l=t(r,i,n);var a=s[5]||s[6]?1:0;e=e.substr(0,u.lastIndex-r.length-a-1)+l+e.substr(u.lastIndex-a-1),u.lastIndex=u.lastIndex+(l.length-r.length)}return e};return l.convertURIBase=t,l.absoluteURI=e,l.relativeURI=n,l}),define("qui/lib/require-css/css",[],function(){if("undefined"==typeof window)return{load:function(t,e,i){i()}};var t=document.getElementsByTagName("head")[0],e=window.navigator.userAgent.match(/Trident\/([^ ;]*)|AppleWebKit\/([^ ;]*)|Opera\/([^ ;]*)|rv\:([^ ;]*)(.*?)Gecko\/([^ ;]*)|MSIE\s([^ ;]*)/)||0,i=!1,n=!0;e[1]||e[7]?i=parseInt(e[1])<6||parseInt(e[7])<=9:e[2]?n=!1:e[4]&&(i=parseInt(e[4])<18);var s={};s.pluginBuilder="./css-builder";var o,r,u,l=function(){o=document.createElement("style"),t.appendChild(o),r=o.styleSheet||o.sheet},a=0,c=[],h=function(t){a++,32==a&&(l(),a=0),r.addImport(t),o.onload=d},d=function(){u();var t=c.shift();return t?(u=t[1],void h(t[0])):void(u=null)},f=function(t,e){if(r&&r.addImport||l(),r&&r.addImport)u?c.push([t,e]):(h(t),u=e);else{o.textContent='@import "'+t+'";';var i=setInterval(function(){try{o.sheet.cssRules,clearInterval(i),e()}catch(t){}},10)}},m=function(e,i){var s=document.createElement("link");if(s.type="text/css",s.rel="stylesheet",n)s.onload=function(){s.onload=function(){},setTimeout(i,7)};else var o=setInterval(function(){for(var t=0;t<document.styleSheets.length;t++){var e=document.styleSheets[t];if(e.href==s.href)return clearInterval(o),i()}},10);s.href=e,t.appendChild(s)};return s.normalize=function(t,e){return".css"==t.substr(t.length-4,4)&&(t=t.substr(0,t.length-4)),e(t)},s.load=function(t,e,n){(i?f:m)(e.toUrl(t+".css"),n)},s}),define("qui/lib/require-css/css!qui/controls/Control",[],function(){}),define("qui/controls/Control",["qui/QUI","qui/Locale","qui/classes/DOM","css!qui/controls/Control.css"],function(t,e,i){"use strict";return new Class({Extends:i,Type:"qui/controls/Control",$Parent:!1,options:{name:""},initialize:function(e){this.parent(e),t.Controls.add(this),t.Controls.ElementQueries.update()},create:function(){return this.$Elm?this.$Elm:(this.$Elm=new Element("div.qui-control"),this.$Elm.set("data-quiid",this.getId()),this.$Elm)},destroy:function(){this.fireEvent("destroy",[this]),"undefined"!=typeof this.$Elm&&this.$Elm&&this.$Elm.destroy(),this.$Elm=null;var t=Slick.uidOf(this);t in window.$quistorage&&delete window.$quistorage[t],this.removeEvents()},inject:function(e,i){return this.fireEvent("drawBegin",[this]),"undefined"!=typeof this.$Elm&&this.$Elm||(this.$Elm=this.create()),"undefined"!=typeof t&&"undefined"!=typeof t.Controls&&t.Controls.isControl(e)?e.appendChild(this):this.$Elm.inject(e,i),this.$Elm.set("data-quiid",this.getId()),this.fireEvent("inject",[this]),this},imports:function(t){this.$Elm=t;for(var e,i,n,s,o=t.attributes,r=0,u=o.length;u>r;r++)e=o[r],i=e.name,i.match("data-qui-options-")&&(n=e.value,s=Number.from(n),"number"===typeOf(s)&&(n=s),this.setAttribute(i.replace("data-qui-options-",""),n));return this.$Elm.set("data-quiid",this.getId()),this.fireEvent("import",[this,t]),this},replaces:function(t){return this.$Elm?this.$Elm:("undefined"!=typeof t.styles&&this.setAttribute("styles",t.styles),this.$Elm=this.create(),this.$Elm.set("data-quiid",this.getId()),this.$Elm.set("data-qui",t.get("data-qui")),t.getParent()&&this.$Elm.replaces(t),this)},serialize:function(){return{attributes:this.getAttributes(),type:this.getType()}},unserialize:function(t){t.attributes&&this.setAttributes(t.attributes)},getElm:function(){return"undefined"!=typeof this.$Elm&&this.$Elm||this.create(),this.$Elm},getParent:function(){return this.$Parent||!1},setParent:function(t){return this.$Parent=t,this},getPath:function(){var t="/"+this.getAttribute("name"),e=this.getParent();return e?e.getPath()+t:t},hide:function(){return this.$Elm&&this.$Elm.setStyle("display","none"),this},show:function(){return this.$Elm&&this.$Elm.setStyle("display",null),this},isHidden:function(){return this.$Elm?"none"==this.$Elm.getStyle("display"):!0},highlight:function(){return this.fireEvent("highlight",[this]),this},normalize:function(){return this.fireEvent("normalize",[this]),this},focus:function(){if(this.$Elm)try{this.$Elm.focus()}catch(t){}return this},resize:function(){this.fireEvent("resize",[this])},openSheet:function(t,i){var n=this;i=i||{},i=Object.merge({buttons:!0},i);var s=new Element("div",{"class":"qui-sheet qui-box",html:'<div class="qui-sheet-content box"></div><div class="qui-sheet-buttons box"><div class="qui-sheet-buttons-back qui-button btn-white"><span>'+e.get("qui/controls/Control","btn.back")+"</span></div></div>",styles:{left:"-110%"}}).inject(this.$Elm);s.getElement(".qui-sheet-buttons-back").addEvent("click",function(){s.fireEvent("close")});var o=this.getElm().getStyle("overflow");s.addEvent("close",function(){n.getElm().setStyle("overflow",o),moofx(s).animate({left:"-100%",opacity:0},{equation:"ease-in",callback:function(){s.destroy()
}})});var r=s.getElement(".qui-sheet-content");return r.setStyles({height:s.getSize().y-50}),this.getElm().setStyle("overflow","hidden"),i.buttons===!1&&s.getElement(".qui-sheet-buttons").destroy(),moofx(s).animate({left:0},{equation:"ease-out",callback:function(){t(r,s)}}),s}})}),define("qui/utils/Controls",["qui/QUI"],function(t){"use strict";return{isFontAwesomeClass:function(t){return t?!t.match(/icon-/)&&!t.match(/fa-/)||t.match(/\./)?!1:!0:!1},highlight:function(e){if(e){var i=e.get("data-quiid");i&&t.Controls.getById(i).highlight()}},normalize:function(e){if(e){var i=e.get("data-quiid");i&&t.Controls.getById(i).normalize()}}}}),define("qui/utils/NoSelect",{enable:function(t){"use strict";return"undefined"==typeof t.setProperty&&(t=document.id(t)),t.removeClass("qui-utils-noselect"),Browser.ie?void document.removeEvent("selectstart",this.stopSelection):(t.removeProperty("unselectable","on"),t.removeProperty("unSelectable","on"),void t.setStyles({MozUserSelect:"",KhtmlUserSelect:""}))},disable:function(t){"use strict";return"undefined"==typeof t.setProperty&&(t=document.id(t)),t.addClass("qui-utils-noselect"),Browser.ie?void document.addEvent("selectstart",this.stopSelection):(t.setProperty("unselectable","on"),t.setProperty("unSelectable","on"),void t.setStyles({MozUserSelect:"none",KhtmlUserSelect:"none"}))},stopSelection:function(t){"use strict";return t.stop(),!1}}),define("qui/classes/utils/DragDrop",["qui/classes/DOM"],function(t){"use strict";return new Class({Extends:t,Type:"qui/classes/utils/DragDrop",Binds:["$complete","$onDrag","$onDrop","$onLeave","$onEnter"],options:{dropables:[document.body],styles:!1,cssClass:!1,delay:500,limit:{x:!1,y:!1}},initialize:function(t,e){var i=this;this.parent(e),this.$Drag=null,this.$Element=t,this.$enable=!0,"undefined"!=typeof t&&t.addEvents({mousedown:function(t){i.$enable&&(i.setAttribute("_stopdrag",!1),i.$timer=i.$start.delay(i.getAttribute("delay"),i,t),t.stop())},mouseup:function(t){"undefined"!=typeof i.$timer&&clearTimeout(i.$timer),i.$stop(t)},mouseleave:function(t){i.$Drag||("undefined"!=typeof i.$timer&&clearTimeout(i.$timer),i.$stop(t))}})},getElm:function(){return this.$Elm},enable:function(){this.$enable=!0},disable:function(){this.$enable=!1},$start:function(t){if(this.$enable&&!(t.rightClick||Browser.ie8||this.getAttribute("_mousedown")||this.getAttribute("_stopdrag"))){this.setAttribute("_mousedown",!0);var e=t.page.x,i=t.page.y,n=this.$Element,s=n.getSize(),o=this.getAttribute("limit"),r=document.body.getSize();this.$Drag=new Element("div",{"class":"box",styles:{position:"absolute",top:i-20,left:e-40,zIndex:1e3,MozOutline:"none",outline:0,color:"#fff",padding:10,cursor:"pointer",width:s.x,height:s.y,background:"rgba(0,0,0, 0.5)"}}).inject(document.body),this.getAttribute("styles")&&this.$Drag.setStyles(this.getAttribute("styles")),this.getAttribute("cssClass")&&this.$Drag.addClass(this.getAttribute("cssClass")),this.$Drag.focus(),this.fireEvent("start",[this,this.$Drag,t]),o.x||(o.x=[0,r.x-this.$Drag.getSize().x]),o.y||(o.y=[0,r.y-this.$Drag.getSize().y]);var u=this.getAttribute("dropables");"array"===typeOf(u)&&(u=u.join(",")),new Drag.Move(this.$Drag,{precalculate:!0,droppables:u,onComplete:this.$complete,onDrop:this.$onDrop,onEnter:this.$onEnter,onLeave:this.$onLeave,onDrag:this.$onDrag,limit:o}).start({page:{x:e,y:i}})}},$stop:function(){if(!Browser.ie8){if(!this.getAttribute("_mousedown"))return void this.setAttribute("_stopdrag",!0);this.setAttribute("_mousedown",!1),("undefined"!=typeof this.$Drag||this.$Drag)&&(this.fireEvent("stop",[this,this.$Drag]),this.$Drag.destroy(),this.$Drag=null)}},$complete:function(t){this.fireEvent("complete",[this,t]),this.$stop()},$onDrag:function(t,e){this.fireEvent("drag",[this,t,e])},$onDrop:function(t,e,i){this.fireEvent("drop",[this,t,e,i])},$onEnter:function(t,e){this.fireEvent("enter",[this,t,e])},$onLeave:function(t,e){this.fireEvent("leave",[this,t,e])}})}),define("qui/utils/Elements",{isInViewport:function(t){"use strict";var e=t.getBoundingClientRect();return e.top>=0&&e.left>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth)},getComputedZIndex:function(t){"use strict";var e,i,n,s=0,o=t.getParents();for(e=0,n=o.length;n>e;e++)i=o[e].getStyle("zIndex"),"auto"!=i&&i>s&&(s=i);return s},getChildIndex:function(t){"use strict";return Array.prototype.indexOf.call(t.getParent().children,t)},getCursorPosition:function(t){"use strict";if("INPUT"!==t.nodeName)return null;if("selectionStart"in t)return t.selectionStart;if(document.selection){t.focus();var e=document.selection.createRange(),i=e.text.length;return e.moveStart("character",-t.value.length),e.text.length-i}return null},setCursorPosition:function(t,e){"use strict";if("INPUT"!==t.nodeName&&"TEXTAREA"!==t.nodeName)return null;if(t.createTextRange){var i=t.createTextRange();return i.move("character",e),void i.select()}return t.selectionStart?(t.focus(),void t.setSelectionRange(e+1,e+1)):void t.focus()}}),define("qui/lib/require-css/css!qui/controls/contextmenu/Menu",[],function(){}),define("qui/controls/contextmenu/Menu",["qui/QUI","qui/controls/Control","qui/utils/Elements","css!qui/controls/contextmenu/Menu.css"],function(t,e,i){"use strict";return new Class({Extends:e,Type:"qui/controls/contextmenu/Menu",Binds:["$keyup"],options:{styles:null,width:200,title:!1,shadow:!0,corner:!1,maxHeight:!1,dragable:!1},initialize:function(t){this.parent(t),this.$items=[],this.$Title=null,this.$Active=null,this.$__activeSubMenu=!1},create:function(){var t=this;this.$Elm=new Element("div.qui-contextmenu",{html:'<div class="qui-contextmenu-container"></div>',tabindex:-1,styles:{display:"none",outline:"none","-moz-outline":"none"},events:{blur:function(){this.fireEvent("blur",[this])}.bind(this),keyup:this.$keyup,mouseenter:function(){t.fireEvent("mouseEnter",[t])},mouseleave:function(){t.fireEvent("mouseLeave",[t])},mousedown:function(t){t.stop()}},"data-quiid":this.getId()}),this.$Container=this.$Elm.getElement(".qui-contextmenu-container"),this.getAttribute("width")&&this.$Elm.setStyle("width",this.getAttribute("width")),this.getAttribute("styles")&&this.$Elm.setStyles(this.getAttribute("styles")),this.getAttribute("title")&&this.setTitle(this.getAttribute("title")),this.getAttribute("shadow")&&this.$Container.addClass("qui-contextmenu-shadow");for(var e=0,i=this.$items.length;i>e;e++)this.$items[e].inject(this.$Container);return this.$Elm},show:function(){if(!this.$Elm)return this;this.$__activeSubMenu&&this.$__activeSubMenu.hide(),this.$__activeSubMenu=!1;var e=this.$Elm.getParent(),n=this.$Elm;switch(this.getAttribute("corner")&&(n.removeClass("qui-context-corner-top"),n.removeClass("qui-context-corner-bottom"),n.removeClass("qui-context-corner-left"),n.removeClass("qui-context-corner-left")),this.getAttribute("corner")){case"top":n.addClass("qui-context-corner-top");break;case"bottom":n.addClass("qui-context-corner-bottom");break;case"left":n.addClass("qui-context-corner-left");break;case"right":n.addClass("qui-context-corner-right")}if(this.getParent()&&t.Controls.isControl(this.getParent())){var s=this.getParent().getElm();s&&n.setStyle("zIndex",i.getComputedZIndex(s)+1)}this.$Container.setStyle("height",0),n.setStyles({display:"",height:0});var o=n.getScrollSize();if(this.$Container.setStyle("height",o.y+5),this.getAttribute("maxHeight")?(o=this.$Container.getScrollSize(),o.y>=this.getAttribute("maxHeight")?(n.setStyles({height:this.getAttribute("maxHeight")}),this.$Container.setStyles({height:this.getAttribute("maxHeight"),overflow:"auto"})):(n.setStyles({height:o.y}),this.$Container.setStyle("height",o.y+5)),o=n.getSize()):n.setStyle("height",o.y),this.setAttribute("menuPosLeft",!1),"BODY"===e.nodeName){var r=n.getPosition(),u=e.getSize();r.x+o.x+50>u.x&&this.$Elm.setStyle("left",u.x-o.x-50),r.y+o.y+50>u.y&&this.$Elm.setStyle("top",u.y-o.y-50)}return this.$Active&&this.$Active.setActive(),this.fireEvent("show",[this]),this},hide:function(){for(var t=this.getChildren(),e=0,i=t.length;i>e;e++)t[e].$Menu&&t[e].$Menu.hide();return this.getElm().setStyles({display:"none"}),this.fireEvent("hide",[this]),this},focus:function(){return this.getElm().focus(),this.fireEvent("focus",[this]),this},setPosition:function(t,e){return this.$Elm&&this.$Elm.setStyles({left:t,top:e}),this},setTitle:function(t){return this.$Container&&!this.$Title&&(this.$Title=new Element("div.qui-contextmenu-title"),this.$Title.inject(this.$Container,"top")),this.$Title&&this.$Title.set("html",t),this.setAttribute("title",t),this},getChildren:function(t){if("undefined"!=typeof t){var e,i,n=this.$items;for(e=0,i=n.length;i>e;e++)if(n[e].getAttribute("name")==t)return n[e];return!1}return this.$items},firstChild:function(){return this.$items[0]?this.$items[0]:!1},count:function(){return this.$items.length},appendChild:function(t){return t&&"undefined"!=typeof t?(this.$items.push(t),t.setParent(this),this.getAttribute("dragable")&&t.setAttribute("dragable",!0),this.$Container&&t.inject(this.$Container),this):this},clearChildren:function(){for(var t=0,e=this.$items.length;e>t;t++)this.$items[t]&&this.$items[t].destroy();return this.$items=[],this},clear:function(){return this.clearChildren()},getActive:function(){return this.$Active?this.$Active:!1},getNext:function(t){for(var e=0,i=this.$items.length;i>e;e++)if(this.$items[e]==t&&"undefined"!=typeof this.$items[e+1])return this.$items[e+1];return!1},getPrevious:function(t){for(var e=this.$items.length-1;e>=0;e--){if(0===e)return!1;if(this.$items[e]==t)return this.$items[e-1]}return!1},deselectItems:function(){return this.$Active&&(this.$Active=null),this},$keyup:function(t){return"down"===t.key?void this.down():"up"===t.key?void this.up(t):void("enter"===t.key&&this.select(t))},up:function(){if(this.$items.length){var t=this.$items.length;if(!this.$Active)return void this.$items[t-1].setActive();var e=this.getPrevious(this.$Active);return this.$Active.setNormal(),e?void e.setActive():void this.$items[t-1].setActive()}},down:function(){if(this.$items.length){if(!this.$Active)return void this.$items[0].setActive();var t=this.getNext(this.$Active);return this.$Active.setNormal(),t?void t.setActive():void this.$items[0].setActive()}},select:function(t){this.$Active&&(this.$Active.fireEvent("mouseDown",[this.$Active,t]),this.$Active.fireEvent("click",[this.$Active,t]))}})}),define("qui/lib/require-css/css!qui/controls/contextmenu/Item",[],function(){}),define("qui/controls/contextmenu/Item",["qui/QUI","qui/controls/Control","qui/classes/utils/DragDrop","qui/controls/contextmenu/Menu","qui/utils/Controls","css!qui/controls/contextmenu/Item.css"],function(QUI,Control,DragDrop,ContextMenu,Utils){"use strict";return new Class({Extends:Control,Type:"qui/controls/contextmenu/Item",Binds:["$onSetAttribute","$stringEvent","$onClick","$onInject","$onMouseEnter","$onMouseLeave","$onMouseUp","$onMouseDown"],options:{text:"",icon:"",styles:null,dragable:!1},initialize:function(options){options=options||{};var self=this,items=options.items||[];delete options.items,this.parent(options),this.$items=[],this.$path="",this.$disabled=!1,this.$Elm=null,this.$Container=null,this.$Menu=null,this.$Text=null,this.$__childOpend=!1,"undefined"!=typeof options.disabled&&options.disabled&&(this.$disabled=!0),this.addEvent("onSetAttribute",this.$onSetAttribute),this.addEvent("onInject",this.$onInject),items.length&&this.insert(items),this.getAttribute("onClick")&&this.addEvent("onClick",function(){var func=self.getAttribute("onClick");try{"function"==typeof func?func(self):eval(self.getAttribute("onClick")+"( self )")}catch(e){console.error(e)}})},create:function(){var t,e,i=this;if(this.$Elm=new Element("div.qui-contextitem",{html:'<div class="qui-contextitem-container"><span class="qui-contextitem-icon"></span><span class="qui-contextitem-text"></span></div>',"data-quiid":this.getId(),tabindex:-1,events:{mouseenter:this.$onMouseEnter,mouseleave:this.$onMouseLeave}}),this.$Container=this.$Elm.getElement(".qui-contextitem-container"),this.$Text=this.$Elm.getElement(".qui-contextitem-text"),this.$Container.addEvents({click:this.$onClick,mousedown:this.$onMouseDown,mouseup:this.$onMouseUp}),this.getAttribute("icon")&&""!==this.getAttribute("icon")){var n=this.$Elm.getElement(".qui-contextitem-icon"),s=this.getAttribute("icon");Utils.isFontAwesomeClass(s)?n.addClass(s):n.setStyle("background-image",'url("'+s+'")')}if(this.getAttribute("text")&&""!==this.getAttribute("text")){var o=this.$Elm.getElement(".qui-contextitem-text");o.set({html:this.getAttribute("text")}),this.$onInject.delay(500)}if(this.getAttribute("dragable")&&new DragDrop(this.$Elm,{dropables:".qui-contextitem-dropable",events:{onEnter:function(t,e,i){if(i){var n=i.get("data-quiid");n&&QUI.Controls.getById(n).highlight()}},onLeave:function(t,e,i){if(i){var n=i.get("data-quiid");n&&QUI.Controls.getById(n).normalize()}},onDrop:function(t,e,n){if(n){var s=n.get("data-quiid");if(s){var o=QUI.Controls.getById(s);o.normalize(),o.appendChild(i)}}}}}),e=this.$items.length){this.$Elm.addClass("haschildren");var r=this.getContextMenu();for(t=0;e>t;t++)r.appendChild(this.$items[t])}return this.isDisabled()&&this.disable(),this.$Elm},$onInject:function(){},insert:function(t){var e=this;return require(["qui/controls/contextmenu/Item","qui/controls/contextmenu/Seperator"],function(i,n){for(var s=0,o=t.length;o>s;s++)e.getAttribute("dragable")&&(t[s].dragable=!0),e.appendChild("qui/controls/contextmenu/Seperator"!=t[s].type?new i(t[s]):new n(t[s]))}),this},click:function(){this.$onClick(!1)},appendChild:function(t){return this.$items.push(t),t.setParent(this),this.$Elm&&(this.$Elm.addClass("haschildren"),t.inject(this.getContextMenu())),this.fireEvent("append",[this,t]),this},disable:function(){return this.$disabled=!0,this.$Elm?(this.$Elm.addClass("qui-contextitem-disabled"),this):this},isDisabled:function(){return this.$disabled},enable:function(){return this.$disabled=!1,this.$Elm?(this.$Elm.removeClass("qui-contextitem-disabled"),this):this},setActive:function(){return this.$Elm&&this.$Elm.hasClass("qui-contextitem-active")?this:(this.$Elm&&(this.$Menu?this.$Container.addClass("qui-contextitem-active"):this.$Elm.addClass("qui-contextitem-active")),this.fireEvent("active",[this]),this)},setNormal:function(){return this.$Elm?(this.$Menu?this.$Container.removeClass("qui-contextitem-active"):this.$Elm.removeClass("qui-contextitem-active"),this.fireEvent("normal",[this]),this):this},getChildren:function(t){return"undefined"!=typeof t?t==this.getAttribute("name")+"-menu"?this.getContextMenu():this.getContextMenu().getChildren(t):this.getContextMenu().getChildren()},getTextElm:function(){return this.$Text},clear:function(){return this.getContextMenu().clear(),this.$items=[],this},getContextMenu:function(){if(this.$Menu)return this.$Menu;var t=this;return this.$Menu=new ContextMenu({name:this.getAttribute("name")+"-menu",corner:"left",events:{onShow:function(e){for(var i=e.getChildren(),n=0,s=i.length;s>n;n++)i[n].setNormal();var o=t.getParent().$__activeSubMenu;o&&o!=e&&t.getParent().$__activeSubMenu.hide(),t.getParent().$__activeSubMenu=e},onMouseEnter:function(){t.$__childOpend=!0}}}),this.$Menu.inject(document.body),this.$Menu.hide(),this.$Menu.setParent(this),this.$Menu},$onSetAttribute:function(t,e){if(this.$Elm){if("text"==t)return void this.$Elm.getElement(".qui-contextitem-text").set("html",e);if("icon"==t){var i=this.$Elm.getElement(".qui-contextitem-icon");i.className="qui-contextitem-icon",i.setStyle("background-image",null),Utils.isFontAwesomeClass(e)?i.addClass(e):this.$Container.setStyle("background-image",'url("'+e+'")')}}},$stringEvent:function(event){eval("("+event+"(this));")},$onClick:function(t){if(!this.$disabled){this.fireEvent("click",[this,t]);var e=this.getParent();e&&this.getParent().hide()}},$onMouseEnter:function(){var t=this.getParent().$__activeSubMenu;if(t&&t.hide(),!this.$disabled){if(this.$Menu){var e=this.$Elm.getPosition(),i=this.$Elm.getSize(),n=this.$Menu.getParent();if(this.$Menu.setPosition(e.x+i.x,e.y),this.$__childOpend=!1,n){var s=this.$Menu.getElm(),o=s.getPosition(),r=s.getSize(),u=document.body.getSize();o.x+i.x>u.x&&this.$Menu.setPosition(0-r.x,0)}this.$Menu.show(),this.$Container.addClass("qui-contextitem-active")}this.setActive()}},$onMouseLeave:function(){this.$disabled||(this.$Menu&&function(){this.$__childOpend===!1&&this.$Menu.hide()}.delay(100,this),this.$Container.removeClass("qui-contextitem-active"),this.setNormal())},$onMouseUp:function(t){this.fireEvent("mouseUp",[this,t]),this.getAttribute("dragable")===!1&&t.stop()},$onMouseDown:function(t){this.fireEvent("mouseDown",[this,t]),this.getAttribute("dragable")===!1&&t.stop()}})}),define("qui/lib/require-css/css!qui/controls/buttons/Button",[],function(){}),define("qui/controls/buttons/Button",["qui/controls/Control","qui/utils/Controls","qui/utils/NoSelect","qui/controls/contextmenu/Item","css!qui/controls/buttons/Button.css"],function(Control,Utils,NoSelect,ContextMenuItem){"use strict";return new Class({Extends:Control,Type:"qui/controls/buttons/Button",Binds:["onSetAttribute"],options:{type:"button",image:!1,icon:!1,style:{},textimage:!1,text:!1,title:!1,"class":!1,buttonCSSClass:!0,menuCorner:"top",dropDownIcon:!0},params:{},initialize:function(t){t=t||{},this.parent(t),this.$Menu=null,this.$Drop=null,this.$items=[],t.events&&delete t.events,this.setAttributes(this.initV2(t)),this.addEvent("onSetAttribute",this.onSetAttribute),this.addEvent("onDestroy",function(){this.$Menu&&this.$Menu.destroy()}.bind(this))},initV2:function(options){return"undefined"!=typeof options.onclick&&("string"===typeOf(options.onclick)&&(options.onclick=function(p){eval(p+"(this);")}.bind(this,[options.onclick])),this.addEvent("onClick",options.onclick),delete options.onclick),"undefined"!=typeof options.oncreate&&(this.addEvent("onCreate",options.oncreate),delete options.oncreate),options},create:function(){var t=this,e=new Element("button",{type:this.getAttribute("type"),"data-status":0,"data-quiid":this.getId()});this.getAttribute("buttonCSSClass")&&e.addClass("qui-button"),this.getAttribute("width")&&e.setStyle("width",this.getAttribute("width")),this.getAttribute("height")&&e.setStyle("height",this.getAttribute("height")),this.getAttribute("styles")&&e.setStyles(this.getAttribute("styles")),this.getAttribute("class")&&e.addClass(this.getAttribute("class")),e.style.outline=0,e.setAttribute("tabindex","-1"),e.addEvents({click:function(e){t.isDisabled()||t.onclick(e)},mouseenter:function(){t.isDisabled()||(t.isActive()||t.getElm().addClass("qui-button-over"),t.fireEvent("enter",[t]))},mouseleave:function(){t.isDisabled()||(t.isActive()||t.getElm().removeClass("qui-button-over"),t.fireEvent("leave",[t]))},mousedown:function(e){t.isDisabled()||t.fireEvent("mousedown",[t,e])},mouseup:function(e){t.isDisabled()||t.fireEvent("mouseup",[t,e])},blur:function(e){t.fireEvent("blur",[t,e])},focus:function(e){t.fireEvent("focus",[t,e])}}),this.$Elm=e,this.getAttribute("icon")&&this.setAttribute("icon",this.getAttribute("icon")),!this.getAttribute("icon")&&this.getAttribute("image")&&this.setAttribute("icon",this.getAttribute("image")),this.getAttribute("styles")&&this.setAttribute("styles",this.getAttribute("styles")),this.getAttribute("textimage")&&this.setAttribute("textimage",this.getAttribute("textimage")),this.getAttribute("text")&&this.setAttribute("text",this.getAttribute("text")),this.getAttribute("title")&&this.$Elm.setAttribute("title",this.getAttribute("title")),this.getAttribute("disabled")&&this.disable();var i,n=this.$items.length;return n&&this.getContextMenu(function(e){for(i=0;n>i;i++)e.appendChild(t.$items[i]);t.getAttribute("dropDownIcon")&&(t.$Drop=new Element("div",{"class":"qui-button-drop icon-chevron-down fa fa-chevron-down"}).inject(t.$Elm))}),this.fireEvent("create",[this]),NoSelect.disable(e),this.$Elm},click:function(t){this.isDisabled()||(this.getElm().addClass("qui-button--click"),this.fireEvent("click",[this,t]),this.getElm().removeClass.delay(300,this.getElm(),"qui-button--click"))},onclick:function(t){this.click(t)},setActive:function(){if(!this.isDisabled()){var t=this.getElm();t&&(t.addClass("qui-button-active"),t.set("data-status",1),this.fireEvent("active",[this]))}},isActive:function(){return this.getElm()?1==this.getElm().get("data-status"):!1},disable:function(){var t=this.getElm();return t?(t.set({"data-status":-1,disabled:"disabled"}),this.fireEvent("disable",[this]),this):this},setDisable:function(){return this.disable()},isDisabled:function(){return this.getElm()?-1==this.getElm().get("data-status"):!1},enable:function(){return this.getElm()?(this.getElm().set({"data-status":0,disabled:null}),this.setNormal(),this):this},setEnable:function(){return this.enable()},setNormal:function(){if(this.isDisabled())return this;if(!this.getElm())return this;var t=this.getElm();return t.set({"data-status":0,disabled:null}),t.removeClass("qui-button-active"),t.removeClass("qui-button-over"),this.fireEvent("normal",[this]),this},appendChild:function(t){if("object"==typeOf(t)&&(t=new ContextMenuItem(t)),this.$items.push(t),t.setAttribute("Button",this),!this.$Elm)return this;var e=this;return this.getContextMenu(function(i){i.appendChild(t),e.getAttribute("dropDownIcon")&&!e.$Drop&&(e.$Drop=new Element("div",{"class":"qui-button-drop icon-chevron-down fa fa-chevron-down"}).inject(e.$Elm))}),this},getChildren:function(){return this.$items},clear:function(){return this.getContextMenu(function(t){t.clearChildren()}),this.$items=[],this},getContextMenu:function(t){if(this.$Menu&&"undefined"==typeof this.$createContextMenu)return t(this.$Menu),this;var e=this;return"undefined"!=typeof this.$createContextMenu?(function(){e.getContextMenu(t)}.delay(10),this):(this.$createContextMenu=!0,void require(["qui/controls/contextmenu/Menu"],function(i){e.$Menu=new i({name:e.getAttribute("name")+"-menu",corner:e.getAttribute("menuCorner")}),e.$Menu.inject(document.body),e.addEvents({onClick:function(){if(!e.isDisabled()){var t=e.$Elm.getPosition(),i=e.$Elm.getSize(),n=e.getAttribute("menuCorner"),s=e.$Menu.getElm().getComputedSize();n.contains("bottom")?e.$Menu.setPosition(t.x-20,t.y-i.y-s.totalHeight+10):e.$Menu.setPosition(t.x-20,t.y+i.y+10),e.$Menu.show(),e.$Elm.focus()}},onBlur:function(){e.$Menu.hide()}}),e.$Menu.setParent(e),delete e.$createContextMenu,t(e.$Menu)}))},onSetAttribute:function(k,value){var Elm=this.getElm();if(Elm){if("onclick"===k)return this.removeEvents("click"),void this.addEvent("click",function(p){eval(p+"(this);")}.bind(this,[value]));if("image"==k&&(k="icon"),"icon"===k){Elm.getElement(".image-container")||new Element("div.image-container",{align:"center"}).inject(Elm);var Image=Elm.getElement(".image-container");return Image.set("html",""),void(Utils.isFontAwesomeClass(value)?new Element("span",{"class":value}).inject(Image):new Element("img.qui-button-image",{src:value,styles:{display:"block"}}).inject(Image))}if("styles"===k)return void Elm.setStyles(value);if("title"===k)return void Elm.setAttribute("title",value);if("textimage"===k||"text"===k){Elm.getElement(".qui-button-text")||new Element("span.qui-button-text").inject(Elm);var Txt=Elm.getElement(".qui-button-text");if("text"===k&&Txt.set("html",value),"textimage"===k){var Img;Elm.getElement(".qui-button-text-image")&&Elm.getElement(".qui-button-text-image").destroy(),Img=Utils.isFontAwesomeClass(value)?new Element("span",{"class":"qui-button-text-image "+value,styles:{"margin-right":0}}).inject(Txt,"before"):new Element("img",{"class":"qui-button-text-image",src:value,styles:{"margin-right":0}}).inject(Txt,"before"),this.getAttribute("text")&&Img.setStyle("margin-right",null)}}}}})}),define("qui/controls/utils/Background",["qui/controls/Control"],function(t){"use strict";return new Class({Extends:t,Type:"qui/controls/utils/Background",options:{styles:!1,animate:!0},initialize:function(t){this.parent(t),this.$FX=moofx(this.$Elm)},create:function(){var t=this;return this.$Elm?this.$Elm:(this.$Elm=new Element("div",{"class":"qui-background",styles:{backgroundColor:"#000000",position:"fixed",width:"100%",height:"100%",top:0,left:0,zIndex:1e3,opacity:0,display:"none"},events:{click:function(){t.fireEvent("click",[t])}}}),this.$FX=moofx(this.$Elm),document.body.appendChild(this.$Elm),this.getAttribute("styles")&&this.$Elm.setStyles(this.getAttribute("styles")),this.$Elm)},show:function(t){return this.$Elm.setStyle("display",null),this.getAttribute("styles")&&this.$Elm.setStyles(this.getAttribute("styles")),this.getAttribute("animate")===!1?void this.$Elm.set("opacity",.6):void this.$FX.animate({opacity:.6},{duration:200,callback:function(){"function"==typeof t&&t()}})},hide:function(t){return this.getAttribute("animate")===!1?(this.$Elm.set("opacity",0),void("function"==typeof t&&t())):void this.$FX.animate({opacity:0},{duration:200,callback:function(){"function"==typeof t&&t()}})}})}),define("qui/lib/require-css/css!qui/controls/loader/Loader",[],function(){}),define("qui/controls/loader/Loader",["qui/QUI","qui/controls/Control","qui/Locale","css!qui/controls/loader/Loader.css"],function(t,e,i){"use strict";return new Class({Extends:e,Type:"qui/controls/loader/Loader",options:{cssclass:"",closetime:5e4,styles:!1,type:!1,color:!1},initialize:function(t){this.parent(t),this.$Inner=null,this.$Close=null,this.$FX=null,this.$delay=null,this.$status=0,this.addEvent("onDestroy",function(){this.$Elm.getParent()&&this.$Elm.getParent().removeClass("qui-loader-parent")}),this.$animations={standard:{children:8,files:["css!qui/controls/loader/Loader.standard.css"]},"line-scale":{children:5,files:["css!qui/controls/loader/Loader.line-scale.css"]},"ball-clip-rotate":{children:1,files:["css!qui/controls/loader/Loader.ball-clip-rotate.css"]},"ball-pulse-rise":{children:5,files:["css!qui/controls/loader/Loader.ball-pulse-rise.css"]},"ball-triangle-path":{children:3,files:["css!qui/controls/loader/Loader.ball-triangle-path.css"]},pacman:{children:5,files:["css!qui/controls/loader/Loader.pacman.css"]}}},create:function(){return this.$Elm=new Element("div",{"class":"qui-loader",html:'<div class="qui-loader-message"></div><div class="qui-loader-inner"></div>',styles:{display:"none",opacity:.8}}),this.getAttribute("cssclass")&&this.$Elm.addClass(this.getAttribute("cssclass")),this.getAttribute("styles")&&this.$Elm.setStyles(this.getAttribute("styles")),this.$Inner=this.$Elm.getElement(".qui-loader-inner"),this.$Message=this.$Elm.getElement(".qui-loader-message"),this.$FX=moofx(this.$Elm),this.$Elm},show:function(e){if(this.$status=1,this.$Elm&&this.$Elm.getParent()){this.$Close&&(this.$Close.destroy(),this.$Close=null,this.$Elm.set({html:'<div class="qui-loader-message"></div><div class="qui-loader-inner"></div>'}),this.$Inner=this.$Elm.getElement(".qui-loader-inner"),this.$Message=this.$Elm.getElement(".qui-loader-message"));var i=this,n=this.$Elm.measure(function(){return this.getSize()});this.$Message.set("html",""),"undefined"!=typeof e&&this.$Message.set({html:e,styles:{top:(n.y+20)/2}}),this.$Elm.setStyle("display",""),this.$FX.animate({opacity:.8});var s=!1,o=!1;this.getAttribute("type")&&this.getAttribute("type")in this.$animations&&(s=this.$animations[this.getAttribute("type")],o=this.getAttribute("type")),!o&&t.getAttribute("control-loader-type")&&t.getAttribute("control-loader-type")in this.$animations&&(s=this.$animations[t.getAttribute("control-loader-type")],o=t.getAttribute("control-loader-type")),o||(s=this.$animations.standard,o="standard"),require(s.files,function(){if(0===i.$status)return void i.hide();i.$Inner.set("html","");var e,n,r,u=new Element("div",{"class":"qui-loader-inner-"+o}).inject(i.$Inner),l=i.getAttribute("color");for(l||(l=t.getAttribute("control-loader-color")),e=0,n=s.children;n>e;e++)r=new Element("div",{"class":"control-background"}).inject(u),l&&r.setStyle("background",l);var a=i.$Elm.getParent();return a&&!a.hasClass("qui-window-popup")&&a.addClass("qui-loader-parent"),0===i.$status?void i.hide():void(i.getAttribute("closetime")&&(i.$delay&&clearTimeout(i.$delay),i.$delay=function(){i.showCloseButton()}.delay(i.getAttribute("closetime"),i)))})}},hide:function(t){if(this.$status=0,this.$delay&&clearTimeout(this.$delay),this.$Elm){if(!this.$FX)return this.$Elm.setStyle("display","none"),void("function"==typeof t&&t());var e=this;this.$FX.animate({opacity:0},function(){e.$Elm.setStyle("display","none"),e.$status=0,"function"==typeof t&&t()})}},showCloseButton:function(){if(this.$Elm){this.$Elm.set({html:"",styles:{cursor:"pointer",opacity:.9}});var t=this;this.$Close=new Element("div",{text:i.get("quiqqer/controls","loader.close"),styles:{"font-weight":"bold","text-align":"center","margin-top":this.$Elm.getSize().y/2-100},events:{click:function(){t.hide()}}}).inject(this.$Elm)}}})}),define("qui/controls/windows/locale/de",["qui/Locale"],function(t){"use strict";return t.set("de","qui/controls/windows/Popup",{"btn.close":"Schließen","btn.back":"Zurück"}),t}),define("qui/controls/windows/locale/en",["qui/Locale"],function(t){"use strict";return t.set("en","qui/controls/windows/Popup",{"btn.close":"Close","btn.back":"Back"}),t}),define("qui/lib/require-css/css!qui/controls/windows/Popup",[],function(){}),define("qui/controls/windows/Popup",["qui/QUI","qui/controls/Control","qui/controls/utils/Background","qui/controls/loader/Loader","qui/Locale","qui/utils/Controls","qui/controls/windows/locale/de","qui/controls/windows/locale/en","css!qui/controls/windows/Popup.css","css!qui/controls/buttons/Button.css"],function(t,e,i,n,s,o){"use strict";return new Class({Extends:e,Type:"qui/controls/windows/Popup",Binds:["resize","cancel"],options:{maxWidth:900,maxHeight:600,content:!1,icon:!1,title:!1,"class":!1,backgroundClosable:!0,buttons:!0,closeButton:!0,closeButtonText:s.get("qui/controls/windows/Popup","btn.close"),titleCloseButton:!0},initialize:function(e){this.parent(e),this.$Elm=null,this.$Content=null,this.$Buttons=null,this.$FX=!1,this.$opened=!1,this.Background=new i,this.Loader=new n,t.Windows.register(this),window.addEvent("resize",this.resize)},create:function(){if(this.$Elm)return this.$Elm;var t=this;this.$Elm=new Element("div",{"class":"qui-window-popup box",html:'<div class="qui-window-popup-title box"><div class="qui-window-popup-title-icon"></div><div class="qui-window-popup-title-text"></div></div><div class="qui-window-popup-content box"></div><div class="qui-window-popup-buttons box"></div>',tabindex:-1,styles:{opacity:0}}),this.$FX=moofx(this.$Elm),this.$Title=this.$Elm.getElement(".qui-window-popup-title"),this.$Icon=this.$Elm.getElement(".qui-window-popup-title-icon"),this.$TitleText=this.$Elm.getElement(".qui-window-popup-title-text"),this.$Content=this.$Elm.getElement(".qui-window-popup-content"),this.$Buttons=this.$Elm.getElement(".qui-window-popup-buttons"),this.$Content.setStyle("opacity",0),this.getAttribute("titleCloseButton")&&new Element("div",{"class":"icon-remove fa fa-remove",styles:{cursor:"pointer","float":"right",lineHeight:17,width:17},events:{click:function(){t.cancel()}}}).inject(this.$Title);var e=this.getAttribute("icon");if(e&&o.isFontAwesomeClass(e)?this.$Icon.addClass(e):e&&new Element("img",{src:e}).inject(this.$Icon),this.getAttribute("title")&&this.$TitleText.set("html",this.getAttribute("title")),this.getAttribute("title")||this.getAttribute("icon")||this.$Title.setStyle("display","none"),this.getAttribute("buttons")&&this.getAttribute("closeButton")){var i=new Element("button",{html:"<span>"+this.getAttribute("closeButtonText")+"</span>","class":"qui-button btn-red",events:{click:this.cancel},styles:{display:"inline","float":"none",width:150,textAlign:"center"}});i.inject(this.$Buttons),this.$Buttons.setStyles({"float":"left",height:50,margin:"0 auto",opacity:0,textAlign:"center",width:"100%"})}return this.getAttribute("buttons")||this.$Buttons.setStyle("display","none"),this.getAttribute("content")&&this.setContent(this.getAttribute("content")),this.getAttribute("class")&&this.$Elm.addClass(this.getAttribute("class")),this.Loader.inject(this.$Elm),this.fireEvent("create",[this]),this.$Elm
},refresh:function(){var t=this.getAttribute("icon");t&&o.isFontAwesomeClass(t)?this.$Icon.addClass(t):t&&(this.$Icon.set("html",""),new Element("img",{src:t}).inject(this.$Icon)),this.getAttribute("title")&&this.$TitleText.set("html",this.getAttribute("title")),this.getAttribute("title")||this.getAttribute("icon")||this.$Title.setStyle("display","none")},open:function(t){this.Background.create(),this.getAttribute("backgroundClosable")&&this.Background.getElm().addEvent("click",this.cancel),this.Background.show(),this.inject(document.body),this.$oldBodyStyle={overflow:document.body.style.overflow,position:document.body.style.position,width:document.body.style.width,top:document.body.style.top,scroll:document.body.getScroll()},document.body.setStyles({width:document.body.getSize().x}),document.body.setStyles({overflow:"hidden",position:"absolute"}),new Fx.Scroll(document.body).set(0,this.$oldBodyStyle.scroll.y),this.$opened=!0,this.getElm().setStyle("position","fixed"),this.fireEvent("openBegin",[this]),this.resize(!0,function(){this.fireEvent("open",[this]),"function"==typeof t&&t()}.bind(this))},resize:function(t,e){if(this.$Elm){if(!this.$opened)return this.open(e);this.fireEvent("resizeBegin",[this]);var i=this,n=document.body.getSize(),s=Math.max(document.documentElement.clientWidth,window.innerWidth||0),o=Math.max(document.documentElement.clientHeight,window.innerHeight||0);s>this.getAttribute("maxWidth")&&(s=this.getAttribute("maxWidth")),o>this.getAttribute("maxHeight")&&(o=this.getAttribute("maxHeight"));var r=(n.y-o)/2,u=(n.x-s)/2;0>r&&(r=0);var l=this.$Elm.getPosition(),a=this.$Elm.getSize();0===l.x&&this.$Elm.setStyle("left",u),0===l.y&&this.$Elm.setStyle("top",r-50),0===a.x&&this.$Elm.setStyle("width",s),this.$FX.animate({height:o,width:s,left:u,top:r,opacity:1},{duration:300,equation:"ease-out",callback:function(){var t=i.$Elm.getSize().y-i.$Buttons.getSize().y-i.$Title.getSize().y;i.$Content.setStyles({height:t,opacity:null}),i.$Buttons.setStyle("opacity",null),i.fireEvent("resize",[i]),"function"==typeof e&&e()}})}},close:function(){if(window.removeEvent("resize",this.resize),"undefined"!=typeof this.$oldBodyStyle&&(document.body.setStyles({overflow:this.$oldBodyStyle.overflow||null,position:this.$oldBodyStyle.position||null,width:this.$oldBodyStyle.width||null,top:this.$oldBodyStyle.top||null}),document.body.scrollTo(this.$oldBodyStyle.scroll.x,this.$oldBodyStyle.scroll.y)),this.$opened=!1,this.$Elm){var t=this;this.$FX.animate({top:this.$Elm.getPosition().y+100,opacity:0},{duration:200,equation:"ease-out",callback:function(){t.fireEvent("close",[t]),t.$Elm.destroy(),t.Background.hide(function(){t.Background.destroy()})}})}},cancel:function(){this.fireEvent("cancel",[this]),this.close()},getContent:function(){return this.$Content},setContent:function(t){this.getContent().set("html",t)},addButton:function(t){if(!this.$Buttons)return this;var e=t;return t.inject(this.$Buttons,"top"),"element"!=typeOf(t)&&(e=t.getElm()),e.setStyles({display:"inline","float":"none"}),this.$Buttons.setStyles({height:50}),this},hideButtons:function(){return this.$Buttons?void this.$Buttons.setStyle("display","none"):this},showButtons:function(){return this.$Buttons?void this.$Buttons.setStyle("display",""):this},getButton:function(i){for(var n=this.$Buttons.getElements("[data-quiid]"),s=0,o=n.length;o>s;s++)if(e=t.Controls.getById(n[s].get("data-quiid")),e&&e.getAttribute("name")==i)return e;return!1},openSheet:function(t){var e=new Element("div",{"class":"qui-window-popup-sheet box",html:'<div class="qui-window-popup-sheet-content box"></div><div class="qui-window-popup-sheet-buttons box"><div class="back button btn-white"><span>'+s.get("qui/controls/windows/Popup","btn.back")+"</span></div></div>",styles:{left:"-110%"}}).inject(this.$Elm);e.getElement(".back").addEvent("click",function(){e.fireEvent("close")}),e.addEvent("close",function(){moofx(e).animate({left:"-100%"},{callback:function(){e.destroy()}})});var i=e.getElement(".qui-window-popup-sheet-content");i.setStyles({height:e.getSize().y-80}),moofx(e).animate({left:0},{callback:function(){t(i,e)}})}})}),define("qui/lib/require-css/css!qui/controls/windows/Confirm",[],function(){}),define("qui/controls/windows/Confirm",["qui/controls/windows/Popup","qui/controls/buttons/Button","qui/utils/Controls","css!qui/controls/windows/Confirm.css"],function(t,e,i){"use strict";return new Class({Extends:t,Type:"qui/controls/windows/Confirm",Binds:["$onOpen"],options:{maxHeight:300,autoclose:!0,information:!1,title:"...",texticon:"icon-remove fa fa-remove",icon:"icon-remove fa fa-remove",cancel_button:{text:"Cancel",textimage:"icon-remove fa fa-remove"},ok_button:{text:"OK",textimage:"icon-ok  fa fa-check"}},initialize:function(t){var e=this;this.parent(t),this.getAttribute("name")===!1&&this.setAttribute("name","win"+(new Date).getMilliseconds()),this.getAttribute("width")===!1&&this.setAttribute("width",500),this.getAttribute("height")===!1&&this.setAttribute("height",240),this.addEvent("onSetAttribute",function(t,n){if(e.$Body.getElement(".textbody")){if("texticon"==t){var s=e.$Body.getElement(".texticon"),o=e.$Body.getElement(".textbody");return s||(s=new Element("div.texticon"),s.inject(o,"before")),o.set({styles:{width:null,fontSize:null},src:null}),s.className="texticon",void(i.isFontAwesomeClass(n)?(s.addClass(n),s.setStyles({fontSize:50})):s.src=n)}return"information"==t?void e.$Body.getElement(".information").set("html",n):void("text"==t&&e.$Body.getElement(".text").set("html",n))}}),this.$Body=null,this.$Win=null,this.$Buttons=null},open:function(){this.create();var t=this,i=this.getContent();i.setStyles({padding:20}),this.$Body=new Element("div.submit-body",{html:'<div class="textbody"><h2 class="text">&nbsp;</h2><div class="information">&nbsp;</div></div>',styles:{"float":"left",width:"100%"}}),this.$Body.inject(i),this.getAttribute("texticon")&&this.setAttribute("texticon",this.getAttribute("texticon")),this.getAttribute("text")&&this.setAttribute("text",this.getAttribute("text")),this.getAttribute("information")&&this.setAttribute("information",this.getAttribute("information")),this.getAttribute("texticon")||this.getAttribute("text")||this.getAttribute("information")||this.$Body.destroy(),this.$Buttons.set("html",""),this.addButton(new e({name:"cancel",text:this.getAttribute("cancel_button").text,textimage:this.getAttribute("cancel_button").textimage,styles:{"float":"none"},events:{onClick:this.cancel}})),this.addButton(new e({name:"submit",text:this.getAttribute("ok_button").text,textimage:this.getAttribute("ok_button").textimage,styles:{"float":"none"},events:{onClick:function(){t.submit()}}})),this.parent()},submit:function(){this.fireEvent("submit",[this]),this.getAttribute("autoclose")&&this.close()}})}),define("qui/lib/require-css/css!qui/controls/input/Params",[],function(){}),define("qui/controls/input/Params",["qui/QUI","qui/controls/Control","qui/controls/buttons/Button","qui/controls/windows/Confirm","css!qui/controls/input/Params.css"],function(t,e,i,n){"use strict";return new Class({Extends:e,Type:"qui/controls/input/Params",Binds:["$setValue","openAddParamWindow"],options:{name:"",styles:!1,allowedParams:!1,allowDuplicate:!1,windowMaxHeight:360,windowMaxWidth:540},initialize:function(t,e){this.parent(e),this.$Input=t||null,this.$ParamList=null,this.$AddButton=null,this.$Input&&this.create()},bindElement:function(t){var e=this;return this.$Input=t,this.$Input.type="hidden",this.$Input.addEvent("change",function(){e.$setValue(this.value)}),this},create:function(){var t=this;return this.$Elm=new Element("div",{"class":"qui-control-input-param box"}),this.$ParamList=new Element("div",{"class":"qui-control-input-param-list box"}),this.$AddButton=new i({textimage:"icon-plus fa fa-plus",text:"Parameter hinzufügen",events:{onClick:this.openAddParamWindow},styles:{clear:"both",margin:0,width:230}}),this.$Input?this.$Elm.wraps(this.$Input):(this.$Input=new Element("input",{name:this.getAttribute("name")}),this.$Elm.inject(this.$Elm)),this.$Input.type="hidden",this.$Input.addEvent("change",function(){t.$setValue(this.value)}),this.getAttribute("styles")&&this.$ParamList.setStyles(this.getAttribute("styles")),this.$AddButton.inject(this.$Elm),this.$ParamList.inject(this.$Elm),this.$setValue(this.$Input.value),this.$Elm},$setValue:function(t){var e,i,n=JSON.decode(t);for("array"!=typeOf(n)&&(n=[]),e=0,i=n.length;i>e;e++)"undefined"!=typeof n[e].name&&"undefined"!=typeof n[e].value&&this.addParam(n[e].name,n[e].value)},getValue:function(){var t,e,i,n=this.$ParamList.getElements(".qui-control-input-param-entry"),s=[];for(t=0,e=n.length;e>t;t++)i=n[t],s.push({name:i.get("data-name"),value:i.get("data-value")});return s},addParam:function(t,e){var n=this,s=new Element("div",{"class":"qui-control-input-param-entry box",html:t+" : "+e,"data-name":t,"data-value":e,events:{dblclick:function(){n.openAddParamWindow(this)}}}).inject(this.$ParamList);return new i({icon:"icon-remove fa fa-remove",styles:{"float":"right",lineHeight:20,margin:0},events:{onClick:function(){s.destroy()}}}).inject(s),this},openAddParamWindow:function(e){var i=this;new n({title:"Parameter hinzufügen",icon:"icon-plus fa fa-plus",maxHeight:this.getAttribute("windowMaxHeight"),maxWidth:this.getAttribute("windowMaxWidth"),autoclose:!1,text:"Geben Sie bitte den Namen und den Wert des Parameters ein.",information:'<div class="qui-control-input-param-window"><label>     <span class="qui-control-input-param-window-label">Name</span>     <input type="text" name="paramName" value="" /></label><label>     <span class="qui-control-input-param-window-label">Wert</span>     <input type="text" name="paramValue" value="" /></label></div>',events:{onCreate:function(t){t.getElm().addClass("qui-control-input-param-window")},onOpen:function(t){var n=t.getContent(),s=n.getElement('[name="paramName"]'),o=n.getElement('[name="paramValue"]'),r=i.getAttribute("allowedParams");if(r.length){for(var u=new Element("select",{name:"paramName"}).replaces(s),l=0,a=r.length;a>l;l++)new Element("option",{value:r[l],html:r[l]}).inject(u);s=u}n.getElements("input,select").addEvents({keyup:function(e){"enter"===e.key&&t.submit()}}),"element"===typeOf(e)&&(s.value=e.get("data-name"),o.value=e.get("data-value")),function(){s.focus()}.delay(800)},onSubmit:function(n){var s=n.getContent(),o=s.getElement('[name="paramName"]'),r=s.getElement('[name="paramValue"]');if(""===o.value)return void o.focus();if(""===r.value)return void r.focus();if(!i.getAttribute("allowDuplicate")){var u=i.$ParamList.getElements('[data-name="'+o.value+'"]');if(u.length)return void t.getMessageHandler(function(t){o.focus(),t.addError("Doppelte Parameter sind nicht erlaubt",o)})}"element"===typeOf(e)?(e.set("data-name",o.value),e.set("data-value",r.value),e.set("html",o.value+" : "+r.value)):i.addParam(o.value,r.value),n.close()}}}).open()}})});
//# sourceMappingURL=Params.js.map