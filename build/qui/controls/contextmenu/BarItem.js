define("qui/controls/contextmenu/BarItem",["qui/controls/Control","qui/controls/contextmenu/Menu","qui/controls/contextmenu/Item","qui/controls/contextmenu/Seperator","css!qui/controls/contextmenu/BarItem.css"],function(Control,ContextMenu,ContextMenuItem,ContextMenuSeperator){"use strict";return new Class({Extends:Control,Type:"qui/controls/contextmenu/BarItem",Binds:["$onSetAttribute","$onClick","$onMouseEnter","$onMouseLeave","blur","focus","appendChild"],options:{text:"",icon:"",styles:null,dragable:false},initialize:function(options){var items=options.items||[];delete options.items;this.parent(options);this.$Elm=null;this.$Menu=null;this.addEvents({onSetAttribute:this.$onSetAttribute});if(items.length){this.insert(items)}},create:function(){var i,len;this.$Elm=new Element("div",{"class":"qui-contextmenu-baritem smooth",html:'<span class="qui-contextmenu-baritem-text radius10 smooth"></span>',"data-quiid":this.getId(),tabindex:-1,styles:{outline:0},events:{click:this.$onClick,blur:function(){this.blur();return true}.bind(this),focus:function(event){this.focus();return true}.bind(this),mouseenter:this.$onMouseEnter,mouseleave:this.$onMouseLeave,mousedown:function(event){event.stop()},mouseup:function(event){event.stop()}}});if(this.getAttribute("icon")&&this.getAttribute("icon")!==""){this.$Elm.setStyle("background-image","url("+this.getAttribute("icon")+")")}if(this.getAttribute("text")&&this.getAttribute("text")!==""){this.$Elm.getElement(".qui-contextmenu-baritem-text").set("html",this.getAttribute("text"))}if(this.$Menu){this.$Menu.inject(this.$Elm)}return this.$Elm},focus:function(){this.$Elm.focus();this.fireEvent("focus",[this]);this.show();this.setActive();return this},blur:function(){this.fireEvent("blur",[this]);this.hide();this.setNormal();return this},insert:function(list){for(var i=0,len=list.length;i<len;i++){if(this.getAttribute("dragable")){list[i].dragable=true}if(list[i].type=="Controls_Contextmenu_Seperator"){this.appendChild(new ContextMenuSeperator(list[i]));continue}this.appendChild(new ContextMenuItem(list[i]))}return this},show:function(){if(this.isActive()){return this}if(this.getContextMenu().count()){if(this.getContextMenu().$Active){this.getContextMenu().$Active.setNormal()}this.getContextMenu().show();this.getElm().addClass("bar-menu")}return this},hide:function(){this.getElm().removeClass("bar-menu");this.getContextMenu().hide()},appendChild:function(Child){if(this.getAttribute("dragable")){Child.setAttribute("dragable",true)}this.getContextMenu().appendChild(Child);Child.setParent(this);return this},getChildren:function(name){if(typeof name!=="undefined"){return this.getContextMenu().getChildren(name)}return this.getContextMenu().getChildren()},clear:function(){this.getContextMenu().clear();return this},getContextMenu:function(){if(!this.$Menu){this.$Menu=new ContextMenu({name:this.getAttribute("name")+"-menu",shadow:false,events:{onShow:function(Menu){var children=Menu.getChildren();for(var i=0,len=children.length;i<len;i++){children[i].setNormal()}}}})}if(this.$Elm){this.$Menu.inject(this.$Elm);this.$Menu.hide();this.$Menu.setPosition(0,this.$Elm.getSize().y)}if(this.getAttribute("dragable")){this.$Menu.setAttribute("dragable",true)}return this.$Menu},setActive:function(){if(this.isActive()){return this}this.fireEvent("active",[this]);this.$Elm.addClass("qui-contextmenu-baritem-active");return this},isActive:function(){if(this.$Elm&&this.$Elm.hasClass(".qui-contextmenu-baritem-active")){return true}return false},setNormal:function(){this.$Elm.removeClass("qui-contextmenu-baritem-active");this.fireEvent("normal",[this]);return this},$onSetAttribute:function(key,value){if(!this.$Elm){return}if(key=="text"){this.$Elm.getElement(".qui-contextmenu-baritem-text").set("html",value);return}if(key=="icon"){this.$Elm.setStyle("background-image","url("+value+")");return}},$onClick:function(event){this.fireEvent("click",[this,event]);this.focus()},$onMouseEnter:function(){this.fireEvent("mouseEnter",[this])},$onMouseLeave:function(){this.fireEvent("mouseLeave",[this])}});return QUI.controls.contextmenu.BarItem});
//# sourceMappingURL=/var/www/git/quiqqer/qui/build/qui/controls/contextmenu/BarItem.map.js