define("qui/controls/buttons/Button",["qui/controls/Control","qui/utils/Controls","qui/utils/NoSelect","css!qui/controls/buttons/Button.css"],function(Control,Utils,NoSelect){"use strict";return new Class({Extends:Control,Type:"qui/controls/buttons/Button",Binds:["onSetAttribute"],options:{type:"button",image:false,icon:false,style:{},textimage:false,text:false,title:false,"class":false},params:{},initialize:function(options){this.parent(options);this.$Menu=null;this.$Drop=null;this.$items=[];if(options.events){delete options.events}this.setAttributes(this.initV2(options));this.addEvent("onSetAttribute",this.onSetAttribute);this.addEvent("onDestroy",function(){if(this.$Menu){this.$Menu.destroy()}}.bind(this))},initV2:function(options){if(options.onclick){if(typeOf(options.onclick)==="string"){options.onclick=function(p){eval(p+"(this);")}.bind(this,[options.onclick])}this.addEvent("onClick",options.onclick);delete options.onclick}if(options.oncreate){this.addEvent("onCreate",options.oncreate);delete options.oncreate}return options},create:function(){var i,len;var self=this;var Elm=new Element("button.qui-button",{type:this.getAttribute("type"),"data-status":0,"data-quiid":this.getId()});if(this.getAttribute("width")){Elm.setStyle("width",this.getAttribute("width"))}if(this.getAttribute("height")){Elm.setStyle("height",this.getAttribute("height"))}if(this.getAttribute("styles")){Elm.setStyles(this.getAttribute("styles"))}if(this.getAttribute("class")){Elm.addClass(this.getAttribute("class"))}Elm.style.outline=0;Elm.setAttribute("tabindex","-1");Elm.addEvents({click:function(event){if(self.isDisabled()){return}self.onclick(event)},mouseenter:function(){if(self.isDisabled()){return}if(!self.isActive()){self.getElm().addClass("qui-button-over")}self.fireEvent("enter",[self])},mouseleave:function(){if(self.isDisabled()){return}if(!self.isActive()){self.getElm().removeClass("qui-button-over")}self.fireEvent("leave",[self])},mousedown:function(event){if(self.isDisabled()){return}self.fireEvent("mousedown",[self,event])},mouseup:function(event){if(self.isDisabled()){return}self.fireEvent("mouseup",[self,event])},blur:function(event){self.fireEvent("blur",[self,event])},focus:function(event){self.fireEvent("focus",[self,event])}});this.$Elm=Elm;if(this.getAttribute("icon")){this.setAttribute("icon",this.getAttribute("icon"))}if(!this.getAttribute("icon")&&this.getAttribute("image")){this.setAttribute("icon",this.getAttribute("image"))}if(this.getAttribute("styles")){this.setAttribute("styles",this.getAttribute("styles"))}if(this.getAttribute("textimage")){this.setAttribute("textimage",this.getAttribute("textimage"))}if(this.getAttribute("text")){this.setAttribute("text",this.getAttribute("text"))}if(this.getAttribute("title")){this.$Elm.setAttribute("title",this.getAttribute("title"))}if(this.getAttribute("disabled")){this.setDisable()}len=this.$items.length;if(len){var Menu=this.getContextMenu();for(i=0;i<len;i++){Menu.appendChild(this.$items[i])}this.$Drop=new Element("div.qui-button-drop").inject(this.$Elm)}this.fireEvent("create",[this]);NoSelect.disable(Elm);return this.$Elm},click:function(event){if(this.isDisabled()){return}this.fireEvent("click",[this,event])},onclick:function(event){this.click(event)},setActive:function(){if(this.isDisabled()){return}var Elm=this.getElm();if(!Elm){return}Elm.addClass("qui-button-active");Elm.set("data-status",1);this.fireEvent("active",[this])},isActive:function(){if(!this.getElm()){return false}if(this.getElm().get("data-status")==1){return true}return false},disable:function(){var Elm=this.getElm();if(!Elm){return}Elm.set({"data-status":-1,disabled:"disabled"});this.fireEvent("disable",[this]);return this},setDisable:function(){return this.disable()},isDisabled:function(){if(!this.getElm()){return false}if(this.getElm().get("data-status")==-1){return true}return false},enable:function(){if(!this.getElm()){return false}this.getElm().set({"data-status":0,disabled:null});this.setNormal();return this},setEnable:function(){return this.enable()},setNormal:function(){if(this.isDisabled()){return}if(!this.getElm()){return false}var Elm=this.getElm();Elm.set({"data-status":0,disabled:null});Elm.removeClass("qui-button-active");this.fireEvent("normal",[this]);return this},appendChild:function(Itm){this.$items.push(Itm);Itm.setAttribute("Button",this);if(!this.$Elm){return this}var self=this;this.getContextMenu(function(Menu){Menu.appendChild(Itm);if(!self.$Drop){self.$Drop=new Element("div.qui-button-drop").inject(self.$Elm)}});return this},getChildren:function(){return this.$items},clear:function(){this.getContextMenu().clearChildren();this.$items=[];return this},getContextMenu:function(callback){if(this.$Menu&&typeof this.$createContextMenu==="undefined"){callback(this.$Menu);return this}var self=this;if(typeof this.$createContextMenu!=="undefined"){!function(){self.getContextMenu(callback)}.delay(10);return this}this.$createContextMenu=true;require(["qui/controls/contextmenu/Menu"],function(Menu){self.$Menu=new Menu({name:self.getAttribute("name")+"-menu"});self.$Menu.inject(document.body);self.addEvents({onClick:function(){if(self.isDisabled()){return}var pos=self.$Elm.getPosition(),size=self.$Elm.getSize();self.$Menu.setPosition(pos.x,pos.y+size.y);self.$Menu.show();self.$Elm.focus()},onBlur:function(){self.$Menu.hide()}});self.$Menu.setParent(self);delete self.$createContextMenu;callback(self.$Menu)})},onSetAttribute:function(k,value){var Elm=this.getElm();if(!Elm){return}if(k==="onclick"){this.removeEvents("click");this.addEvent("click",function(p){eval(p+"(this);")}.bind(this,[value]));return}if(k=="image"){k="icon"}if(k==="icon"){if(!Elm.getElement(".image-container")){new Element("div.image-container",{align:"center"}).inject(Elm)}var Image=Elm.getElement(".image-container");Image.set("html","");if(Utils.isFontAwesomeClass(value)){new Element("span",{"class":value}).inject(Image)}else{new Element("img.qui-button-image",{src:value,styles:{display:"block"}}).inject(Image)}return}if(k==="styles"){Elm.setStyles(value);return}if(k==="title"){Elm.setAttribute("title",value);return}if(k!=="textimage"&&k!=="text"){return}if(!Elm.getElement(".qui-button-text")){new Element("span.qui-button-text").inject(Elm)}var Txt=Elm.getElement(".qui-button-text");if(k==="text"){Txt.set("html",value)}if(k==="textimage"){var Img;if(Elm.getElement(".qui-button-text-image")){Elm.getElement(".qui-button-text-image").destroy()}if(Utils.isFontAwesomeClass(value)){Img=new Element("span",{"class":"qui-button-text-image "+value,styles:{"margin-right":0}}).inject(Txt,"before")}else{Img=new Element("img",{"class":"qui-button-text-image",src:value,styles:{"margin-right":0}}).inject(Txt,"before")}if(this.getAttribute("text")){Img.setStyle("margin-right",null)}}}})});
//# sourceMappingURL=/var/www/git/quiqqer/qui/build/qui/controls/buttons/Button.map.js