define("qui/controls/buttons/Select",["qui/controls/Control","qui/utils/Controls","qui/controls/contextmenu/Menu","qui/controls/contextmenu/Item","css!qui/controls/buttons/Select.css"],function(Control,Utils,QUIMenu,QUIMenuItem){"use strict";return new Class({Extends:Control,Type:"qui/controls/buttons/Select",Binds:["open","set","$set","$onDestroy","$onBlur","$onKeyUp"],options:{name:"select-box",style:{},"class":false},params:{},initialize:function(options){this.parent(options);this.$Menu=new QUIMenu;this.$Elm=null;this.$value=null;this.$disabled=false;this.addEvent("onDestroy",this.$onDestroy)},create:function(){var self=this;this.$Elm=new Element("div.qui-select",{html:'<div class="icon"></div>'+'<div class="text"></div>'+'<div class="drop-icon"></div>',tabindex:-1,styles:{outline:0,cursor:"pointer"},"data-quiid":this.getId()});if(this.getAttribute("styles")){this.$Elm.setStyles(this.getAttribute("styles"))}if(this.getAttribute("class")){this.$Elm.addClass(this.getAttribute("class"))}this.$Elm.addEvents({focus:this.open,blur:this.$onBlur,keyup:this.$onKeyUp});this.$Menu.inject(document.body);this.$Menu.hide();this.$Menu.getElm().addClass("qui-dropdown");this.$Menu.getElm().addEvent("mouseleave",function(){var Option=self.$Menu.getChildren(self.getAttribute("name")+self.getValue());if(Option){Option.setActive()}});if(this.$Elm.getStyle("width")){var width=this.$Elm.getStyle("width").toInt();this.$Elm.getElement(".text").setStyles({width:width-50,overflow:"hidden"})}return this.$Elm},setValue:function(value){var i,len;var children=this.$Menu.getChildren();for(i=0,len=children.length;i<len;i++){if(children[i].getAttribute("value")==value){this.$set(children[i]);return this}}return this},getValue:function(){return this.$value},appendChild:function(text,value,icon){this.$Menu.appendChild(new QUIMenuItem({name:this.getAttribute("name")+value,text:text,value:value,icon:icon||false,events:{onMouseDown:this.$set}}));return this},firstChild:function(){if(!this.$Menu){return false}return this.$Menu.firstChild()},clear:function(){this.$value="";this.$Menu.clearChildren();if(this.$Elm.getElement(".text")){this.$Elm.getElement(".text").set("html","")}if(this.$Elm.getElement(".icon")){this.$Elm.getElement(".icon").setStyle("background",null)}},open:function(){if(this.isDisabled()){return this}if(document.activeElement!=this.getElm()){!function(){this.getElm().focus()}.delay(100,this);return this}var pos=this.$Elm.getPosition(),size=this.$Elm.getSize();this.getElm().addClass("qui-select-open");this.$Menu.setPosition(pos.x+2,pos.y+size.y);this.$Menu.show();var Option=this.$Menu.getChildren(this.getAttribute("name")+this.getValue());if(Option){Option.setActive()}return this},close:function(){document.body.focus();this.$onBlur()},disable:function(){this.$disabled=true;this.getElm().addClass("qui-select-disable");this.$Menu.hide()},isDisabled:function(){return this.$disabled},enable:function(){this.$disabled=false;this.getElm().removeClass("qui-select-disable")},$set:function(Item){this.$value=Item.getAttribute("value");if(this.$Elm.getElement(".text")){this.$Elm.getElement(".text").set("html",Item.getAttribute("text"))}if(Item.getAttribute("icon")&&this.$Elm.getElement(".icon")){var value=Item.getAttribute("icon"),Icon=this.$Elm.getElement(".icon");Icon.className="";Icon.addClass("icon");Icon.setStyle("background",null);if(Utils.isFontAwesomeClass(value)){Icon.addClass(value)}else{Icon.setStyle("background","url("+value+") center center no-repeat")}}this.fireEvent("change",[this.$value,this])},$onDestroy:function(){this.$Menu.destroy()},$onBlur:function(){this.$Menu.hide();this.getElm().removeClass("qui-select-open")},$onKeyUp:function(event){if(typeof event==="undefined"){return}if(event.key!=="down"&&event.key!=="up"&&event.key!=="enter"){return}this.$Menu.show();if(event.key==="down"){this.$Menu.down();return}if(event.key==="up"){this.$Menu.up();return}if(event.key==="enter"){this.$Menu.select();return}}})});
//# sourceMappingURL=/var/www/git/quiqqer/qui/build/qui/controls/buttons/Select.map.js