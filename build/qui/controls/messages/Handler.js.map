{"version":3,"file":"Handler.js","sources":["../../classes/DOM.js","../../classes/Controls.js","../../classes/QUI.js","../../QUI.js","../../classes/Locale.js","../../Locale.js","../../lib/require-css/normalize.js","../../lib/require-css/css.js","../Control.js","Favico.js","../../classes/storage/Storage.js","Handler.js"],"names":[],"mappings":"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","sourcesContent":["\n/**\n * The DOM class emulate similar methods\n * like a DOMNode to a normal Object\n *\n * Its easy to use and most classes inherit from {qui/classes/DOM}\n * All objects that inherited from {qui/classes/DOM} can easily extend with Attributes.\n *\n * @module qui/classes/DOM\n * @author www.quiqqer.com (Henning Leutz)\n *\n * @event onDestroy [this]\n * @event onSetAttribute [key, value]\n */\n\ndefine('qui/classes/DOM',[],function()\n{\n    \"use strict\";\n\n    window.$quistorage = {};\n\n    /**\n     * The DOM class emulate similar methods\n     * like a DOMNode to a normal Object\n     *\n     * @class qui/classes/DOM\n     *\n     * @param {Object} options -\n     *         With options you can set attributes or extend the Object width methods and events\n     *\n     * @memberof! <global>\n     */\n    return new Class({\n\n        Implements : [ Options, Events ],\n        Type       : 'qui/classes/DOM',\n\n        options : {},\n        $uid    : null,\n\n        initialize : function(options)\n        {\n            options = options || {};\n\n            if ( options.events )\n            {\n                this.addEvents( options.events );\n                delete options.events;\n            }\n\n            if ( options.methods )\n            {\n                Object.append( this, options.methods );\n                delete options.methods;\n            }\n\n            this.setAttributes( options );\n            this.fireEvent( 'init', [ this ] );\n        },\n\n        /**\n         * If this.TYPE is set, this.Type will be return\n         *\n         * @method qui/classes/DOM#$family\n         * @return {String} Type of the Object\n         * @ignore\n         */\n        $family : function()\n        {\n            if ( typeof this.Type !== 'undefined' ) {\n                return this.Type;\n            }\n\n            return typeOf( this );\n        },\n\n        /**\n         * Get the Unique ID from the Object\n         *\n         * @method qui/classes/DOM#getId\n         * @return {String} Object ID\n         */\n        getId : function()\n        {\n            if ( !this.$uid ) {\n                this.$uid = String.uniqueID();\n            }\n\n            return this.$uid;\n        },\n\n        /**\n         * Get the type from the Object\n         *\n         * @method qui/classes/DOM#getType\n         * @return {String} The type of the object\n         */\n        getType : function()\n        {\n            return typeOf( this );\n        },\n\n        /**\n         * Set an attribute to the Object\n         * You can extend the Object with everything you like\n         * You can extend the Object width more than the default options\n         *\n         * @method qui/classes/DOM#setAttribute\n         *\n         * @param {String} k - Name of the Attribute\n         * @param {Object|String|Integer|Array} v - value\n         *\n         * @return {this} The wanted attribute\n         */\n        setAttribute : function(k, v)\n        {\n            this.fireEvent('setAttribute', [ k, v ]);\n\n            if ( typeof this.options[ k ] !== 'undefined' )\n            {\n                this.options[ k ] = v;\n                return;\n            }\n\n            var oid = Slick.uidOf( this );\n\n            if ( typeof window.$quistorage[ oid ] === 'undefined' ) {\n                window.$quistorage[ oid ] = {};\n            }\n\n            window.$quistorage[ oid ][ k ] = v;\n\n            return this;\n        },\n\n        /**\n         * Destroy the Object and all relationsships to some Object\n         *\n         * @method qui/classes/DOM#destroy\n         */\n        destroy : function()\n        {\n            this.fireEvent( 'destroy', [ this ] );\n\n            // storage clear\n            var oid = Slick.uidOf( this );\n\n            if ( oid in window.$quistorage ) {\n                delete window.$quistorage[ oid ];\n            }\n\n            this.removeEvents();\n        },\n\n        /**\n         * Alias for setAttributes, please use setAttributes()\n         *\n         * @see qui/classes/DOM#setAttributes()\n         * @method qui/classes/DOM#setOptions\n         */\n        setOptions : function(options)\n        {\n            this.setAttributes( options );\n        },\n\n        /**\n         * If you want set more than one attribute\n         *\n         * @method qui/classes/DOM#setAttributes\n         *\n         * @param {Object} attributes - Object with attributes\n         * @return {this} self\n         *\n         * @example Object.setAttributes({\n         *   attr1 : '1',\n         *   attr2 : []\n         * })\n         */\n        setAttributes : function(attributes)\n        {\n            attributes = attributes || {};\n\n            for ( var k in attributes ) {\n                this.setAttribute( k, attributes[k] );\n            }\n\n            return this;\n        },\n\n        /**\n         * Return an attribute of the Object\n         * returns the not the default attributes, too\n         *\n         * @method qui/classes/DOM#setAttribute\n         * @param {Object} attributes - Object width attributes\n         * @return {unknown_type|Bool} attribute\n         */\n        getAttribute : function(k)\n        {\n            if ( k in this.options ) {\n                return this.options[ k ];\n            }\n\n            var oid = Slick.uidOf( this );\n\n            if ( typeof window.$quistorage[ oid ] === 'undefined' ) {\n                return false;\n            }\n\n            if ( typeof window.$quistorage[ oid ][ k ] !== 'undefined' ) {\n                return window.$quistorage[ oid ][ k ];\n            }\n\n            return false;\n        },\n\n        /**\n         * Alias for getAttributes, please use getAttributes()\n         *\n         * @method qui/classes/DOM#getAllAttributes\n         * @see qui/classes/DOM#getAttributes()\n         * @depricated\n         */\n        getAllAttributes : function()\n        {\n            return this.getAttributes();\n        },\n\n        /**\n         * Return the default attributes\n         *\n         * @method qui/classes/DOM#getAttributes\n         * @return {Object} attributes\n         */\n        getAttributes : function()\n        {\n            return this.options;\n        },\n\n        /**\n         * Return the attributes which stored into the QUI Storage\n         *\n         * @return {Object}\n         */\n        getStorageAttributes : function()\n        {\n            var oid = Slick.uidOf( this );\n\n            if ( oid in window.$quistorage  ) {\n                return window.$quistorage[ oid ];\n            }\n\n            return {};\n        },\n\n        /**\n         * Return true if a attribute exist\n         *\n         * @method qui/classes/DOM#existAttribute\n         * @param {String} k - wanted attribute\n         * @return {Bool} true or false\n         */\n        existAttribute : function(k)\n        {\n            if ( typeof this.options[ k ] !== 'undefined' ) {\n                return true;\n            }\n\n            var oid = Slick.uidOf( this );\n\n            if ( window.$quistorage[ oid ] && window.$quistorage[ oid ][ k ] ) {\n                return true;\n            }\n\n            return false;\n        },\n\n        /**\n         * Return the binded functions of the event name\n         *\n         * @method qui/classes/DOM#existAttribute\n         * @param {String} eventname - wanted event\n         * @return {Array|false} Event list\n         */\n        getEvents : function(eventname)\n        {\n            if ( typeof this.$events === 'undefined') {\n                return false;\n            }\n\n            if ( typeof this.$events[ eventname ] !== 'undefined') {\n                return this.$events[ eventname ];\n            }\n\n            return false;\n        }\n    });\n});\n\n","\n/**\n * QUI control Manager\n *\n * @module qui/classes/Controls\n * @author www.pcsg.de (Henning Leutz)\n *\n * @require require\n * @require qui/classes/DOM\n */\n\ndefine('qui/classes/Controls',[\n\n    'require',\n    'qui/classes/DOM'\n\n], function(require, DOM)\n{\n    \"use strict\";\n\n    /**\n     * @class qui/classes/Controls\n     *\n     * @memberof! <global>\n     */\n    return new Class({\n\n        Extends : DOM,\n        Type    : 'qui/classes/Controls',\n\n        initialize : function()\n        {\n            this.$controls = {};\n            this.$cids     = {};\n            this.$types    = {};\n        },\n\n        /**\n         * Return all controls with tha name\n         *\n         * @method qui/classes/Controls#get\n         * @param {String} n - Name of the Control\n         * @return {Array} All Controls with the needle name\n         */\n        get : function(n)\n        {\n            if ( typeof this.$controls[ n ] === 'undefined' ) {\n                return [];\n            }\n\n            return this.$controls[ n ];\n        },\n\n        /**\n         * Get the Controls by its unique id\n         *\n         * @method qui/classes/Controls#getById\n         * @param {String|Integer} id - ID of the wanted Control\n         * @return {qui/controls/Control|false} a QUI control, based on qui/controls/Control or false\n         */\n        getById : function(id)\n        {\n            if ( id in this.$cids ) {\n                return this.$cids[ id ];\n            }\n\n            return false;\n        },\n\n        /**\n         * Return all controls from a type\n         *\n         * @method qui/classes/Controls#getByType\n         * @return {Array}\n         */\n        getByType : function(type)\n        {\n            if ( type in this.$types ) {\n                return this.$types[ type ];\n            }\n\n            return [];\n        },\n\n        /**\n         * Load a control by a control type\n         *\n         * @method qui/classes/Controls#loadType\n         * @param {String} type\n         * @param {Function} onload\n         *\n         * @example QUI.Controls.loadType('qui/controls/taskbar/Task', function(Modul) { })\n         */\n        loadType : function(type, onload)\n        {\n            if ( !type.match( /qui\\// ) ) {\n                type = 'qui/'+ type;\n            }\n\n            require( [ modul ] , onload );\n        },\n\n        /**\n         * Is the Object a QUI Control?\n         *\n         * @method qui/controls/Control#isControl\n         * @return {Bool} true or false\n         */\n        isControl : function(Obj)\n        {\n            if ( typeof Obj === 'undefined' || !Obj ) {\n                return false;\n            }\n\n            if ( typeof Obj.getType !== 'undefined' ) {\n                return true;\n            }\n\n            return false;\n        },\n\n        /**\n         * Add a Control to the list\n         *\n         * @method qui/controls/Control#add\n         * @param {qui/controls/Control} Control\n         */\n        add : function(Control)\n        {\n            var s = this,\n                n = Control.getAttribute( 'name' ),\n                t = typeOf( Control );\n\n            if ( !n || n === '' ) {\n                n = '#unknown';\n            }\n\n            if ( typeof this.$controls[ n ] === 'undefined' ) {\n                this.$controls[ n ] = [];\n            }\n\n            if ( typeof this.$types[ t ] === 'undefined' ) {\n                this.$types[ t ] = [];\n            }\n\n            this.$controls[ n ].push( Control );\n            this.$types[ t ].push( Control );\n\n            this.$cids[ Control.getId() ] = Control;\n\n            Control.addEvent('onDestroy', function() {\n                s.destroy( Control );\n            });\n        },\n\n        /**\n         * Destroy a Control\n         *\n         * @method qui/controls/Control#destroy\n         * @param {qui/controls/Control} Control\n         */\n        destroy : function(Control)\n        {\n            var n  = Control.getAttribute( 'name' ),\n                t  = typeOf( Control ),\n                id = Control.getId();\n\n            if ( !n || n === '' ) {\n                n = '#unknown';\n            }\n\n            if ( typeof this.$cids[ id ] !== 'undefined' ) {\n                delete this.$cids[ id ];\n            }\n\n            var i, len;\n            var tmp = [];\n\n            // refresh controls\n            if ( typeof this.$controls[ n ] !== 'undefined' )\n            {\n                for ( i = 0, len = this.$controls[ n ].length; i < len; i++ )\n                {\n                    if ( id !== this.$controls[ n ][ i ].getId() ) {\n                        tmp.push( this.$controls[ n ][ i ] );\n                    }\n                }\n\n                this.$controls[ n ] = tmp;\n\n                if ( !tmp.length ) {\n                    delete this.$controls[ n ];\n                }\n            }\n\n            // refresh types\n            tmp = [];\n\n            if ( typeof this.$types[ t ] !== 'undefined' )\n            {\n                for ( i = 0, len = this.$types[ t ].length; i < len; i++ )\n                {\n                    if ( id !== this.$types[ t ][ i ].getId() ) {\n                        tmp.push( this.$types[ t ][ i ] );\n                    }\n                }\n            }\n\n            this.$types[ t ] = tmp;\n        }\n    });\n});\n","\n/**\n * The Main Class for the Main QUI Object\n *\n * @module qui/classes/QUI\n * @author www.pcsg.de (Henning Leutz)\n *\n * @require require\n * @require qui/classes/DOM\n * @require qui/classes/Controls\n *\n * @event onError : if there is an error\n */\n\ndefine('qui/classes/QUI',[\n\n    'require',\n    'qui/classes/DOM',\n    'qui/classes/Controls'\n\n], function(require, DOM, Controls)\n{\n    \"use strict\";\n\n    /**\n     * The QUIQQER main object\n     *\n     * @class QUI\n     *\n     * @memberof! <global>\n     */\n    return new Class({\n\n        Extends : DOM,\n        Type    : 'qui/classes/QUI',\n\n        initialize : function(options)\n        {\n            /**\n             * defaults\n             */\n            this.setAttributes({\n                'debug'       : false,\n                'fetchErrors' : true\n            });\n\n            this.parent( options );\n\n            // error handling\n            if ( this.getAttribute('fetchErrors') )\n            {\n                require.onError = function(requireType, requireModules)\n                {\n                    self.trigger(\n                        'ERROR :'+ requireType +'\\n'+\n                        'Require :'+ requireModules\n                    );\n                };\n\n                window.onerror = this.trigger.bind( this );\n            }\n\n            this.Controls       = new Controls();\n            this.MessageHandler = null;\n        },\n\n        /**\n         * Creates Namespaces\n         * based on YAHOO code - nice solution!!\n         *\n         * @method qui/classes/QUI#namespace\n         * @example QUI.namespace('my.name.space'); -> QUI.my.name.space\n         * @depricated\n         */\n        namespace : function()\n        {\n            var tlen;\n\n            var a = arguments,\n                o = this,\n                i = 0,\n                j = 0,\n\n                len  = a.length,\n                tok  = null,\n                name = null;\n\n            // iterate on the arguments\n            for ( ; i < len; i = i + 1 )\n            {\n                tok  = a[ i ].split( \".\" );\n                tlen = tok.length;\n\n                // iterate on the object tokens\n                for ( j = 0; j < tlen; j = j + 1 )\n                {\n                    name = tok[j];\n                    o[ name ] = o[ name ] || {};\n                    o = o[ name ];\n                }\n            }\n\n            return o;\n        },\n\n        /**\n         * parse qui controls\n         *\n         * @param {DOMNode} Parent - [optional], if no parent given, document.body would be use\n         * @param {Function} callback - [optional]\n         */\n        parse : function(Parent, callback)\n        {\n            if ( typeof Parent === 'undefined' ) {\n                Parent = document.body;\n            }\n\n            // parse all qui controls\n            var nodes = Parent.getElements( '[data-qui]' ),\n                list  = nodes.map(function(Elm) {\n                    return Elm.get( 'data-qui' );\n                });\n\n            require(list, function()\n            {\n                var i, len, Cls, Elm;\n\n                for ( i = 0, len = list.length; i < len; i++ )\n                {\n                    Cls = arguments[ i ];\n                    Elm = nodes[ i ];\n\n                    // already initialized\n                    if ( Elm.get( 'data-quiid' ) ) {\n                        continue;\n                    }\n\n                    if ( Elm.get( 'html' ).trim() !== '' )\n                    {\n                        new Cls().import( Elm );\n                    } else\n                    {\n                        new Cls().replaces( Elm );\n                    }\n                }\n\n                if ( typeof callback !== 'undefined' ) {\n                    callback();\n                }\n            });\n        },\n\n        /**\n         * Fire the Error Event\n         *\n         * @method qui/classes/QUI#triggerError\n         *\n         * @param {qui/classes/messages/Message|Exception} Exception - Exception Objekt\n         * @param {Object} params    - Weitere Paramater (optional)\n         * @return {this} self\n         */\n        triggerError : function(Exception, params)\n        {\n            this.trigger( Exception.getMessage() );\n\n            return this;\n        },\n\n        /**\n         * trigger some messages to the console\n         *\n         * @method qui/classes/QUI#trigger\n         *\n         * @param {String} msg\n         * @param {String} url\n         * @param {Integer} linenumer\n         *\n         * @return {this} self\n         */\n        trigger : function(msg, url, linenumber)\n        {\n            var message = msg +\"\\n\"+\n                          \"File: \"+ url +\"\\n\"+\n                          \"Linenumber: \"+ linenumber;\n\n            this.fireEvent( 'error', [ msg, url, linenumber ] );\n\n            return this;\n        },\n\n        /**\n         * Return the message handler\n         *\n         * @method qui/classes/QUI#getMessageHandler\n         * @param {Function} callback\n         */\n        getMessageHandler : function(callback)\n        {\n            if ( typeof this.$execGetMessageHandler !== 'undefined' && !this.MessageHandler )\n            {\n                this.$execGetMessageHandler = true;\n\n                (function() {\n                    this.getMessageHandler( callback );\n                }).delay( 20, this );\n\n                return;\n            }\n\n            this.$execGetMessageHandler = true;\n\n\n            if ( this.MessageHandler )\n            {\n                callback( this.MessageHandler );\n                return;\n            }\n\n            var self = this;\n\n            require(['qui/controls/messages/Handler'], function(Handler)\n            {\n                self.MessageHandler = new Handler();\n\n                callback( self.MessageHandler );\n            });\n        },\n\n        /**\n         * Return the message handler\n         *\n         * @method qui/classes/QUI#getControls\n         * @param {Function} callback\n         */\n        getControls : function(callback)\n        {\n            if ( this.Controls )\n            {\n                callback( this.Controls );\n                return;\n            }\n        }\n    });\n});\n\n","\n/**\n * The Main QUI Object\n * create window.QUI\n *\n * @module qui/QUI\n * @author www.pcsg.de (Henning Leutz)\n */\n\ndefine('qui/QUI',['qui/classes/QUI'], function(QUIClass)\n{\n    \"use strict\";\n\n    if ( typeof window.QUI === 'undefined' ) {\n        window.QUI = new QUIClass();\n    }\n\n    document.fireEvent( 'qui-loaded' );\n\n    document.addEvent('domready', function() {\n        QUI.parse( document.body );\n    });\n\n    return window.QUI;\n});\n\n","\n/**\n * Locale translation class\n *\n * @module qui/classes/Locale\n * @author www.pcg.de (Henning Leutz)\n *\n * @require qui/classes/DOM\n *\n * @event onError [ {String}, {this} ] - triggered if no_translation === false and no translation exist\n */\n\ndefine('qui/classes/Locale',['qui/classes/DOM'], function(DOM)\n{\n    \"use strict\";\n\n    /**\n     * @class qui/classes/Locale\n     *\n     * @memberof! <global>\n     */\n    return new Class({\n\n        Extends : DOM,\n        Type    : 'qui/classes/Locale',\n\n        /**\n         * Current lang, use getCurrent() to get the lang\n         */\n        current : 'en',\n\n        /**\n         * Available langs\n         */\n        langs : {},\n\n        /**\n         * No translation flag, makes no translation\n         * if true, get() returns the translation group\n         * usefull to show all translation groups\n         */\n        no_translation : false,\n\n        /**\n         * init\n         *\n         * @param options - dom options\n         */\n        initialize : function(options)\n        {\n            this.parent( options );\n        },\n\n        /**\n         * Set the current lang\n         *\n         * @method qui/classes/Locale#setCurrent\n         * @param {String} lang\n         */\n        setCurrent : function(lang)\n        {\n            this.current = lang;\n        },\n\n        /**\n         * Return the current Lang\n         *\n         * @method qui/classes/Locale#getCurrent\n         * @return {String}\n         */\n        getCurrent : function()\n        {\n            return this.current;\n        },\n\n        /**\n         * Set a translation for a translation group\n         *\n         * @method qui/classes/Locale#set\n         *\n         * @param {String} lang - language, which is translated\n         * @param {String} group - group, which is translated\n         * @param {String|Object} values - variable(s) which is translated\n         * @param {String} value - the translation value\n         *\n         * @example Locale.set(\"en\", \"my/group\", \"my.translation.variable\", \"Some text is translated\")\n         * @example Locale.set(\"de\", \"my/group\", \"my.translation.variable\", \"Ein Text der übersetzt wird\")\n         */\n        set : function(lang, group, values, value)\n        {\n            if ( !this.langs[ lang ] ) {\n                this.langs[ lang ] = {};\n            }\n\n            if ( !this.langs[ lang ][ group ] ) {\n                this.langs[ lang ][ group ] = {};\n            }\n\n            if ( typeof value !== 'undefined' )\n            {\n                this.langs[ lang ][ set ][ values ] = value;\n                return this;\n            }\n\n            var _key = this.langs[ lang ][ group ];\n\n            for ( var k in values ) {\n                _key[ k ] = values[ k ];\n            }\n\n            this.langs[ lang ][ group ] = _key;\n        },\n\n        /**\n         * Retrurn the translation of a translation group\n         *\n         * @method qui/classes/Locale#get\n         *\n         * @param {String} group - Group of the translation\n         * @param {String} value - Translation value / name\n         * @param {Object} repl  - Assoziative Array of replacements\n         * @return {String}\n         *\n         * @example Locale.get('my/group', 'my.translation.variable')\n         * @example Locale.get('my/group', 'my.translation.variable', {\n         *      placeholder : 'my replace'\n         * })\n         */\n        get : function(group, value, repl)\n        {\n            if ( typeof repl === 'undefined' ) {\n                return this.$get( group, value );\n            }\n\n            var result = this.$get( group, value );\n\n            for ( group in repl ) {\n                result = result.replace( '['+ group +']', repl[ group ] );\n            }\n\n            return result;\n        },\n\n        /**\n         * Helper for get translation\n         *\n         * @method qui/classes/Locale#$get\n         *\n         * @param {String} key   - Group / Key of the translation\n         * @param {String} value - Translation value / name\n         * @param {Object} repl  - Assoziative Array of replacements\n         * @return {String}\n         */\n        $get : function(key, value)\n        {\n            if ( this.no_translation ) {\n                return '['+ key +'] '+ value;\n            }\n\n            if ( this.langs[ this.current ] &&\n                 this.langs[ this.current ][ key ] &&\n                 this.langs[ this.current ][ key ][ value ] )\n            {\n                return this.langs[ this.current ][ key ][ value ];\n            }\n\n            if ( this.langs[ this.current ] &&\n                 this.langs[ this.current ][ key ] &&\n                 typeof value === 'undefined' )\n            {\n                return this.langs[ this.current ][ key ];\n            }\n\n            this.fireEvent('error', [\n                 'No translation found for ['+ key +'] '+ value,\n                 this\n            ]);\n\n            return '['+ key +'] '+ value;\n        }\n    });\n});\n\n","\n/**\n * The QUI Locale Object\n *\n * @module qui/Locale\n * @author www.pcsg.de (Henning Leutz)\n *\n * @require qui/classes/Locale\n */\n\ndefine('qui/Locale',['qui/classes/Locale'], function(QUILocale)\n{\n    \"use strict\";\n\n    if ( typeof window.QUILocale === 'undefined' ) {\n        window.QUILocale = new QUILocale();\n    }\n\n    return window.QUILocale;\n});\n\n","//>>excludeStart('excludeRequireCss', pragmas.excludeRequireCss)\n/*\n * css.normalize.js\n *\n * CSS Normalization\n *\n * CSS paths are normalized based on an optional basePath and the RequireJS config\n *\n * Usage:\n *   normalize(css, fromBasePath, toBasePath);\n *\n * css: the stylesheet content to normalize\n * fromBasePath: the absolute base path of the css relative to any root (but without ../ backtracking)\n * toBasePath: the absolute new base path of the css relative to the same root\n * \n * Absolute dependencies are left untouched.\n *\n * Urls in the CSS are picked up by regular expressions.\n * These will catch all statements of the form:\n *\n * url(*)\n * url('*')\n * url(\"*\")\n * \n * @import '*'\n * @import \"*\"\n *\n * (and so also @import url(*) variations)\n *\n * For urls needing normalization\n *\n */\n\ndefine('qui/lib/require-css/normalize',[],function() {\n  \n  // regular expression for removing double slashes\n  // eg http://www.example.com//my///url/here -> http://www.example.com/my/url/here\n  var slashes = /([^:])\\/+/g\n  var removeDoubleSlashes = function(uri) {\n    return uri.replace(slashes, '$1/');\n  }\n\n  // given a relative URI, and two absolute base URIs, convert it from one base to another\n  var protocolRegEx = /[^\\:\\/]*:\\/\\/([^\\/])*/;\n  var absUrlRegEx = /^(\\/|data:)/;\n  function convertURIBase(uri, fromBase, toBase) {\n    if (uri.match(absUrlRegEx) || uri.match(protocolRegEx))\n      return uri;\n    uri = removeDoubleSlashes(uri);\n    // if toBase specifies a protocol path, ensure this is the same protocol as fromBase, if not\n    // use absolute path at fromBase\n    var toBaseProtocol = toBase.match(protocolRegEx);\n    var fromBaseProtocol = fromBase.match(protocolRegEx);\n    if (fromBaseProtocol && (!toBaseProtocol || toBaseProtocol[1] != fromBaseProtocol[1] || toBaseProtocol[2] != fromBaseProtocol[2]))\n      return absoluteURI(uri, fromBase);\n    \n    else {\n      return relativeURI(absoluteURI(uri, fromBase), toBase);\n    }\n  };\n  \n  // given a relative URI, calculate the absolute URI\n  function absoluteURI(uri, base) {\n    if (uri.substr(0, 2) == './')\n      uri = uri.substr(2);\n\n    // absolute urls are left in tact\n    if (uri.match(absUrlRegEx) || uri.match(protocolRegEx))\n      return uri;\n    \n    var baseParts = base.split('/');\n    var uriParts = uri.split('/');\n    \n    baseParts.pop();\n    \n    while (curPart = uriParts.shift())\n      if (curPart == '..')\n        baseParts.pop();\n      else\n        baseParts.push(curPart);\n    \n    return baseParts.join('/');\n  };\n\n\n  // given an absolute URI, calculate the relative URI\n  function relativeURI(uri, base) {\n    \n    // reduce base and uri strings to just their difference string\n    var baseParts = base.split('/');\n    baseParts.pop();\n    base = baseParts.join('/') + '/';\n    i = 0;\n    while (base.substr(i, 1) == uri.substr(i, 1))\n      i++;\n    while (base.substr(i, 1) != '/')\n      i--;\n    base = base.substr(i + 1);\n    uri = uri.substr(i + 1);\n\n    // each base folder difference is thus a backtrack\n    baseParts = base.split('/');\n    var uriParts = uri.split('/');\n    out = '';\n    while (baseParts.shift())\n      out += '../';\n    \n    // finally add uri parts\n    while (curPart = uriParts.shift())\n      out += curPart + '/';\n    \n    return out.substr(0, out.length - 1);\n  };\n  \n  var normalizeCSS = function(source, fromBase, toBase) {\n\n    fromBase = removeDoubleSlashes(fromBase);\n    toBase = removeDoubleSlashes(toBase);\n\n    var urlRegEx = /@import\\s*(\"([^\"]*)\"|'([^']*)')|url\\s*\\(\\s*(\\s*\"([^\"]*)\"|'([^']*)'|[^\\)]*\\s*)\\s*\\)/ig;\n    var result, url, source;\n\n    while (result = urlRegEx.exec(source)) {\n      url = result[3] || result[2] || result[5] || result[6] || result[4];\n      var newUrl;\n      newUrl = convertURIBase(url, fromBase, toBase);\n      var quoteLen = result[5] || result[6] ? 1 : 0;\n      source = source.substr(0, urlRegEx.lastIndex - url.length - quoteLen - 1) + newUrl + source.substr(urlRegEx.lastIndex - quoteLen - 1);\n      urlRegEx.lastIndex = urlRegEx.lastIndex + (newUrl.length - url.length);\n    }\n    \n    return source;\n  };\n  \n  normalizeCSS.convertURIBase = convertURIBase;\n  normalizeCSS.absoluteURI = absoluteURI;\n  normalizeCSS.relativeURI = relativeURI;\n  \n  return normalizeCSS;\n});\n//>>excludeEnd('excludeRequireCss')\n;\n","/*\n * Require-CSS RequireJS css! loader plugin\n * 0.1.2\n * Guy Bedford 2013\n * MIT\n */\n\n/*\n *\n * Usage:\n *  require(['css!./mycssFile']);\n *\n * Tested and working in (up to latest versions as of March 2013):\n * Android\n * iOS 6\n * IE 6 - 10\n * Chome 3 - 26\n * Firefox 3.5 - 19\n * Opera 10 - 12\n * \n * browserling.com used for virtual testing environment\n *\n * Credit to B Cavalier & J Hann for the IE 6 - 9 method,\n * refined with help from Martin Cermak\n * \n * Sources that helped along the way:\n * - https://developer.mozilla.org/en-US/docs/Browser_detection_using_the_user_agent\n * - http://www.phpied.com/when-is-a-stylesheet-really-loaded/\n * - https://github.com/cujojs/curl/blob/master/src/curl/plugin/css.js\n *\n */\n\ndefine('qui/lib/require-css/css',[],function() {\n//>>excludeStart('excludeRequireCss', pragmas.excludeRequireCss)\n  if (typeof window == 'undefined')\n    return { load: function(n, r, load){ load() } };\n\n  var head = document.getElementsByTagName('head')[0];\n\n  var engine = window.navigator.userAgent.match(/Trident\\/([^ ;]*)|AppleWebKit\\/([^ ;]*)|Opera\\/([^ ;]*)|rv\\:([^ ;]*)(.*?)Gecko\\/([^ ;]*)|MSIE\\s([^ ;]*)/) || 0;\n\n  // use <style> @import load method (IE < 9, Firefox < 18)\n  var useImportLoad = false;\n  \n  // set to false for explicit <link> load checking when onload doesn't work perfectly (webkit)\n  var useOnload = true;\n\n  // trident / msie\n  if (engine[1] || engine[7])\n    useImportLoad = parseInt(engine[1]) < 6 || parseInt(engine[7]) <= 9;\n  // webkit\n  else if (engine[2])\n    useOnload = false;\n  // gecko\n  else if (engine[4])\n    useImportLoad = parseInt(engine[4]) < 18;\n  \n//>>excludeEnd('excludeRequireCss')\n  //main api object\n  var cssAPI = {};\n\n//>>excludeStart('excludeRequireCss', pragmas.excludeRequireCss)\n  cssAPI.pluginBuilder = './css-builder';\n\n  // <style> @import load method\n  var curStyle, curSheet;\n  var createStyle = function () {\n    curStyle = document.createElement('style');\n    head.appendChild(curStyle);\n    curSheet = curStyle.styleSheet || curStyle.sheet;\n  }\n  var ieCnt = 0;\n  var ieLoads = [];\n  var ieCurCallback;\n  \n  var createIeLoad = function(url) {\n    ieCnt++;\n    if (ieCnt == 32) {\n      createStyle();\n      ieCnt = 0;\n    }\n    curSheet.addImport(url);\n    curStyle.onload = processIeLoad;\n  }\n  var processIeLoad = function() {\n    ieCurCallback();\n \n    var nextLoad = ieLoads.shift();\n \n    if (!nextLoad) {\n      ieCurCallback = null;\n      return;\n    }\n \n    ieCurCallback = nextLoad[1];\n    createIeLoad(nextLoad[0]);\n  }\n  var importLoad = function(url, callback) {\n    if (!curSheet || !curSheet.addImport)\n      createStyle();\n\n    if (curSheet && curSheet.addImport) {\n      // old IE\n      if (ieCurCallback) {\n        ieLoads.push([url, callback]);\n      }\n      else {\n        createIeLoad(url);\n        ieCurCallback = callback;\n      }\n    }\n    else {\n      // old Firefox\n      curStyle.textContent = '@import \"' + url + '\";';\n\n      var loadInterval = setInterval(function() {\n        try {\n          curStyle.sheet.cssRules;\n          clearInterval(loadInterval);\n          callback();\n        } catch(e) {}\n      }, 10);\n    }\n  }\n\n  // <link> load method\n  var linkLoad = function(url, callback) {\n    var link = document.createElement('link');\n    link.type = 'text/css';\n    link.rel = 'stylesheet';\n    if (useOnload)\n      link.onload = function() {\n        link.onload = function() {};\n        // for style dimensions queries, a short delay can still be necessary\n        setTimeout(callback, 7);\n      }\n    else\n      var loadInterval = setInterval(function() {\n        for (var i = 0; i < document.styleSheets.length; i++) {\n          var sheet = document.styleSheets[i];\n          if (sheet.href == link.href) {\n            clearInterval(loadInterval);\n            return callback();\n          }\n        }\n      }, 10);\n    link.href = url;\n    head.appendChild(link);\n  }\n\n//>>excludeEnd('excludeRequireCss')\n  cssAPI.normalize = function(name, normalize) {\n    if (name.substr(name.length - 4, 4) == '.css')\n      name = name.substr(0, name.length - 4);\n\n    return normalize(name);\n  }\n\n//>>excludeStart('excludeRequireCss', pragmas.excludeRequireCss)\n  cssAPI.load = function(cssId, req, load, config) {\n\n    (useImportLoad ? importLoad : linkLoad)(req.toUrl(cssId + '.css'), load);\n\n  }\n\n//>>excludeEnd('excludeRequireCss')\n  return cssAPI;\n});\n\n","\n/**\n * Control standard parent class\n * All controls should inherit {qui/controls/Control}\n *\n * @module qui/controls/Control\n * @author www.pcsg.de (Henning Leutz)\n *\n * @require qui/QUI\n * @require qui/classes/DOM\n * @require css!qui/controls/Control.css\n *\n * @event onInject [ this ]\n * @event onHighlight [ this ]\n * @event onNormalize [ this ]\n * @event onResize [ this ]\n */\n\ndefine('qui/controls/Control',[\n\n    'qui/QUI',\n    'qui/Locale',\n    'qui/classes/DOM',\n\n    'css!qui/controls/Control.css'\n\n], function(QUI, Locale, DOM)\n{\n    \"use strict\";\n\n    /**\n     * @class qui/controls/Control\n     *\n     * @event onDrawBegin - if inject() is used, the Event will be triggered\n     * @event onDrawEnd   - if inject() is used, the Event will be triggered\n     *\n     * @param {Object} options\n     *\n     * @memberof! <global>\n     */\n    return new Class({\n\n        Extends : DOM,\n        Type    : 'qui/controls/Control',\n\n        $Parent : null,\n\n        options : {\n            name : ''\n        },\n\n        /**\n         * Init function for inherited classes\n         * If a Class inherit from qui/controls/Control, please use this.parent()\n         * so the control are registered in QUI.Controls\n         * and you can get the control with QUI.Controls.get()\n         *\n         * @method qui/controls/Control#init\n         * @param {Object} option - option params\n         */\n        initialize : function(options)\n        {\n            this.parent( options );\n\n            this.addEvent( 'onDestroy', function()\n            {\n                if ( typeof this.$Elm !== 'undefined' && this.$Elm ) {\n                    this.$Elm.destroy();\n                }\n\n                this.$Elm = null;\n            }.bind( this ));\n\n            QUI.Controls.add( this );\n        },\n\n        /**\n         * Create Method, can be overwritten for an own DOM creation\n         *\n         * @method qui/controls/Control#create\n         * @return {DOMNode}\n         */\n        create : function()\n        {\n            if ( this.$Elm ) {\n                return this.$Elm;\n            }\n\n            this.$Elm = new Element( 'div.qui-control' );\n            this.$Elm.set( 'data-quiid', this.getId() );\n\n\n            return this.$Elm;\n        },\n\n        /**\n         * Inject the DOMNode of the Control to a Parent\n         *\n         * @method qui/controls/Control#inject\n         * @param {DOMNode|qui/controls/Control}\n         * @param {pos} [optional]\n         * @return {this}\n         */\n        inject : function(Parent, pos)\n        {\n            this.fireEvent( 'drawBegin', [ this ] );\n\n            if ( typeof this.$Elm === 'undefined' || !this.$Elm ) {\n                this.$Elm = this.create();\n            }\n\n            if ( typeof QUI !== 'undefined' &&\n                 typeof QUI.Controls !== 'undefined' &&\n                 QUI.Controls.isControl( Parent ) )\n            {\n                // QUI Control insertion\n                Parent.appendChild( this );\n            } else\n            {\n                // DOMNode insertion\n                this.$Elm.inject( Parent, pos );\n            }\n\n            this.$Elm.set( 'data-quiid', this.getId() );\n\n            this.fireEvent( 'inject', [ this ] );\n\n            return this;\n        },\n\n        /**\n         * Import the control to the element\n         * The Elm node is the main element, now, and are returned with getElm()\n         * if you want to insert the control to a specific place, use inject(),\n         *\n         * if the html from the control already exists, use import\n         * The import() method is for controls, where the html of the control are generated by the server\n         *\n         * @param {DOMNode} Elm - Elm node\n         * @return {this}\n         */\n        import : function(Elm)\n        {\n            this.$Elm = Elm;\n            this.fireEvent( 'import', [ this, Elm ] );\n\n            return this;\n        },\n\n        /**\n         * Replaces the passed element with the control element.\n         * and assumes the characteristics of the element\n         *\n         * @param {DOMNode} Elm - Elm node\n         * @return {this}\n         */\n        replaces : function(Elm)\n        {\n            if ( this.$Elm ) {\n                return this.$Elm;\n            }\n\n            if ( \"styles\" in Elm ) {\n                this.setAttribute( 'styles', Elm.styles );\n            }\n\n            this.$Elm = this.create();\n\n            this.$Elm.set( 'data-quiid', this.getId() );\n            this.$Elm.set( 'data-qui', Elm.get('data-qui') );\n\n            if ( Elm.getParent() ) {\n                this.$Elm.replaces( Elm );\n            }\n\n            return this;\n        },\n\n        /**\n         * Save the control\n         * Placeholder method for sub controls\n         *\n         * The save method returns all needed attributes for saving the control to the workspace\n         * You can overwrite the method in sub classes to save specific attributes\n         *\n         * @method qui/controls/Control#serialize\n         * @return {Object}\n         */\n        serialize : function()\n        {\n            return {\n                attributes : this.getAttributes(),\n                type       : this.getType()\n            };\n        },\n\n        /**\n         * import the saved attributes and the data\n         * You can overwrite the method in sub classes to import specific attributes\n         *\n         * @method qui/controls/Control#unserialize\n         * @param {Object} data\n         */\n        unserialize : function(data)\n        {\n            if ( data.attributes ) {\n                this.setAttributes( data.attributes );\n            }\n        },\n\n        /**\n         * Get the DOMNode from the Button\n         *\n         * @method qui/controls/Control#getElm\n         * @return {DOMNode}\n         */\n        getElm : function()\n        {\n            if ( typeof this.$Elm === 'undefined' || !this.$Elm ) {\n                this.create();\n            }\n\n            return this.$Elm;\n        },\n\n        /**\n         * If the control have a QUI_Object Parent\n         *\n         * @method qui/controls/Control#getParent\n         * @return {qui/controls/Control|false}\n         */\n        getParent : function()\n        {\n            return this.$Parent || false;\n        },\n\n        /**\n         * Set the Parent to the Button\n         *\n         * @method qui/controls/Control#setParent\n         *\n         * @param {qui/controls/Control} Parent\n         * @return {this}\n         */\n        setParent : function(Parent)\n        {\n            this.$Parent = Parent;\n            return this;\n        },\n\n        /**\n         * Return a path string from the parent names\n         *\n         * @method qui/controls/Control#getPath\n         * @return {String}\n         */\n        getPath : function()\n        {\n            var path   = '/'+ this.getAttribute( 'name' ),\n                Parent = this.getParent();\n\n            if ( !Parent ) {\n                return path;\n            }\n\n            return Parent.getPath() + path;\n        },\n\n        /**\n         * Hide the control\n         *\n         * @method qui/controls/Control#hide\n         * @return {this}\n         */\n        hide : function()\n        {\n            if ( this.$Elm ) {\n                this.$Elm.setStyle( 'display', 'none' );\n            }\n\n            return this;\n        },\n\n        /**\n         * Display / Show the control\n         *\n         * @method qui/controls/Control#show\n         * @return {this}\n         */\n        show : function()\n        {\n            if ( this.$Elm ) {\n                this.$Elm.setStyle( 'display', null );\n            }\n\n            return this;\n        },\n\n        /**\n         * Highlight the control\n         *\n         * @method qui/controls/Control#highlight\n         * @return {this}\n         */\n        highlight : function()\n        {\n            this.fireEvent( 'highlight', [ this ] );\n            return this;\n        },\n\n        /**\n         * Dehighlight / Normalize the control\n         *\n         * @method qui/controls/Control#normalize\n         * @return {this}\n         */\n        normalize : function()\n        {\n            this.fireEvent( 'normalize', [ this ] );\n            return this;\n        },\n\n        /**\n         * Focus the DOMNode Element\n         *\n         * @method qui/controls/Control#focus\n         * @return {this}\n         */\n        focus : function()\n        {\n            if ( this.$Elm )\n            {\n                // try catch for ie 8 fix\n                try {\n                    this.$Elm.focus();\n                } catch ( e ) {}\n            }\n\n            return this;\n        },\n\n        /**\n         * Resize the control\n         *\n         * @method qui/controls/Control#resize\n         */\n        resize : function()\n        {\n            this.fireEvent( 'resize', [ this ] );\n        },\n\n        /**\n         * create and open a new sheet\n         *\n         * @method qui/controls/Control#openSheet\n         * @param {Function} onfinish - callback function\n         */\n        openSheet : function(onfinish)\n        {\n            var Sheet = new Element('div', {\n                'class' : 'qui-sheet qui-box',\n                html    : '<div class=\"qui-sheet-content box\"></div>' +\n                          '<div class=\"qui-sheet-buttons box\">' +\n                              '<div class=\"qui-sheet-buttons-back qui-button btn-white\">' +\n                                  '<span>' +\n                                      Locale.get( 'qui/controls/Control', 'btn.back' ) +\n                                  '</span>' +\n                              '</div>' +\n                          '</div>',\n                styles : {\n                    left : '-110%'\n                }\n            }).inject( this.$Elm  );\n\n            Sheet.getElement( '.qui-sheet-buttons-back' ).addEvent(\n                'click',\n                function() {\n                    Sheet.fireEvent( 'close' );\n                }\n            );\n\n            Sheet.addEvent('close', function()\n            {\n                moofx( Sheet ).animate({\n                    left : '-100%'\n                }, {\n                    callback : function() {\n                        Sheet.destroy();\n                    }\n                });\n            });\n\n            // heights\n            var Content = Sheet.getElement( '.qui-sheet-content' );\n\n            Content.setStyles({\n                height : Sheet.getSize().y - 80\n            });\n\n\n            // effect\n            moofx( Sheet ).animate({\n                left : 0\n            }, {\n                callback : function() {\n                    onfinish( Content, Sheet );\n                }\n            });\n\n            return Sheet;\n        }\n    });\n});\n\n","/**\n * @license MIT\n * @fileOverview Favico animations\n * @author Miroslav Magda, http://blog.ejci.net\n * @version 0.3.4\n */\n\n/**\n * Create new favico instance\n * @param {Object} Options\n * @return {Object} Favico object\n * @example\n * var favico = new Favico({\n *    bgColor : '#d00',\n *    textColor : '#fff',\n *    fontFamily : 'sans-serif',\n *    fontStyle : 'bold',\n *    position : 'down',\n *    type : 'circle',\n *    animation : 'slide',\n * });\n */\n(function() {\n\n    var Favico = (function(opt) {'use strict';\n        opt = (opt) ? opt : {};\n        var _def = {\n            bgColor : '#d00',\n            textColor : '#fff',\n            fontFamily : 'sans-serif', //Arial,Verdana,Times New Roman,serif,sans-serif,...\n            fontStyle : 'bold', //normal,italic,oblique,bold,bolder,lighter,100,200,300,400,500,600,700,800,900\n            type : 'circle',\n            position : 'down', // down, up, left, leftup (upleft)\n            animation : 'slide',\n            elementId : false\n        };\n        var _opt, _orig, _h, _w, _canvas, _context, _img, _ready, _lastBadge, _running, _readyCb, _stop, _browser, _animTimeout, _drawTimeout;\n\n        _browser = {};\n        _browser.ff = (/firefox/i.test(navigator.userAgent.toLowerCase()));\n        _browser.chrome = (/chrome/i.test(navigator.userAgent.toLowerCase()));\n        _browser.opera = (/opera/i.test(navigator.userAgent.toLowerCase()));\n        _browser.ie = (/msie/i.test(navigator.userAgent.toLowerCase())) || (/trident/i.test(navigator.userAgent.toLowerCase()));\n        _browser.supported = (_browser.chrome || _browser.ff || _browser.opera);\n\n        var _queue = [];\n        _readyCb = function() {\n        };\n        _ready = _stop = false;\n        /**\n         * Initialize favico\n         */\n        var init = function() {\n            //merge initial options\n            _opt = merge(_def, opt);\n            _opt.bgColor = hexToRgb(_opt.bgColor);\n            _opt.textColor = hexToRgb(_opt.textColor);\n            _opt.position = _opt.position.toLowerCase();\n            _opt.animation = (animation.types['' + _opt.animation]) ? _opt.animation : _def.animation;\n\n            var isUp = _opt.position.indexOf('up') > -1;\n            var isLeft = _opt.position.indexOf('left') > -1;\n\n            //transform animation\n            if (isUp || isLeft) {\n                for (var i = 0; i < animation.types['' + _opt.animation].length; i++) {\n                    var step = animation.types['' + _opt.animation][i];\n\n                    if (isUp) {\n                        if (step.y < 0.6) {\n                            step.y = step.y - 0.4;\n                        } else {\n                            step.y = step.y - 2 * step.y + (1 - step.w);\n                        }\n                    }\n\n                    if (isLeft) {\n                        if (step.x < 0.6) {\n                            step.x = step.x - 0.4;\n                        } else {\n                            step.x = step.x - 2 * step.x + (1 - step.h);\n                        }\n                    }\n\n                    animation.types['' + _opt.animation][i] = step;\n                }\n            }\n            _opt.type = (type['' + _opt.type]) ? _opt.type : _def.type;\n            try {\n                _orig = link.getIcon();\n                //create temp canvas\n                _canvas = document.createElement('canvas');\n                //create temp image\n                _img = document.createElement('img');\n                if (_orig.hasAttribute('href')) {\n                    _img.setAttribute('src', _orig.getAttribute('href'));\n                    //get width/height\n                    _img.onload = function() {\n                        _h = (_img.height > 0) ? _img.height : 32;\n                        _w = (_img.width > 0) ? _img.width : 32;\n                        _canvas.height = _h;\n                        _canvas.width = _w;\n                        _context = _canvas.getContext('2d');\n                        icon.ready();\n                    };\n                } else {\n                    _img.setAttribute('src', '');\n                    _h = 32;\n                    _w = 32;\n                    _img.height = _h;\n                    _img.width = _w;\n                    _canvas.height = _h;\n                    _canvas.width = _w;\n                    _context = _canvas.getContext('2d');\n                    icon.ready();\n                }\n            } catch(e) {\n                throw 'Error initializing favico. Message: ' + e.message;\n            }\n\n        };\n        /**\n         * Icon namespace\n         */\n        var icon = {};\n        /**\n         * Icon is ready (reset icon) and start animation (if ther is any)\n         */\n        icon.ready = function() {\n            _ready = true;\n            icon.reset();\n            _readyCb();\n        };\n        /**\n         * Reset icon to default state\n         */\n        icon.reset = function() {\n            //reset\n            if (!_ready) {\n                return;\n            }\n            _queue = [];\n            _lastBadge = false;\n            _context.clearRect(0, 0, _w, _h);\n            _context.drawImage(_img, 0, 0, _w, _h);\n            //_stop=true;\n            link.setIcon(_canvas);\n            //webcam('stop');\n            //video('stop');\n            window.clearTimeout(_animTimeout);\n            window.clearTimeout(_drawTimeout);\n        };\n        /**\n         * Start animation\n         */\n        icon.start = function() {\n            if (!_ready || _running) {\n                return;\n            }\n            var finished = function() {\n                _lastBadge = _queue[0];\n                _running = false;\n                if (_queue.length > 0) {\n                    _queue.shift();\n                    icon.start();\n                } else {\n\n                }\n            };\n            if (_queue.length > 0) {\n                _running = true;\n                var run = function() {\n                    // apply options for this animation\n                    ['type', 'animation', 'bgColor', 'textColor',\n                     'fontFamily', 'fontStyle'].forEach(function(a) {\n                        if (a in _queue[0].options) {\n                            _opt[a] = _queue[0].options[a];\n                        }\n                    });\n                    animation.run(_queue[0].options, function() {\n                        finished();\n                    }, false);\n                };\n                if (_lastBadge) {\n                    animation.run(_lastBadge.options, function() {\n                        run();\n                    }, true);\n                } else {\n                    run();\n                }\n            }\n        };\n\n        /**\n         * Badge types\n         */\n        var type = {};\n        var options = function(opt) {\n            opt.n = ((typeof opt.n)==='number') ? Math.abs(opt.n|0) : opt.n;\n            opt.x = _w * opt.x;\n            opt.y = _h * opt.y;\n            opt.w = _w * opt.w;\n            opt.h = _h * opt.h;\n            opt.len = (\"\" + opt.n).length;\n            return opt;\n        };\n        /**\n         * Generate circle\n         * @param {Object} opt Badge options\n         */\n        type.circle = function(opt) {\n            opt = options(opt);\n            var more = false;\n            if (opt.len === 2) {\n                opt.x = opt.x - opt.w * 0.4;\n                opt.w = opt.w * 1.4;\n                more = true;\n            } else if (opt.len >= 3) {\n                opt.x = opt.x - opt.w * 0.65;\n                opt.w = opt.w * 1.65;\n                more = true;\n            }\n            _context.clearRect(0, 0, _w, _h);\n            _context.drawImage(_img, 0, 0, _w, _h);\n            _context.beginPath();\n            _context.font = _opt.fontStyle + \" \" + Math.floor(opt.h * (opt.n > 99 ? 0.85 : 1)) + \"px \" + _opt.fontFamily;\n            _context.textAlign = 'center';\n            if (more) {\n                _context.moveTo(opt.x + opt.w / 2, opt.y);\n                _context.lineTo(opt.x + opt.w - opt.h / 2, opt.y);\n                _context.quadraticCurveTo(opt.x + opt.w, opt.y, opt.x + opt.w, opt.y + opt.h / 2);\n                _context.lineTo(opt.x + opt.w, opt.y + opt.h - opt.h / 2);\n                _context.quadraticCurveTo(opt.x + opt.w, opt.y + opt.h, opt.x + opt.w - opt.h / 2, opt.y + opt.h);\n                _context.lineTo(opt.x + opt.h / 2, opt.y + opt.h);\n                _context.quadraticCurveTo(opt.x, opt.y + opt.h, opt.x, opt.y + opt.h - opt.h / 2);\n                _context.lineTo(opt.x, opt.y + opt.h / 2);\n                _context.quadraticCurveTo(opt.x, opt.y, opt.x + opt.h / 2, opt.y);\n            } else {\n                _context.arc(opt.x + opt.w / 2, opt.y + opt.h / 2, opt.h / 2, 0, 2 * Math.PI);\n            }\n            _context.fillStyle = 'rgba(' + _opt.bgColor.r + ',' + _opt.bgColor.g + ',' + _opt.bgColor.b + ',' + opt.o + ')';\n            _context.fill();\n            _context.closePath();\n            _context.beginPath();\n            _context.stroke();\n            _context.fillStyle = 'rgba(' + _opt.textColor.r + ',' + _opt.textColor.g + ',' + _opt.textColor.b + ',' + opt.o + ')';\n            //_context.fillText((more) ? '9+' : opt.n, Math.floor(opt.x + opt.w / 2), Math.floor(opt.y + opt.h - opt.h * 0.15));\n            if ((typeof opt.n)==='number' && opt.n > 999) {\n                _context.fillText(((opt.n > 9999) ? 9 : Math.floor(opt.n / 1000) ) + 'k+', Math.floor(opt.x + opt.w / 2), Math.floor(opt.y + opt.h - opt.h * 0.2));\n            } else {\n                _context.fillText(opt.n, Math.floor(opt.x + opt.w / 2), Math.floor(opt.y + opt.h - opt.h * 0.15));\n            }\n            _context.closePath();\n        };\n        /**\n         * Generate rectangle\n         * @param {Object} opt Badge options\n         */\n        type.rectangle = function(opt) {\n            opt = options(opt);\n            var more = false;\n            if (opt.len === 2) {\n                opt.x = opt.x - opt.w * 0.4;\n                opt.w = opt.w * 1.4;\n                more = true;\n            } else if (opt.len >= 3) {\n                opt.x = opt.x - opt.w * 0.65;\n                opt.w = opt.w * 1.65;\n                more = true;\n            }\n            _context.clearRect(0, 0, _w, _h);\n            _context.drawImage(_img, 0, 0, _w, _h);\n            _context.beginPath();\n            _context.font = \"bold \" + Math.floor(opt.h * (opt.n > 99 ? 0.9 : 1)) + \"px sans-serif\";\n            _context.textAlign = 'center';\n            _context.fillStyle = 'rgba(' + _opt.bgColor.r + ',' + _opt.bgColor.g + ',' + _opt.bgColor.b + ',' + opt.o + ')';\n            _context.fillRect(opt.x, opt.y, opt.w, opt.h);\n            _context.fillStyle = 'rgba(' + _opt.textColor.r + ',' + _opt.textColor.g + ',' + _opt.textColor.b + ',' + opt.o + ')';\n            //_context.fillText((more) ? '9+' : opt.n, Math.floor(opt.x + opt.w / 2), Math.floor(opt.y + opt.h - opt.h * 0.15));\n            if ((typeof opt.n)==='number' && opt.len > 3) {\n                _context.fillText(((opt.n > 9999) ? 9 : Math.floor(opt.n / 1000) ) + 'k+', Math.floor(opt.x + opt.w / 2), Math.floor(opt.y + opt.h - opt.h * 0.2));\n            } else {\n                _context.fillText(opt.n, Math.floor(opt.x + opt.w / 2), Math.floor(opt.y + opt.h - opt.h * 0.15));\n            }\n            _context.closePath();\n        };\n\n        /**\n         * Set badge\n         */\n        var badge = function(number, opts) {\n            opts = ((typeof opts)==='string' ? {animation:opts} : opts) || {};\n            _readyCb = function() {\n                try {\n                    if (typeof(number)==='number' ? (number > 0) : (number !== '')) {\n                        var q = {\n                            type : 'badge',\n                            options : {\n                                n : number\n                            }\n                        };\n                        if ('animation' in opts &&\n                            animation.types['' + opts.animation]) {\n                            q.options.animation = '' + opts.animation;\n                        }\n                        if ('type' in opts && type['' + opts.type]) {\n                            q.options.type = '' + opts.type;\n                        }\n                        ['bgColor', 'textColor'].forEach(function(o) {\n                            if (o in opts) {\n                                q.options[o] = hexToRgb(opts[o]);\n                            }\n                        });\n                        ['fontStyle', 'fontFamily'].forEach(function(o) {\n                            if (o in opts) {\n                                q.options[o] = opts[o];\n                            }\n                        });\n                        _queue.push(q);\n                        if (_queue.length > 100) {\n                            throw 'Too many badges requests in queue.';\n                        }\n                        icon.start();\n                    } else {\n                        icon.reset();\n                    }\n                } catch(e) {\n                    throw 'Error setting badge. Message: ' + e.message;\n                }\n            };\n            if (_ready) {\n                _readyCb();\n            }\n        };\n\n        /**\n         * Set image as icon\n         */\n        var image = function(imageElement) {\n            _readyCb = function() {\n                try {\n                    var w = imageElement.width;\n                    var h = imageElement.height;\n                    var newImg = document.createElement('img');\n                    var ratio = (w / _w < h / _h) ? (w / _w) : (h / _h);\n                    newImg.setAttribute('src', imageElement.getAttribute('src'));\n                    newImg.height = (h / ratio);\n                    newImg.width = (w / ratio);\n                    _context.clearRect(0, 0, _w, _h);\n                    _context.drawImage(newImg, 0, 0, _w, _h);\n                    link.setIcon(_canvas);\n                } catch(e) {\n                    throw 'Error setting image. Message: ' + e.message;\n                }\n            };\n            if (_ready) {\n                _readyCb();\n            }\n        };\n        /**\n         * Set video as icon\n         */\n        var video = function(videoElement) {\n            _readyCb = function() {\n                try {\n                    if (videoElement === 'stop') {\n                        _stop = true;\n                        icon.reset();\n                        _stop = false;\n                        return;\n                    }\n                    //var w = videoElement.width;\n                    //var h = videoElement.height;\n                    //var ratio = (w / _w < h / _h) ? (w / _w) : (h / _h);\n                    videoElement.addEventListener('play', function() {\n                        drawVideo(this);\n                    }, false);\n\n                } catch(e) {\n                    throw 'Error setting video. Message: ' + e.message;\n                }\n            };\n            if (_ready) {\n                _readyCb();\n            }\n        };\n        /**\n         * Set video as icon\n         */\n        var webcam = function(action) {\n            //UR\n            if (!window.URL || !window.URL.createObjectURL) {\n                window.URL = window.URL || {};\n                window.URL.createObjectURL = function(obj) {\n                    return obj;\n                };\n            }\n            if (_browser.supported) {\n                var newVideo = false;\n                navigator.getUserMedia = navigator.getUserMedia || navigator.oGetUserMedia || navigator.msGetUserMedia || navigator.mozGetUserMedia || navigator.webkitGetUserMedia;\n                _readyCb = function() {\n                    try {\n                        if (action === 'stop') {\n                            _stop = true;\n                            icon.reset();\n                            _stop = false;\n                            return;\n                        }\n                        newVideo = document.createElement('video');\n                        newVideo.width = _w;\n                        newVideo.height = _h;\n                        navigator.getUserMedia({\n                            video : true,\n                            audio : false\n                        }, function(stream) {\n                            newVideo.src = URL.createObjectURL(stream);\n                            newVideo.play();\n                            drawVideo(newVideo);\n                        }, function() {\n                        });\n                    } catch(e) {\n                        throw 'Error setting webcam. Message: ' + e.message;\n                    }\n                };\n                if (_ready) {\n                    _readyCb();\n                }\n            }\n\n        };\n\n        /**\n         * Draw video to context and repeat :)\n         */\n        function drawVideo(video) {\n            if (video.paused || video.ended || _stop) {\n                return false;\n            }\n            //nasty hack for FF webcam (Thanks to Julian Ćwirko, kontakt@redsunmedia.pl)\n            try {\n                _context.clearRect(0, 0, _w, _h);\n                _context.drawImage(video, 0, 0, _w, _h);\n            } catch(e) {\n\n            }\n            _drawTimeout = setTimeout(drawVideo, animation.duration, video);\n            link.setIcon(_canvas);\n        }\n\n        var link = {};\n        /**\n         * Get icon from HEAD tag or create a new <link> element\n         */\n        link.getIcon = function() {\n            var elm = false;\n            var url = '';\n            //get link element\n            var getLink = function() {\n                var link = document.getElementsByTagName('head')[0].getElementsByTagName('link');\n                for (var l = link.length, i = (l - 1); i >= 0; i--) {\n                    if ((/(^|\\s)icon(\\s|$)/i).test(link[i].getAttribute('rel'))) {\n                        return link[i];\n                    }\n                }\n                return false;\n            };\n            if (_opt.elementId) {\n                //if img element identified by elementId\n                elm = document.getElementById(_opt.elementId);\n                elm.setAttribute('href', elm.getAttribute('src'));\n            } else {\n                //if link element\n                elm = getLink();\n                if (elm === false) {\n                    elm = document.createElement('link');\n                    elm.setAttribute('rel', 'icon');\n                    document.getElementsByTagName('head')[0].appendChild(elm);\n                }\n            }\n            //check if image and link url is on same domain. if not raise error\n            url = (_opt.elementId) ? elm.src : elm.href;\n            if (url.indexOf(document.location.hostname) === -1) {\n                throw new Error('Error setting favicon. Favicon image is on different domain (Icon: ' + url + ', Domain: ' + document.location.hostname + ')');\n            }\n            elm.setAttribute('type', 'image/png');\n            return elm;\n        };\n        link.setIcon = function(canvas) {\n            var url = canvas.toDataURL('image/png');\n            if (_opt.elementId) {\n                //if is attached to element (image)\n                document.getElementById(_opt.elementId).setAttribute('src', url);\n            } else {\n                //if is attached to fav icon\n                if (_browser.ff || _browser.opera) {\n                    //for FF we need to \"recreate\" element, atach to dom and remove old <link>\n                    //var originalType = _orig.getAttribute('rel');\n                    var old = _orig;\n                    _orig = document.createElement('link');\n                    //_orig.setAttribute('rel', originalType);\n                    if (_browser.opera) {\n                        _orig.setAttribute('rel', 'icon');\n                    }\n                    _orig.setAttribute('rel', 'icon');\n                    _orig.setAttribute('type', 'image/png');\n                    document.getElementsByTagName('head')[0].appendChild(_orig);\n                    _orig.setAttribute('href', url);\n                    if (old.parentNode) {\n                        old.parentNode.removeChild(old);\n                    }\n                } else {\n                    _orig.setAttribute('href', url);\n                }\n            }\n        };\n\n        //http://stackoverflow.com/questions/5623838/rgb-to-hex-and-hex-to-rgb#answer-5624139\n        //HEX to RGB convertor\n        function hexToRgb(hex) {\n            var shorthandRegex = /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i;\n            hex = hex.replace(shorthandRegex, function(m, r, g, b) {\n                return r + r + g + g + b + b;\n            });\n            var result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n            return result ? {\n                r : parseInt(result[1], 16),\n                g : parseInt(result[2], 16),\n                b : parseInt(result[3], 16)\n            } : false;\n        }\n\n        /**\n         * Merge options\n         */\n        function merge(def, opt) {\n            var mergedOpt = {};\n            var attrname;\n            for (attrname in def) {\n                mergedOpt[attrname] = def[attrname];\n            }\n            for (attrname in opt) {\n                mergedOpt[attrname] = opt[attrname];\n            }\n            return mergedOpt;\n        }\n\n        /**\n         * Cross-browser page visibility shim\n         * http://stackoverflow.com/questions/12536562/detect-whether-a-window-is-visible\n         */\n        function isPageHidden() {\n            return document.hidden || document.msHidden || document.webkitHidden || document.mozHidden;\n        }\n\n        /**\n         * @namespace animation\n         */\n        var animation = {};\n        /**\n         * Animation \"frame\" duration\n         */\n        animation.duration = 40;\n        /**\n         * Animation types (none,fade,pop,slide)\n         */\n        animation.types = {};\n        animation.types.fade = [{\n            x : 0.4,\n            y : 0.4,\n            w : 0.6,\n            h : 0.6,\n            o : 0.0\n        }, {\n            x : 0.4,\n            y : 0.4,\n            w : 0.6,\n            h : 0.6,\n            o : 0.1\n        }, {\n            x : 0.4,\n            y : 0.4,\n            w : 0.6,\n            h : 0.6,\n            o : 0.2\n        }, {\n            x : 0.4,\n            y : 0.4,\n            w : 0.6,\n            h : 0.6,\n            o : 0.3\n        }, {\n            x : 0.4,\n            y : 0.4,\n            w : 0.6,\n            h : 0.6,\n            o : 0.4\n        }, {\n            x : 0.4,\n            y : 0.4,\n            w : 0.6,\n            h : 0.6,\n            o : 0.5\n        }, {\n            x : 0.4,\n            y : 0.4,\n            w : 0.6,\n            h : 0.6,\n            o : 0.6\n        }, {\n            x : 0.4,\n            y : 0.4,\n            w : 0.6,\n            h : 0.6,\n            o : 0.7\n        }, {\n            x : 0.4,\n            y : 0.4,\n            w : 0.6,\n            h : 0.6,\n            o : 0.8\n        }, {\n            x : 0.4,\n            y : 0.4,\n            w : 0.6,\n            h : 0.6,\n            o : 0.9\n        }, {\n            x : 0.4,\n            y : 0.4,\n            w : 0.6,\n            h : 0.6,\n            o : 1.0\n        }];\n        animation.types.none = [{\n            x : 0.4,\n            y : 0.4,\n            w : 0.6,\n            h : 0.6,\n            o : 1\n        }];\n        animation.types.pop = [{\n            x : 1,\n            y : 1,\n            w : 0,\n            h : 0,\n            o : 1\n        }, {\n            x : 0.9,\n            y : 0.9,\n            w : 0.1,\n            h : 0.1,\n            o : 1\n        }, {\n            x : 0.8,\n            y : 0.8,\n            w : 0.2,\n            h : 0.2,\n            o : 1\n        }, {\n            x : 0.7,\n            y : 0.7,\n            w : 0.3,\n            h : 0.3,\n            o : 1\n        }, {\n            x : 0.6,\n            y : 0.6,\n            w : 0.4,\n            h : 0.4,\n            o : 1\n        }, {\n            x : 0.5,\n            y : 0.5,\n            w : 0.5,\n            h : 0.5,\n            o : 1\n        }, {\n            x : 0.4,\n            y : 0.4,\n            w : 0.6,\n            h : 0.6,\n            o : 1\n        }];\n        animation.types.popFade = [{\n            x : 0.75,\n            y : 0.75,\n            w : 0,\n            h : 0,\n            o : 0\n        }, {\n            x : 0.65,\n            y : 0.65,\n            w : 0.1,\n            h : 0.1,\n            o : 0.2\n        }, {\n            x : 0.6,\n            y : 0.6,\n            w : 0.2,\n            h : 0.2,\n            o : 0.4\n        }, {\n            x : 0.55,\n            y : 0.55,\n            w : 0.3,\n            h : 0.3,\n            o : 0.6\n        }, {\n            x : 0.50,\n            y : 0.50,\n            w : 0.4,\n            h : 0.4,\n            o : 0.8\n        }, {\n            x : 0.45,\n            y : 0.45,\n            w : 0.5,\n            h : 0.5,\n            o : 0.9\n        }, {\n            x : 0.4,\n            y : 0.4,\n            w : 0.6,\n            h : 0.6,\n            o : 1\n        }];\n        animation.types.slide = [{\n            x : 0.4,\n            y : 1,\n            w : 0.6,\n            h : 0.6,\n            o : 1\n        }, {\n            x : 0.4,\n            y : 0.9,\n            w : 0.6,\n            h : 0.6,\n            o : 1\n        }, {\n            x : 0.4,\n            y : 0.9,\n            w : 0.6,\n            h : 0.6,\n            o : 1\n        }, {\n            x : 0.4,\n            y : 0.8,\n            w : 0.6,\n            h : 0.6,\n            o : 1\n        }, {\n            x : 0.4,\n            y : 0.7,\n            w : 0.6,\n            h : 0.6,\n            o : 1\n        }, {\n            x : 0.4,\n            y : 0.6,\n            w : 0.6,\n            h : 0.6,\n            o : 1\n        }, {\n            x : 0.4,\n            y : 0.5,\n            w : 0.6,\n            h : 0.6,\n            o : 1\n        }, {\n            x : 0.4,\n            y : 0.4,\n            w : 0.6,\n            h : 0.6,\n            o : 1\n        }];\n        /**\n         * Run animation\n         * @param {Object} opt Animation options\n         * @param {Object} cb Callabak after all steps are done\n         * @param {Object} revert Reverse order? true|false\n         * @param {Object} step Optional step number (frame bumber)\n         */\n        animation.run = function(opt, cb, revert, step) {\n            var animationType = animation.types[isPageHidden() ? 'none' : _opt.animation];\n            if (revert === true) {\n                step = ( typeof step !== 'undefined') ? step : animationType.length - 1;\n            } else {\n                step = ( typeof step !== 'undefined') ? step : 0;\n            }\n            cb = (cb) ? cb : function() {\n            };\n            if ((step < animationType.length) && (step >= 0)) {\n                type[_opt.type](merge(opt, animationType[step]));\n                _animTimeout = setTimeout(function() {\n                    if (revert) {\n                        step = step - 1;\n                    } else {\n                        step = step + 1;\n                    }\n                    animation.run(opt, cb, revert, step);\n                }, animation.duration);\n\n                link.setIcon(_canvas);\n            } else {\n                cb();\n                return;\n            }\n        };\n        //auto init\n        init();\n        return {\n            badge : badge,\n            video : video,\n            image : image,\n            webcam : webcam,\n            reset : icon.reset\n        };\n    });\n\n    // AMD / RequireJS\n    if ( typeof define !== 'undefined' && define.amd) {\n        define('qui/controls/messages/Favico',[], function() {\n            return Favico;\n        });\n    }\n    // CommonJS\n    else if ( typeof module !== 'undefined' && module.exports) {\n        module.exports = Favico;\n    }\n    // included directly via <script> tag\n    else {\n        this.Favico = Favico;\n    }\n\n})();\n\n","\n/**\n * Use Local storage,\n * if local storage not exist, it loads the polyfill\n *\n * @module qui/classes/storage/Storage\n * @author www.pcsg.de (Henning Leutz)\n *\n * @require qui/classes/DOM\n * @require [optional] qui/classes/storage/Polyfill\n */\n\nvar needle = ['qui/classes/DOM'];\n\nif ( typeof window.localStorage === 'undefined' ||\n     typeof window.sessionStorage === 'undefined')\n{\n    needle.push( 'qui/classes/storage/Polyfill' );\n}\n\ndefine(needle, function(QDOM, Polyfill)\n{\n    \"use strict\";\n\n    /**\n     * Local storage\n     *\n     * @class qui/classes/storage/Storage\n     *\n     * @memberof! <global>\n     */\n    return new Class({\n\n        Extends : QDOM,\n        Type    : 'qui/classes/storage/Storage',\n\n        /**\n         * Set the value of a key\n         *\n         * @method qui/classes/storage/Storage#set\n         * @param {String} key\n         * @param {String|Integer} value\n         */\n        set : function(key, value)\n        {\n            window.localStorage.setItem( key, value );\n        },\n\n        /**\n         * Return the value of stored the key\n         *\n         * @method qui/classes/storage/Storage#get\n         * @param {String} key\n         * @return {unknown_type} the wanted storage\n         */\n        get : function(key)\n        {\n            return window.localStorage.getItem( key );\n        }\n    });\n});\n\ndefine(\"qui/classes/storage/Storage\", function(){});\n\n","\n/**\n * Message Handler\n *\n * @module qui/controls/messages/Handler\n * @author www.pcsg.de (Henning Leutz)\n *\n * @require require\n * @require qui/controls/Control',\n * @require qui/controls/messages/Favico',\n * @require qui/Locale',\n * @require qui/classes/storage/Storage',\n * @require css!qui/controls/messages/Handler'\n *\n * @event onAdd [ {this}, {qui/controls/messages/Message} ]\n * @event onAddAttention [ {this}, {qui/controls/messages/Attention} ]\n * @event onAddError [ {this}, {qui/controls/messages/Error} ]\n * @event onAddInformation [ {this}, {qui/controls/messages/Information} ]\n * @event onAddSuccess [ {this}, {qui/controls/messages/Success} ]\n *\n * @event onClear [ {this} ]\n * @event onLoad [ {this} ]\n */\n\ndefine('qui/controls/messages/Handler',[\n\n    'require',\n    'qui/controls/Control',\n    'qui/controls/messages/Favico',\n    'qui/Locale',\n    'qui/classes/storage/Storage',\n\n    'css!qui/controls/messages/Handler.css'\n\n], function(require, Control, Favico, Locale)\n{\n    \"use strict\";\n\n    /**\n     * @class qui/controls/messages/Handler\n     *\n     * @memberof! <global>\n     */\n    return new Class({\n\n        Extends : Control,\n        Type    : 'qui/controls/messages/Handler',\n\n        $messages    : [],\n        $newMessages : 0,\n\n        $filter : {\n            attention   : true,\n            error       : true,\n            information : true,\n            success     : true\n        },\n\n        options : {\n            autosave : true,\n            autoload : true\n        },\n\n        initialize : function(params)\n        {\n            var self = this;\n\n\n            this.parent( params );\n\n            this.Favico  = null;\n            this.$Parent = null;\n\n            // ie 9 and lower can't change the favicon\n            if ( !Browser.ie || ( Browser.ie && Browser.version > 9 ) )\n            {\n                try\n                {\n                    this.Favico = new Favico({\n                        animation : 'fade'\n                    });\n                } catch ( e ) {\n                    // nothing\n                }\n\n                window.addEvent('unload', function()\n                {\n                    if ( self.Favico )  {\n                        self.Favico.badge( 0 );\n                    }\n                });\n            }\n\n            var data = window.localStorage.getItem( 'messageHandler' );\n\n            if ( !data ) {\n                return;\n            }\n\n            data = JSON.decode( data );\n\n            if ( data.config ) {\n                this.setAttributes( data.config );\n            }\n\n            if ( data.filter ) {\n                this.$filter = Object.merge( this.$filter, data.filter );\n            }\n\n            if ( data.messages )\n            {\n                data.messages.sort(function(a, b)\n                {\n                    a = new Date( a.time );\n                    b = new Date( b.time );\n\n                    return a > b ? -1 : a < b ? 1 : 0;\n                });\n\n                require([\n                     'qui/controls/messages/Attention',\n                     'qui/controls/messages/Error',\n                     'qui/controls/messages/Information',\n                     'qui/controls/messages/Success',\n                     'qui/controls/messages/Message'\n                ], function(Attention, Error, Information, Success, StandardMessage)\n                {\n                    var i, len, type, Data, Message;\n\n                    for ( i = 0, len = data.messages.length; i < len; i++ )\n                    {\n                        Data = data.messages[ i ];\n                        type = Data.Type;\n\n                        delete Data.Type;\n\n                        switch ( type  )\n                        {\n                            case 'qui/controls/messages/Attention':\n                                Message = new Attention( Data );\n                            break;\n\n                            case 'qui/controls/messages/Error':\n                                Message = new Error( Data );\n                            break;\n\n                            case 'qui/controls/messages/Information':\n                                Message = new Information( Data );\n                            break;\n\n                            case 'qui/controls/messages/Success':\n                                Message = new Success( Data );\n                            break;\n\n                            default:\n                                Message = new StandardMessage( Data );\n                            break;\n                        }\n\n                        Message.addEvent(\n                            'onDestroy',\n                            self.$onMessageDestroy.bind( self )\n                        );\n\n                        self.$messages.push( Message );\n                    }\n                });\n            }\n\n            if ( data.newMessages && self.$messages.length )\n            {\n                this.$newMessages = data.newMessages;\n                this.refreshFavicon();\n            }\n\n            if ( this.getAttribute( 'autoload' ) ) {\n                this.load();\n            }\n        },\n\n        /**\n         * @method qui/controls/messages/Handler#bindeParent\n         * @param {DOMNode} Parent\n         */\n        bindParent : function(Parent)\n        {\n            this.$Parent = Parent;\n        },\n\n        /**\n         * @method qui/controls/messages/Handler#unbindParent\n         */\n        unbindParent : function()\n        {\n            this.$Parent = null;\n        },\n\n        /**\n         * Load the messages from the database\n         *\n         * @method qui/controls/messages/Handler#load\n         * @depricated\n         */\n        load : function()\n        {\n            if ( typeof User === 'undefined' || !User ) {\n                return;\n            }\n\n            var self = this;\n\n            require([\n                'qui/controls/messages/Attention',\n                'qui/controls/messages/Error',\n                'qui/controls/messages/Information',\n                'qui/controls/messages/Success'\n            ], function(Attention, Error, Information, Success)\n            {\n                _Ajax.asyncPost('ajax_messages_get', function(result)\n                {\n                    var i, len, data, entry, Message;\n\n                    for ( i = 0, len = result.length; i < len; i++ )\n                    {\n                        entry = result[ i ];\n\n                        data = {\n                            message  : entry.message,\n                            time     : entry.time\n                        };\n\n                        switch ( entry.mtype )\n                        {\n                            case 'QUI\\\\Messages\\\\Attention':\n                                Message = new Attention( data );\n                            break;\n\n                            case 'QUI\\\\Messages\\\\Error':\n                                Message = new Error( data );\n                            break;\n\n                            case 'QUI\\\\Messages\\\\Information':\n                                Message = new Information( data );\n                            break;\n\n                            case 'QUI\\\\Messages\\\\Success':\n                                Message = new Success( data );\n                            break;\n\n                            default:\n                                continue;\n                        }\n\n                        self.add( Message );\n                    }\n                });\n\n                self.fireEvent( 'load', [ self ] );\n            });\n        },\n\n        /**\n         * Create the DOMNode Element of the MessageHandler\n         * It create the opener button\n         *\n         * If you want to open the message handler, use .open();\n         *\n         * @method qui/controls/messages/Handler#create\n         * @return {DOMNode}\n         */\n        create : function()\n        {\n            this.$Elm = new Element('div', {\n                'class' : 'message-handler-control',\n                html    : '<span class=\"icon-info\"></span>' +\n                          '<span class=\"message-handler-count\"></span>',\n                title   : Locale.get( 'qui/controls/messages', 'handler.open' ),\n                events  : {\n                    click : this.open.bind( this )\n                }\n            });\n\n            this.refreshFavicon();\n\n            return this.$Elm;\n        },\n\n        /**\n         * Opens the message handler\n         *\n         * @method qui/controls/messages/Handler#open\n         */\n        open : function()\n        {\n            if ( document.getElement( '.message-handler-container' ) ) {\n                return;\n            }\n\n            this.$newMessages = 0;\n\n            var Parent = this.$Parent;\n\n            if ( !this.$Parent ) {\n                Parent = document.body;\n            }\n\n            var self = this,\n                size = Parent.getSize();\n\n            var Container = new Element('div', {\n                'class' : 'message-handler-container',\n                html    : '<div class=\"message-handler-container-title\">'+\n                              'Nachrichten' +\n                          '</div>' +\n                          '<div class=\"message-handler-container-buttons\">' +\n                              '<div class=\"success message-handler-container-button grid-20 mobile-grid-20 icon-ok\"></div>' +\n                              '<div class=\"information message-handler-container-button grid-20 mobile-grid-20 icon-info-sign\"></div>' +\n                              '<div class=\"attention message-handler-container-button grid-20 mobile-grid-20 icon-warning-sign\"></div>' +\n                              '<div class=\"error message-handler-container-button grid-20 mobile-grid-20 icon-bolt\"></div>' +\n                              '<div class=\"trash message-handler-container-button grid-20 mobile-grid-20 icon-trash\"></div>' +\n                          '</div>' +\n                          '<div class=\"message-handler-container-messages\"></div>' +\n                          '<div class=\"message-handler-container-close\"></div>'\n            }).inject( Parent );\n\n            // trash\n            Container.getElement( '.icon-trash' ).addEvent(\n                'click',\n                this.clear.bind( this )\n            );\n\n            if ( Parent != document.body )\n            {\n                Container.setStyles({\n                    border   : 'none',\n                    position : 'relative'\n                });\n\n                Container.getElement( '.message-handler-container-title' )\n                         .destroy();\n\n                Container.getElement( '.message-handler-container-close' )\n                         .setStyle( 'display', 'none' );\n            }\n\n            // filter\n            var buttons = Container.getElements(\n                '.success,.information,.attention,.error'\n            );\n\n            buttons.addEvent(\n                'click', this.$switchFilterStatus.bind( this )\n            );\n\n            buttons.addClass( 'message-handler-container-buttons-active' );\n\n            // titles\n            Container.getElement( '.trash' ).set({\n                title : Locale.get( 'qui/controls/messages', 'handler.button.clear' )\n            });\n\n            Container.getElement( '.success' ).set({\n                title : Locale.get( 'qui/controls/messages', 'handler.button.success' )\n            });\n\n            Container.getElement( '.information' ).set({\n                title : Locale.get( 'qui/controls/messages', 'handler.button.information' )\n            });\n\n            Container.getElement( '.attention' ).set({\n                title : Locale.get( 'qui/controls/messages', 'handler.button.attention' )\n            });\n\n            Container.getElement( '.error' ).set({\n                title : Locale.get( 'qui/controls/messages', 'handler.button.error' )\n            });\n\n\n            // sizes\n            var Messages = Container.getElement(\n                    '.message-handler-container-messages'\n                ),\n\n                Close = Container.getElement(\n                    '.message-handler-container-close'\n                );\n\n\n            new Element('div', {\n                'class' : 'button message-handler-container-close-btn',\n                html    : Locale.get( 'qui/controls/messages', 'handler.button.close' ),\n                events  :\n                {\n                    click : function() {\n                        self.close();\n                    }\n                }\n            }).inject( Close );\n\n\n            this.$onResize();\n\n            window.addEvent( 'resize', this.$onResize );\n\n\n            moofx( Container ).animate({\n                left : 0\n            }, {\n                callback : function()\n                {\n                    Messages.set( 'html', '' );\n\n                    self.$messages.sort(function(a, b)\n                    {\n                        a = new Date( a.getAttribute( 'time' ) );\n                        b = new Date( b.getAttribute( 'time' ) );\n\n                        return a > b ? -1 : a < b ? 1 : 0;\n                    });\n\n                    // show messages\n                    for ( var i = 0, len = self.$messages.length; i < len; i++ ) {\n                        self.$messages[ i ].inject( Messages );\n                    }\n\n                    if ( !len )\n                    {\n                        Messages.set(\n                            'html',\n                            '<p style=\"text-align: center;\">'+\n                                Locale.get( 'qui/controls/messages', 'handler.no.messages' ) +\n                            '</p>'\n                        );\n                    }\n\n                    if ( Parent == document.body ) {\n                        Container.addClass( 'shadow' );\n                    }\n\n                    self.refreshFavicon();\n                    self.save();\n                }\n            });\n        },\n\n        /**\n         * Parse an array / object to their message type\n         * The Array are often from the php message handler\n         *\n         * @method qui/controls/messages/Handler#parse\n         * @param {Object} params\n         * @param {Function} callback function\n         */\n        parse : function(params, callback)\n        {\n            require([\n                 'qui/controls/messages/Attention',\n                 'qui/controls/messages/Error',\n                 'qui/controls/messages/Information',\n                 'qui/controls/messages/Success',\n                 'qui/controls/messages/Message'\n            ], function(Attention, Error, Information, Success, StandardMessage)\n            {\n                var data, Message;\n\n                data = {\n                    message  : params.message,\n                    time     : params.time\n                };\n\n                switch ( params.mtype )\n                {\n                    case 'QUI\\\\Messages\\\\Attention':\n                        Message = new Attention( data );\n                    break;\n\n                    case 'QUI\\\\Messages\\\\Error':\n                        Message = new Error( data );\n                    break;\n\n                    case 'QUI\\\\Messages\\\\Information':\n                        Message = new Information( data );\n                    break;\n\n                    case 'QUI\\\\Messages\\\\Success':\n                        Message = new Success( data );\n                    break;\n\n                    default:\n                        Message = new StandardMessage( data );\n                    break;\n                }\n\n                callback( Message );\n            });\n        },\n\n        /**\n         * Close the message handler\n         *\n         * @method qui/controls/messages/Handler#close\n         */\n        close : function()\n        {\n            var self      = this,\n                Container = document.getElement( '.message-handler-container' );\n\n            Container.removeClass( 'shadow' );\n\n            moofx( Container ).animate({\n                left : -500\n            }, {\n                callback : function()\n                {\n                    Container.destroy();\n                    document.removeEvent( 'onResize', self.$onResize );\n                }\n            });\n        },\n\n        /**\n         * delete all messages\n         *\n         * @method qui/controls/messages/Handler#clear\n         */\n        clear : function()\n        {\n            this.$messages = [];\n\n            var Container = document.getElement( '.message-handler-container-messages' );\n\n            if ( Container )\n            {\n                Container.set(\n                    'html',\n                    '<p style=\"text-align: center;\">'+\n                        Locale.get( 'qui/controls/messages', 'handler.no.messages' ) +\n                    '</p>'\n                );\n            }\n\n            if ( this.Favico ) {\n                this.Favico.reset();\n            }\n\n            this.fireEvent( 'clear', [ this ] );\n\n            if ( this.getAttribute( 'autosave' ) ) {\n                this.save();\n            }\n        },\n\n        /**\n         * Return the number of the messages\n         *\n         * @method qui/controls/messages/Handler#count\n         * @return {Integer}\n         */\n        count : function()\n        {\n            return this.$messages.length;\n        },\n\n        /**\n         * Save the message handler to the storage\n         *\n         * @method qui/controls/messages/Handler#save\n         */\n        save : function()\n        {\n            var i, len, attr;\n\n            var messages = [],\n                params   = {\n                    config      : this.getAttributes(),\n                    filter      : this.$filter,\n                    newMessages : this.$newMessages\n                };\n\n            for ( i = 0, len = this.$messages.length; i < len; i++ )\n            {\n                attr      = this.$messages[ i ].getAttributes();\n                attr.Type = this.$messages[ i ].getType();\n\n                messages.push( attr );\n            }\n\n            params.messages = messages;\n\n            window.localStorage.setItem(\n                'messageHandler',\n                JSON.encode( params )\n            );\n        },\n\n        /**\n         * Refresh the display and filter the messages\n         *\n         * @method qui/controls/messages/Handler#filter\n         */\n        filter : function()\n        {\n            var Container = document.getElement( '.message-handler-container' );\n\n            if ( !Container ) {\n                return;\n            }\n\n            var i, len, Message;\n\n            var messages = Container.getElements( '.messages-message' ),\n                filter   = this.$filter;\n\n            for ( i = 0, len = messages.length; i < len; i++ )\n            {\n                Message = messages[ i ];\n\n                if ( filter.attention && Message.hasClass( 'message-attention' ) )\n                {\n                    Message.setStyle( 'display', null );\n                    continue;\n                }\n\n                if ( filter.error && Message.hasClass( 'message-error' ) )\n                {\n                    Message.setStyle( 'display', null );\n                    continue;\n                }\n\n                if ( filter.information && Message.hasClass( 'message-information' ) )\n                {\n                    Message.setStyle( 'display', null );\n                    continue;\n                }\n\n                if ( filter.success && Message.hasClass( 'message-success' ) )\n                {\n                    Message.setStyle( 'display', null );\n                    continue;\n                }\n\n                Message.setStyle( 'display', 'none' );\n            }\n        },\n\n        /**\n         * Returns the count of the new messages\n         *\n         * @method qui/controls/messages/Handler#getNewMessages\n         * @return {Integer}\n         */\n        getNewMessages : function()\n        {\n            return this.$newMessages;\n        },\n\n        /**\n         * Return the messages array\n         *\n         * @method qui/controls/messages/Handler#getMessages\n         * @return {Array}\n         */\n        getMessages : function()\n        {\n            return this.$messages;\n        },\n\n        /**\n         * refresh the favicon and the counter\n         *\n         * @method qui/controls/messages/Handler#refreshFavicon\n         */\n        refreshFavicon : function()\n        {\n            if ( this.Favico ) {\n                this.Favico.badge( this.$newMessages );\n            }\n\n            if ( !this.getElm() ) {\n                return;\n            }\n\n            var Count = this.getElm().getElement( '.message-handler-count' );\n\n            if ( !Count ) {\n                return;\n            }\n\n            Count.set({\n                html : this.$newMessages,\n                styles : {\n                    display : this.$newMessages ? 'inline' : 'none'\n                }\n            });\n        },\n\n        /**\n         * Add a message to the Handler\n         *\n         * @method qui/controls/messages/Handler#add\n         * @param {qui/controls/messages/Message} Message\n         * @param {DOMNode} Parent - [optional] Parent Object, where to display the message\n         * @return {this}\n         */\n        add : function(Message, Parent)\n        {\n            var Messages = document.getElement( '.message-handler-container-messages' );\n\n            this.$messages.push( Message );\n\n            Message.addEvent(\n                'onDestroy',\n                this.$onMessageDestroy.bind( this )\n            );\n\n            // message handler is closed\n            if ( !Messages )\n            {\n                this.$newMessages++;\n                this.refreshFavicon();\n\n                if ( this.getAttribute( 'autosave' ) ) {\n                    this.save();\n                }\n\n                var pos, size;\n                var Node = Message.createMessageElement();\n\n                if ( typeof Parent === 'undefined' ) {\n                    Parent = document.body;\n                }\n\n                pos  = Parent.getPosition();\n                size = Parent.getSize();\n\n                Node.setStyles({\n                    left     : pos.x,\n                    position : 'absolute',\n                    top      : pos.y + size.y,\n                    width    : 280,\n                    zIndex   : 10000\n                });\n\n                if ( Parent == document.body )\n                {\n                    Node.setStyles({\n                        bottom   : 10,\n                        left     : 10,\n                        position : 'fixed',\n                        top      : null\n                    });\n                }\n\n                Node.addClass( 'animated' );\n                Node.inject( document.body );\n                Node.addClass( 'fadeInDown' );\n\n                (function()\n                {\n                    moofx( Node ).animate({\n                        opacity : 0\n                    }, {\n                        callback : function() {\n                            Node.destroy();\n                        }\n                    });\n                }).delay( 2000 );\n\n                this.fireEvent( 'add', [ this, Message ] );\n\n                return this;\n            }\n\n            // message handler is open\n            if ( this.$messages.length == 1 ) {\n                Messages.set( 'html', '' );\n            }\n\n            Message.inject( Messages, 'top' );\n\n            new Fx.Scroll( Messages ).toTop();\n\n            Message.getElm().addClass( 'animated' );\n            Message.getElm().addClass( 'flash' );\n\n            if ( this.getAttribute( 'autosave' ) ) {\n                this.save();\n            }\n\n            this.fireEvent( 'add', [ this, Message ] );\n\n            return this;\n        },\n\n        /**\n         * Add an attention\n         *\n         * @method qui/controls/messages/Handler#addAttention\n         * @param {String} str - Message text\n         * @param {DOMNode} Parent - [optional] Parent Object, where to display the message\n         * @return {this}\n         */\n        addAttention : function(str, Parent)\n        {\n            var self = this;\n\n            require(['qui/controls/messages/Attention'], function(Attention)\n            {\n                var Message = new Attention({\n                    message : str\n                });\n\n                self.add( Message, Parent );\n                self.fireEvent( 'addAttention', [ this, Message ] );\n            });\n\n            return this;\n        },\n\n        /**\n         * Add an error\n         *\n         * @method qui/controls/messages/Handler#addError\n         * @param {String} str - Message text\n         * @param {DOMNode} Parent - [optional] Parent Object, where to display the message\n         * @return {this}\n         */\n        addError : function(str, Parent)\n        {\n            var self = this;\n\n            require(['qui/controls/messages/Error'], function(Error)\n            {\n                var Message = new Error({\n                    message : str\n                });\n\n                self.add( Message, Parent );\n                self.fireEvent( 'addError', [ this, Message ] );\n            });\n\n            return this;\n        },\n\n        /**\n         * Add an exception\n         *\n         * @method qui/controls/messages/Handler#addException\n         * @param {Exception} Exception\n         * @param {DOMNode} Parent - [optional] Parent Object, where to display the message\n         * @return {this}\n         */\n        addException : function(Exception, Parent)\n        {\n            var self = this;\n\n            require(['qui/controls/messages/Error'], function(Error)\n            {\n                var Message = new Error({\n                    message : Exception.getMessage(),\n                    code    : Exception.getCode()\n                });\n\n                self.add( Message, Parent );\n                self.fireEvent( 'addError', [ this, Message ] );\n            });\n\n            return this;\n        },\n\n        /**\n         * Add an information message\n         *\n         * @method qui/controls/messages/Handler#addInformation\n         * @param {String} str - Message text\n         * @param {DOMNode} Parent - [optional] Parent Object, where to display the message\n         * @return {this}\n         */\n        addInformation : function(str, Parent)\n        {\n            var self = this;\n\n            require(['qui/controls/messages/Information'], function(Information)\n            {\n                var Message = new Information({\n                    message : str\n                });\n\n                self.add( Message, Parent );\n                self.fireEvent( 'addInformation', [ this, Message ] );\n            });\n\n            return this;\n        },\n\n        /**\n         * Add a success message\n         *\n         * @method qui/controls/messages/Handler#addSuccess\n         * @param {String} str - Message text\n         * @param {DOMNode} Parent - [optional] Parent Object, where to display the message\n         * @return {this}\n         */\n        addSuccess : function(str, Parent)\n        {\n            var self = this;\n\n            require(['qui/controls/messages/Success'], function(Success)\n            {\n                var Message = new Success({\n                    message : str\n                });\n\n                self.add( Message, Parent );\n                self.fireEvent( 'addSuccess', [ this, Message ] );\n            });\n\n            return this;\n        },\n\n        /**\n         * Switch a filter status by its click event\n         *\n         * @method qui/controls/messages/Handler#$switchFilterStatus\n         * @param {DOMEvent} event\n         */\n        $switchFilterStatus : function(event)\n        {\n            var Target = event.target,\n                filter = false,\n                active = Target.hasClass( 'message-handler-container-buttons-active' );\n\n            if ( Target.hasClass( 'success' ) )\n            {\n                filter = 'success';\n            } else if ( Target.hasClass( 'information' ) )\n            {\n                filter = 'information';\n            } else if ( Target.hasClass( 'attention' ) )\n            {\n                filter = 'attention';\n            } else if ( Target.hasClass( 'error' ) )\n            {\n                filter = 'error';\n            } else\n            {\n                return;\n            }\n\n            if ( active )\n            {\n                Target.removeClass( 'message-handler-container-buttons-active' );\n            } else\n            {\n                Target.addClass( 'message-handler-container-buttons-active' );\n            }\n\n            this.$filter[ filter ] = active ? false : true;\n            this.filter();\n        },\n\n        /**\n         * event : on message destroy\n         *\n         * @method qui/controls/messages/Handler#$onMessageDestroy\n         * @param {qui/controls/messages/Message} Message\n         */\n        $onMessageDestroy : function(Message)\n        {\n            var i, len;\n            var messages = [];\n\n            for ( i = 0, len = this.$messages.length; i < len; i++ )\n            {\n                if ( this.$messages[ i ] != Message ) {\n                    messages.push( this.$messages[ i ] );\n                }\n            }\n\n            this.$messages = messages;\n            this.save();\n        },\n\n        /**\n         * Calc the dimensions for the message handler display\n         *\n         * @method qui/controls/messages/Handler#$onResize\n         */\n        $onResize : function()\n        {\n            var Container = document.getElement( '.message-handler-container' );\n\n            if ( !Container ) {\n                return;\n            }\n\n            var height;\n            var Parent = this.$Parent;\n\n            if ( !Parent ) {\n                Parent = document.body;\n            }\n\n            var size = Parent.getSize(),\n\n                Title = Container.getElement(\n                    '.message-handler-container-title'\n                ),\n\n                Buttons = Container.getElement(\n                    '.message-handler-container-buttons'\n                ),\n\n                Messages = Container.getElement(\n                    '.message-handler-container-messages'\n                ),\n\n                Close = Container.getElement(\n                    '.message-handler-container-close'\n                );\n\n            // calc\n            height = size.y - Title.getSize().y -\n                     Buttons.getSize().y - Close.getSize().y;\n\n            Messages.setStyles({\n               height : height\n            });\n        }\n    });\n});\n"]}