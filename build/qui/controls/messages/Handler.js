define("qui/classes/DOM",[],function(){"use strict";return window.$quistorage={},new Class({Implements:[Options,Events],Type:"qui/classes/DOM",options:{},$uid:null,initialize:function(e){e=e||{},e.events&&(this.addEvents(e.events),delete e.events),e.methods&&(Object.append(this,e.methods),delete e.methods),this.setAttributes(e),this.fireEvent("init",[this])},$family:function(){return"undefined"!=typeof this.Type?this.Type:typeOf(this)},getId:function(){return this.$uid||(this.$uid=String.uniqueID()),this.$uid},getType:function(){return typeOf(this)},setAttribute:function(e,t){if(this.fireEvent("setAttribute",[e,t]),"undefined"!=typeof this.options[e])return this.options[e]=t,this;var n=Slick.uidOf(this);return"undefined"==typeof window.$quistorage[n]&&(window.$quistorage[n]={}),window.$quistorage[n][e]=t,this},destroy:function(){this.fireEvent("destroy",[this]);var e=Slick.uidOf(this);e in window.$quistorage&&delete window.$quistorage[e],this.removeEvents()},setOptions:function(e){this.setAttributes(e)},setAttributes:function(e){e=e||{};for(var t in e)e.hasOwnProperty(t)&&this.setAttribute(t,e[t]);return this},getAttribute:function(e){if(e in this.options)return this.options[e];var t=Slick.uidOf(this);return"undefined"==typeof window.$quistorage[t]?!1:"undefined"!=typeof window.$quistorage[t][e]?window.$quistorage[t][e]:!1},getAllAttributes:function(){return this.getAttributes()},getAttributes:function(){return this.options},getStorageAttributes:function(){var e=Slick.uidOf(this);return e in window.$quistorage?window.$quistorage[e]:{}},existAttribute:function(e){if("undefined"!=typeof this.options[e])return!0;var t=Slick.uidOf(this);return window.$quistorage[t]&&window.$quistorage[t][e]},getEvents:function(e){return"undefined"==typeof this.$events?!1:"undefined"!=typeof this.$events[e]?this.$events[e]:!1}})}),function(){var e=this.ElementQueries=function(){function t(e){e||(e=document.documentElement);var t=getComputedStyle(e,"fontSize");return parseFloat(t)||16}function n(e,n){var i=n.replace(/[0-9]*/,"");switch(n=parseFloat(n),i){case"px":return n;case"em":return n*t(e);case"rem":return n*t();case"vw":return n*document.documentElement.clientWidth/100;case"vh":return n*document.documentElement.clientHeight/100;case"vmin":case"vmax":var s=document.documentElement.clientWidth/100,r=document.documentElement.clientHeight/100,o=Math["vmin"===i?"min":"max"];return n*o(s,r);default:return n}}function i(e){this.element=e,this.options={};var t,i,s,r,o,a,u,c=0,l=0;this.addOption=function(e){var t=[e.mode,e.property,e.value].join(",");this.options[t]=e};var h=["min-width","min-height","max-width","max-height"];this.call=function(){c=this.element.offsetWidth,l=this.element.offsetHeight,o={};for(t in this.options)this.options.hasOwnProperty(t)&&(i=this.options[t],s=n(this.element,i.value),r="width"==i.property?c:l,u=i.mode+"-"+i.property,a="","min"==i.mode&&r>=s&&(a+=i.value),"max"==i.mode&&s>=r&&(a+=i.value),o[u]||(o[u]=""),a&&-1===(" "+o[u]+" ").indexOf(" "+a+" ")&&(o[u]+=" "+a));for(var e in h)o[h[e]]?this.element.setAttribute(h[e],o[h[e]].substr(1)):this.element.removeAttribute(h[e])}}function s(e,t){e.elementQueriesSetupInformation?e.elementQueriesSetupInformation.addOption(t):(e.elementQueriesSetupInformation=new i(e),e.elementQueriesSetupInformation.addOption(t),e.elementQueriesSensor=new ResizeSensor(e,function(){e.elementQueriesSetupInformation.call()})),e.elementQueriesSetupInformation.call(),this.withTracking&&u.push(e)}function r(e,t,n,i){var r;if(document.querySelectorAll&&(r=document.querySelectorAll.bind(document)),r||"undefined"==typeof $$||(r=$$),r||"undefined"==typeof jQuery||(r=jQuery),!r)throw"No document.querySelectorAll, jQuery or Mootools's $$ found.";for(var o=r(e),a=0,u=o.length;u>a;a++)s(o[a],{mode:t,property:n,value:i})}function o(e){var t;for(e=e.replace(/'/g,'"');null!==(t=c.exec(e));)5<t.length&&r(t[1]||t[5],t[2],t[3],t[4])}function a(e){if(e){if("string"==typeof e)return e=e.toLowerCase(),void((-1!==e.indexOf("min-width")||-1!==e.indexOf("max-width"))&&o(e));for(var t="",n=0,i=e.length;i>n;n++)1===e[n].type?(t=e[n].selectorText||e[n].cssText,-1!==t.indexOf("min-height")||-1!==t.indexOf("max-height")?o(t):(-1!==t.indexOf("min-width")||-1!==t.indexOf("max-width"))&&o(t)):4===e[n].type&&a(e[n].cssRules||e[n].rules)}}this.sheetList={},this.withTracking=!1;var u=[],c=/,?([^,\n]*)\[[\s\t]*(min|max)-(width|height)[\s\t]*[~$\^]?=[\s\t]*"([^"]*)"[\s\t]*]([^\n\s\{]*)/gim;this.init=function(e){var t,n,i;for(this.withTracking=e,t=0,n=document.styleSheets.length;n>t;t++)try{if(i=document.styleSheets[t],"string"==typeof i.href&&"undefined"!=typeof this.sheetList[i.href])continue;a(i.cssText||i.cssRules||i.rules),this.sheetList[i.href]=!0}catch(s){}},this.update=function(e){this.withTracking=e,this.init()},this.detach=function(){if(!this.withTracking)throw"withTracking is not enabled. We can not detach elements since we don not store it.Use ElementQueries.withTracking = true; before domready.";for(var t;t=u.pop();)e.detach(t);u=[]}};e.update=function(t){e.instance.update(t)},e.detach=function(e){e.elementQueriesSetupInformation?(e.elementQueriesSensor.detach(),delete e.elementQueriesSetupInformation,delete e.elementQueriesSensor,console.log("detached")):console.log("detached already",e)},e.withTracking=!1,e.init=function(){e.instance||(e.instance=new e),e.instance.init(e.withTracking)};var t=function(e){if(document.addEventListener&&document.addEventListener("DOMContentLoaded",e,!1),/KHTML|WebKit|iCab/i.test(navigator.userAgent))var t=setInterval(function(){/loaded|complete/i.test(document.readyState)&&(e(),clearInterval(t))},10);window.onload=e};window.addEventListener?window.addEventListener("load",e.init,!1):window.attachEvent("onload",e.init),t(e.init)}(),define("qui/lib/element-query/ElementQuery",function(){}),function(){this.ResizeSensor=function(e,t){function n(){this.q=[],this.add=function(e){this.q.push(e)};var e,t;this.call=function(){for(e=0,t=this.q.length;t>e;e++)this.q[e].call()}}function i(e,t){return e.currentStyle?e.currentStyle[t]:window.getComputedStyle?window.getComputedStyle(e,null).getPropertyValue(t):e.style[t]}function s(e,t){if(e.resizedAttached){if(e.resizedAttached)return void e.resizedAttached.add(t)}else e.resizedAttached=new n,e.resizedAttached.add(t);e.resizeSensor=document.createElement("div"),e.resizeSensor.className="resize-sensor";var s="position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: scroll; z-index: -1; visibility: hidden;",r="position: absolute; left: 0; top: 0;";e.resizeSensor.style.cssText=s,e.resizeSensor.innerHTML='<div class="resize-sensor-expand" style="'+s+'"><div style="'+r+'"></div></div><div class="resize-sensor-shrink" style="'+s+'"><div style="'+r+' width: 200%; height: 200%"></div></div>',e.appendChild(e.resizeSensor),{fixed:1,absolute:1}[i(e,"position")]||(e.style.position="relative");var o,a,u=e.resizeSensor.childNodes[0],c=u.childNodes[0],l=e.resizeSensor.childNodes[1],h=(l.childNodes[0],function(){c.style.width=u.offsetWidth+10+"px",c.style.height=u.offsetHeight+10+"px",u.scrollLeft=u.scrollWidth,u.scrollTop=u.scrollHeight,l.scrollLeft=l.scrollWidth,l.scrollTop=l.scrollHeight,o=e.offsetWidth,a=e.offsetHeight});h();var d=function(){e.resizedAttached&&e.resizedAttached.call()},f=function(e,t,n){e.attachEvent?e.attachEvent("on"+t,n):e.addEventListener(t,n)};f(u,"scroll",function(){(e.offsetWidth>o||e.offsetHeight>a)&&d(),h()}),f(l,"scroll",function(){(e.offsetWidth<o||e.offsetHeight<a)&&d(),h()})}if("[object Array]"===Object.prototype.toString.call(e)||"undefined"!=typeof jQuery&&e instanceof jQuery||"undefined"!=typeof Elements&&e instanceof Elements)for(var r=0,o=e.length;o>r;r++)s(e[r],t);else s(e,t);this.detach=function(){ResizeSensor.detach(e)}},this.ResizeSensor.detach=function(e){e.resizeSensor&&(e.removeChild(e.resizeSensor),delete e.resizeSensor,delete e.resizedAttached)}}(),define("qui/lib/element-query/ResizeSensor",function(){}),define("qui/classes/Controls",["require","qui/classes/DOM","qui/lib/element-query/ElementQuery","qui/lib/element-query/ResizeSensor"],function(e,t){"use strict";return new Class({Extends:t,Type:"qui/classes/Controls",initialize:function(){this.$controls={},this.$cids={},this.$types={},this.ElementQueries=new ElementQueries},get:function(e){return"undefined"==typeof this.$controls[e]?[]:this.$controls[e]},getById:function(e){return e in this.$cids?this.$cids[e]:!1},getByType:function(e){return e in this.$types?this.$types[e]:[]},loadType:function(t,n){t.match(/qui\//)||(t="qui/"+t),e([t],n)},isControl:function(e){return"undefined"!=typeof e&&e?"undefined"!=typeof e.getType:!1},add:function(e){var t=this,n=e.getAttribute("name"),i=typeOf(e);n&&""!==n||(n="#unknown"),"undefined"==typeof this.$controls[n]&&(this.$controls[n]=[]),"undefined"==typeof this.$types[i]&&(this.$types[i]=[]),this.$controls[n].push(e),this.$types[i].push(e),this.$cids[e.getId()]=e,e.addEvent("onDestroy",function(){t.destroy(e)})},destroy:function(e){var t=e.getAttribute("name"),n=typeOf(e),i=e.getId();t&&""!==t||(t="#unknown"),"undefined"!=typeof this.$cids[i]&&delete this.$cids[i];var s,r,o=[];if("undefined"!=typeof this.$controls[t]){for(s=0,r=this.$controls[t].length;r>s;s++)i!==this.$controls[t][s].getId()&&o.push(this.$controls[t][s]);this.$controls[t]=o,o.length||delete this.$controls[t]}if(o=[],"undefined"!=typeof this.$types[n])for(s=0,r=this.$types[n].length;r>s;s++)i!==this.$types[n][s].getId()&&o.push(this.$types[n][s]);this.$types[n]=o}})}),define("qui/classes/Windows",["require","qui/classes/DOM"],function(e,t){"use strict";return new Class({Extends:t,Type:"qui/classes/Windows",Binds:["$onWindowOpen","$onWindowClose","$onWindowDestroy"],initialize:function(){this.$windows=[],this.$currentWindow=null},register:function(e){e.addEvents({onOpenBegin:this.$onWindowOpen,onDestroy:this.$onWindowDestroy,onClose:this.$onWindowClose}),this.$windows.push(e)},$onWindowOpen:function(e){if(this.$currentWindow){var t=this.$currentWindow.getElm().getStyle("zIndex");e.Background.getElm().setStyle("zIndex",t+1),e.getElm().setStyle("zIndex",t+2)}this.$currentWindow=e},$onWindowDestroy:function(e){this.$currentWindow==e&&(this.$currentWindow=null)},$onWindowClose:function(e){this.$currentWindow==e&&(this.$currentWindow=null)},openAlert:function(e){return this.createAlert(e).then(function(e){return e.open(),e})},openConfirm:function(e){return this.createConfirm(e).then(function(e){return e.open(),e})},openPopup:function(e){return this.createPopup(e).then(function(e){return e.open(),e})},openPrompt:function(e){return this.createPrompt(e).then(function(e){return e.open(),e})},openSubmit:function(e){return this.createAlert(e).then(function(e){return e.open(),e})},createAlert:function(t){return new Promise(function(n,i){e(["qui/controls/windows/Alert"],function(e){n(new e(t))},i)})},createConfirm:function(t){return new Promise(function(n,i){e(["qui/controls/windows/Confirm"],function(e){n(new e(t))},i)})},createPopup:function(t){return new Promise(function(n,i){e(["qui/controls/windows/Popup"],function(e){n(new e(t))},i)})},createPrompt:function(t){return new Promise(function(n,i){e(["qui/controls/windows/Prompt"],function(e){n(new e(t))},i)})},createSubmit:function(t){return new Promise(function(n,i){e(["qui/controls/windows/Submit"],function(e){n(new e(t))},i)})}})});var needle=["qui/classes/DOM"];("undefined"==typeof window.localStorage||"undefined"==typeof window.sessionStorage)&&needle.push("qui/classes/storage/Polyfill"),define("qui/classes/storage/Storage",needle,function(e){"use strict";return new Class({Extends:e,Type:"qui/classes/storage/Storage",$data:{},set:function(e,t){try{window.localStorage.setItem(e,t)}catch(n){this.$data[e]=t}},get:function(e){try{return window.localStorage.getItem(e)}catch(t){}return"undefined"!=typeof this.$data[e]?this.$data[e]:null},remove:function(e){try{window.localStorage.removeItem(e)}catch(t){}"undefined"!=typeof this.$data[e]&&delete this.$data[e]},clear:function(){this.$data={};try{window.localStorage.clear()}catch(e){}}})}),function e(t,n,i){function s(o,a){if(!n[o]){if(!t[o]){var u="function"==typeof require&&require;if(!a&&u)return u(o,!0);if(r)return r(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,i)}return n[o].exports}for(var r="function"==typeof require&&require,o=0;o<i.length;o++)s(i[o]);return s}({1:[function(e,t){t.exports=function(){var t=e("events"),n={};return n.createDomain=n.create=function(){function e(e){n.emit("error",e)}var n=new t.EventEmitter;return n.add=function(t){t.on("error",e)},n.remove=function(t){t.removeListener("error",e)},n.bind=function(t){return function(){var n=Array.prototype.slice.call(arguments);try{t.apply(null,n)}catch(i){e(i)}}},n.intercept=function(t){return function(n){if(n)e(n);else{var i=Array.prototype.slice.call(arguments,1);try{t.apply(null,i)}catch(n){e(n)}}}},n.run=function(t){try{t()}catch(n){e(n)}return this},n.dispose=function(){return this.removeAllListeners(),this},n.enter=n.exit=function(){return this},n},n}.call(this)},{events:2}],2:[function(e,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(e){return"function"==typeof e}function s(e){return"number"==typeof e}function r(e){return"object"==typeof e&&null!==e}function o(e){return void 0===e}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!s(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,s,a,u,c;if(this._events||(this._events={}),"error"===e&&(!this._events.error||r(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[e],o(n))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(s=arguments.length,a=new Array(s-1),u=1;s>u;u++)a[u-1]=arguments[u];n.apply(this,a)}else if(r(n)){for(s=arguments.length,a=new Array(s-1),u=1;s>u;u++)a[u-1]=arguments[u];for(c=n.slice(),s=c.length,u=0;s>u;u++)c[u].apply(this,a)}return!0},n.prototype.addListener=function(e,t){var s;if(!i(t))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,i(t.listener)?t.listener:t),this._events[e]?r(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,r(this._events[e])&&!this._events[e].warned){var s;s=o(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,s&&s>0&&this._events[e].length>s&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())}return this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){function n(){this.removeListener(e,n),s||(s=!0,t.apply(this,arguments))}if(!i(t))throw TypeError("listener must be a function");var s=!1;return n.listener=t,this.on(e,n),this},n.prototype.removeListener=function(e,t){var n,s,o,a;if(!i(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],o=n.length,s=-1,n===t||i(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(r(n)){for(a=o;a-->0;)if(n[a]===t||n[a].listener&&n[a].listener===t){s=a;break}if(0>s)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(s,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],i(n))this.removeListener(e,n);else for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?i(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.listenerCount=function(e,t){var n;return n=e._events&&e._events[t]?i(e._events[t])?1:e._events[t].length:0}},{}],3:[function(e,t){function n(){if(!o){o=!0;for(var e,t=r.length;t;){e=r,r=[];for(var n=-1;++n<t;)e[n]();t=r.length}o=!1}}function i(){}var s=t.exports={},r=[],o=!1;s.nextTick=function(e){r.push(e),o||setTimeout(n,0)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=i,s.addListener=i,s.once=i,s.off=i,s.removeListener=i,s.removeAllListeners=i,s.emit=i,s.binding=function(){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},{}],4:[function(e,t){"use strict";function n(){}function i(e){try{return e.then}catch(t){return g=t,p}}function s(e,t){try{return e(t)}catch(n){return g=n,p}}function r(e,t,n){try{e(t,n)}catch(i){return g=i,p}}function o(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._32=0,this._8=null,this._89=[],e!==n&&f(e,this)}function a(e,t,i){return new e.constructor(function(s,r){var a=new o(n);a.then(s,r),u(e,new d(t,i,a))})}function u(e,t){for(;3===e._32;)e=e._8;return 0===e._32?void e._89.push(t):void m(function(){var n=1===e._32?t.onFulfilled:t.onRejected;if(null===n)return void(1===e._32?c(t.promise,e._8):l(t.promise,e._8));var i=s(n,e._8);i===p?l(t.promise,g):c(t.promise,i)})}function c(e,t){if(t===e)return l(e,new TypeError("A promise cannot be resolved with itself."));if(t&&("object"==typeof t||"function"==typeof t)){var n=i(t);if(n===p)return l(e,g);if(n===e.then&&t instanceof o)return e._32=3,e._8=t,void h(e);if("function"==typeof n)return void f(n.bind(t),e)}e._32=1,e._8=t,h(e)}function l(e,t){e._32=2,e._8=t,h(e)}function h(e){for(var t=0;t<e._89.length;t++)u(e,e._89[t]);e._89=null}function d(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function f(e,t){var n=!1,i=r(e,function(e){n||(n=!0,c(t,e))},function(e){n||(n=!0,l(t,e))});n||i!==p||(n=!0,l(t,g))}var m=e("asap/raw"),g=null,p={};t.exports=o,o._83=n,o.prototype.then=function(e,t){if(this.constructor!==o)return a(this,e,t);var i=new o(n);return u(this,new d(e,t,i)),i}},{"asap/raw":8}],5:[function(e,t){"use strict";function n(e){var t=new i(i._83);return t._32=1,t._8=e,t}{var i=e("./core.js");e("asap/raw")}t.exports=i;var s=n(!0),r=n(!1),o=n(null),a=n(void 0),u=n(0),c=n("");i.resolve=function(e){if(e instanceof i)return e;if(null===e)return o;if(void 0===e)return a;if(e===!0)return s;if(e===!1)return r;if(0===e)return u;if(""===e)return c;if("object"==typeof e||"function"==typeof e)try{var t=e.then;if("function"==typeof t)return new i(t.bind(e))}catch(l){return new i(function(e,t){t(l)})}return n(e)},i.all=function(e){var t=Array.prototype.slice.call(e);return new i(function(e,n){function s(o,a){if(a&&("object"==typeof a||"function"==typeof a)){if(a instanceof i&&a.then===i.prototype.then){for(;3===a._32;)a=a._8;return 1===a._32?s(o,a._8):(2===a._32&&n(a._8),void a.then(function(e){s(o,e)},n))}var u=a.then;if("function"==typeof u){var c=new i(u.bind(a));return void c.then(function(e){s(o,e)},n)}}t[o]=a,0===--r&&e(t)}if(0===t.length)return e([]);for(var r=t.length,o=0;o<t.length;o++)s(o,t[o])})},i.reject=function(e){return new i(function(t,n){n(e)})},i.race=function(e){return new i(function(t,n){e.forEach(function(e){i.resolve(e).then(t,n)})})},i.prototype["catch"]=function(e){return this.then(null,e)}},{"./core.js":4,"asap/raw":8}],6:[function(e,t){"use strict";function n(){if(a.length)throw a.shift()}function i(e){var t;t=o.length?o.pop():new s,t.task=e,r(t)}function s(){this.task=null}var r=e("./raw"),o=[],a=[],u=r.makeRequestCallFromTimer(n);t.exports=i,s.prototype.call=function(){try{this.task.call()}catch(e){i.onerror?i.onerror(e):(a.push(e),u())}finally{this.task=null,o[o.length]=this}}},{"./raw":7}],7:[function(e,t){(function(e){"use strict";function n(e){a.length||(o(),u=!0),a[a.length]=e}function i(){for(;c<a.length;){var e=c;if(c+=1,a[e].call(),c>l){for(var t=0,n=a.length-c;n>t;t++)a[t]=a[t+c];a.length-=c,c=0}}a.length=0,c=0,u=!1}function s(e){var t=1,n=new h(e),i=document.createTextNode("");return n.observe(i,{characterData:!0}),function(){t=-t,i.data=t}}function r(e){return function(){function t(){clearTimeout(n),clearInterval(i),e()}var n=setTimeout(t,0),i=setInterval(t,50)}}t.exports=n;var o,a=[],u=!1,c=0,l=1024,h=e.MutationObserver||e.WebKitMutationObserver;o="function"==typeof h?s(i):r(i),n.requestFlush=o,n.makeRequestCallFromTimer=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],8:[function(e,t){(function(n){"use strict";function i(e){u.length||(r(),c=!0),u[u.length]=e}function s(){for(;l<u.length;){var e=l;if(l+=1,u[e].call(),l>h){for(var t=0,n=u.length-l;n>t;t++)u[t]=u[t+l];u.length-=l,l=0}}u.length=0,l=0,c=!1}function r(){var t=n.domain;t&&(o||(o=e("domain")),o.active=n.domain=null),c&&a?setImmediate(s):n.nextTick(s),t&&(o.active=n.domain=t)}var o,a="function"==typeof setImmediate;t.exports=i;var u=[],c=!1,l=0,h=1024;i.requestFlush=r}).call(this,e("_process"))},{_process:3,domain:1}],9:[function(){"function"!=typeof Promise.prototype.done&&(Promise.prototype.done=function(){var e=arguments.length?this.then.apply(this,arguments):this;e.then(null,function(e){setTimeout(function(){throw e},0)})})},{}],10:[function(e){e("asap");"undefined"==typeof Promise&&(Promise=e("./lib/core.js"),e("./lib/es6-extensions.js")),e("./polyfill-done.js")},{"./lib/core.js":4,"./lib/es6-extensions.js":5,"./polyfill-done.js":9,asap:6}]},{},[10]),define("qui/lib/polyfills/Promise",function(){}),define("qui/classes/QUI",["require","qui/classes/DOM","qui/classes/Controls","qui/classes/Windows","qui/classes/storage/Storage","qui/lib/polyfills/Promise"],function(e,t,n,i,s){"use strict";return new Class({Extends:t,Type:"qui/classes/QUI",initialize:function(t){if(this.setAttributes({debug:!1,fetchErrors:!0}),this.parent(t),this.getAttribute("fetchErrors")){var r=this;e.onError=function(e,t){r.trigger("ERROR :"+e+"\nRequire :"+t)},window.onerror=this.trigger.bind(this)}this.Controls=new n,this.Windows=new i,this.Storage=new s,this.MessageHandler=null},namespace:function(){for(var e,t=arguments,n=this,i=0,s=0,r=t.length,o=null,a=null;r>i;i+=1)for(o=t[i].split("."),e=o.length,s=0;e>s;s+=1)a=o[s],n[a]=n[a]||{},n=n[a];return n},parse:function(t,n){return new Promise(function(i,s){if("undefined"==typeof t&&(t=document.body),"element"!==typeOf(t))return i(),void("undefined"!=typeof n&&n());var r=document.id(t).getElements("[data-qui]"),o=r.map(function(e){return e.get("data-qui")});o=o.filter(function(e){return""!==e}).clean(),e(o,function(){var e,t,s,a,u={TEXTAREA:!0,INPUT:!0};for(e=0,t=o.length;t>e;e++)s=arguments[e],a=r[e],a.get("data-quiid")||("undefined"!=typeof u[a.nodeName]||""!==a.get("html").trim()?(new s).imports(a):(new s).replaces(a));i(),"undefined"!=typeof n&&n()},function(e){s(e)})})},triggerError:function(e){return this.trigger(e.getMessage(),"",0)},trigger:function(e,t,n){return this.fireEvent("error",[e,t,n]),this},getMessageHandler:function(t){var n=this;return new Promise(function(i,s){return"undefined"==typeof n.$execGetMessageHandler||n.MessageHandler?(n.$execGetMessageHandler=!0,n.MessageHandler?("function"===typeOf(t)&&t(n.MessageHandler),void i(n.MessageHandler)):void e(["qui/controls/messages/Handler"],function(e){n.MessageHandler=new e,"function"===typeOf(t)&&t(n.MessageHandler),i(n.MessageHandler)},s)):(n.$execGetMessageHandler=!0,void function(){n.getMessageHandler(t)}.delay(20,n))})},getControls:function(e){this.Controls&&e(this.Controls)}})}),define("qui/QUI",["qui/classes/QUI"],function(e){"use strict";return"undefined"==typeof window.QUI&&(window.QUI=new e),document.fireEvent("qui-loaded"),document.addEvent("domready",function(){window.QUI.parse(document.body)}),window.QUI}),define("qui/classes/Locale",["qui/classes/DOM"],function(e){"use strict";return new Class({Extends:e,Type:"qui/classes/Locale",current:"en",langs:{},no_translation:!1,initialize:function(e){this.parent(e)},setCurrent:function(e){this.current=e},getCurrent:function(){return this.current},getGroups:function(){return this.current in this.langs?Object.keys(this.langs[this.current]):[]},set:function(e,t,n,i){if(this.langs[e]||(this.langs[e]={}),this.langs[e][t]||(this.langs[e][t]={}),"undefined"!=typeof i)return this.langs[e][t][n]=i,this;var s=this.langs[e][t];for(var r in n)n.hasOwnProperty(r)&&(s[r]=n[r]);this.langs[e][t]=s},get:function(e,t,n){if("undefined"==typeof n)return this.$get(e,t);var i=this.$get(e,t);for(e in n)n.hasOwnProperty(e)&&(i=i.replace("["+e+"]",n[e]));return i},$get:function(e,t){return this.no_translation?"["+e+"] "+t:this.langs[this.current]&&this.langs[this.current][e]&&this.langs[this.current][e][t]?this.langs[this.current][e][t]:this.langs[this.current]&&this.langs[this.current][e]&&"undefined"==typeof t?this.langs[this.current][e]:(this.fireEvent("error",["No translation found for ["+e+"] "+t,this]),"["+e+"] "+t)},exists:function(e,t){return this.langs[this.current]&&this.langs[this.current][e]&&this.langs[this.current][e][t]?!0:this.langs[this.current]&&this.langs[this.current][e]&&"undefined"==typeof t?!0:!1}})}),define("qui/Locale",["qui/classes/Locale"],function(e){"use strict";return"undefined"==typeof window.QUILocale&&(window.QUILocale=new e),window.QUILocale}),define("qui/lib/require-css/normalize",[],function(){function e(e,i,s){if(e.match(a)||e.match(o))return e;e=r(e);var u=s.match(o),c=i.match(o);return!c||u&&u[1]==c[1]&&u[2]==c[2]?n(t(e,i),s):t(e,i)}function t(e,t){if("./"==e.substr(0,2)&&(e=e.substr(2)),e.match(a)||e.match(o))return e;var n=t.split("/"),i=e.split("/");for(n.pop();curPart=i.shift();)".."==curPart?n.pop():n.push(curPart);return n.join("/")}function n(e,t){var n=t.split("/");for(n.pop(),t=n.join("/")+"/",i=0;t.substr(i,1)==e.substr(i,1);)i++;for(;"/"!=t.substr(i,1);)i--;t=t.substr(i+1),e=e.substr(i+1),n=t.split("/");var s=e.split("/");for(out="";n.shift();)out+="../";for(;curPart=s.shift();)out+=curPart+"/";return out.substr(0,out.length-1)}var s=/([^:])\/+/g,r=function(e){return e.replace(s,"$1/")},o=/[^\:\/]*:\/\/([^\/])*/,a=/^(\/|data:)/,u=function(t,n,i){n=r(n),i=r(i);for(var s,o,t,a=/@import\s*("([^"]*)"|'([^']*)')|url\s*\(\s*(\s*"([^"]*)"|'([^']*)'|[^\)]*\s*)\s*\)/gi;s=a.exec(t);){o=s[3]||s[2]||s[5]||s[6]||s[4];var u;u=e(o,n,i);var c=s[5]||s[6]?1:0;t=t.substr(0,a.lastIndex-o.length-c-1)+u+t.substr(a.lastIndex-c-1),a.lastIndex=a.lastIndex+(u.length-o.length)}return t};return u.convertURIBase=e,u.absoluteURI=t,u.relativeURI=n,u}),define("qui/lib/require-css/css",[],function(){if("undefined"==typeof window)return{load:function(e,t,n){n()}};var e=document.getElementsByTagName("head")[0],t=window.navigator.userAgent.match(/Trident\/([^ ;]*)|AppleWebKit\/([^ ;]*)|Opera\/([^ ;]*)|rv\:([^ ;]*)(.*?)Gecko\/([^ ;]*)|MSIE\s([^ ;]*)/)||0,n=!1,i=!0;t[1]||t[7]?n=parseInt(t[1])<6||parseInt(t[7])<=9:t[2]?i=!1:t[4]&&(n=parseInt(t[4])<18);var s={};s.pluginBuilder="./css-builder";var r,o,a,u=function(){r=document.createElement("style"),e.appendChild(r),o=r.styleSheet||r.sheet},c=0,l=[],h=function(e){c++,32==c&&(u(),c=0),o.addImport(e),r.onload=d},d=function(){a();var e=l.shift();return e?(a=e[1],void h(e[0])):void(a=null)},f=function(e,t){if(o&&o.addImport||u(),o&&o.addImport)a?l.push([e,t]):(h(e),a=t);else{r.textContent='@import "'+e+'";';var n=setInterval(function(){try{r.sheet.cssRules,clearInterval(n),t()}catch(e){}},10)}},m=function(t,n){var s=document.createElement("link");if(s.type="text/css",s.rel="stylesheet",i)s.onload=function(){s.onload=function(){},setTimeout(n,7)};else var r=setInterval(function(){for(var e=0;e<document.styleSheets.length;e++){var t=document.styleSheets[e];if(t.href==s.href)return clearInterval(r),n()}},10);s.href=t,e.appendChild(s)};return s.normalize=function(e,t){return".css"==e.substr(e.length-4,4)&&(e=e.substr(0,e.length-4)),t(e)},s.load=function(e,t,i){(n?f:m)(t.toUrl(e+".css"),i)},s}),define("qui/lib/require-css/css!qui/controls/Control",[],function(){}),define("qui/controls/Control",["qui/QUI","qui/Locale","qui/classes/DOM","css!qui/controls/Control.css"],function(e,t,n){"use strict";return new Class({Extends:n,Type:"qui/controls/Control",$Parent:!1,options:{name:""},initialize:function(t){this.parent(t),e.Controls.add(this),e.Controls.ElementQueries.update()},create:function(){return this.$Elm?this.$Elm:(this.$Elm=new Element("div.qui-control"),this.$Elm.set("data-quiid",this.getId()),this.$Elm)},destroy:function(){this.fireEvent("destroy",[this]),"undefined"!=typeof this.$Elm&&this.$Elm&&this.$Elm.destroy(),this.$Elm=null;var e=Slick.uidOf(this);e in window.$quistorage&&delete window.$quistorage[e],this.removeEvents()},inject:function(t,n){return this.fireEvent("drawBegin",[this]),"undefined"!=typeof this.$Elm&&this.$Elm||(this.$Elm=this.create()),"undefined"!=typeof e&&"undefined"!=typeof e.Controls&&e.Controls.isControl(t)?t.appendChild(this):this.$Elm.inject(t,n),this.$Elm.set("data-quiid",this.getId()),this.fireEvent("inject",[this]),this},imports:function(e){this.$Elm=e;for(var t,n,i,s,r=e.attributes,o=0,a=r.length;a>o;o++)t=r[o],n=t.name,n.match("data-qui-options-")&&(i=t.value,s=Number.from(i),"number"===typeOf(s)&&(i=s),this.setAttribute(n.replace("data-qui-options-",""),i));return this.$Elm.set("data-quiid",this.getId()),this.fireEvent("import",[this,e]),this},replaces:function(e){return this.$Elm?this.$Elm:("undefined"!=typeof e.styles&&this.setAttribute("styles",e.styles),this.$Elm=this.create(),this.$Elm.set("data-quiid",this.getId()),this.$Elm.set("data-qui",e.get("data-qui")),e.getParent()&&this.$Elm.replaces(e),this)},serialize:function(){return{attributes:this.getAttributes(),type:this.getType()}},unserialize:function(e){e.attributes&&this.setAttributes(e.attributes)},getElm:function(){return"undefined"!=typeof this.$Elm&&this.$Elm||this.create(),this.$Elm},getParent:function(){return this.$Parent||!1},setParent:function(e){return this.$Parent=e,this},getPath:function(){var e="/"+this.getAttribute("name"),t=this.getParent();return t?t.getPath()+e:e},hide:function(){return this.$Elm&&this.$Elm.setStyle("display","none"),this},show:function(){return this.$Elm&&this.$Elm.setStyle("display",null),this},isHidden:function(){return this.$Elm?"none"==this.$Elm.getStyle("display"):!0},highlight:function(){return this.fireEvent("highlight",[this]),this},normalize:function(){return this.fireEvent("normalize",[this]),this},focus:function(){if(this.$Elm)try{this.$Elm.focus()}catch(e){}return this},resize:function(){this.fireEvent("resize",[this])},openSheet:function(e,n){var i=this;n=n||{},n=Object.merge({buttons:!0},n);var s=new Element("div",{"class":"qui-sheet qui-box",html:'<div class="qui-sheet-content box"></div><div class="qui-sheet-buttons box"><div class="qui-sheet-buttons-back qui-button btn-white"><span>'+t.get("qui/controls/Control","btn.back")+"</span></div></div>",styles:{left:"-110%"}}).inject(this.$Elm);s.getElement(".qui-sheet-buttons-back").addEvent("click",function(){s.fireEvent("close")});var r=this.getElm().getStyle("overflow");s.addEvent("close",function(){i.getElm().setStyle("overflow",r),moofx(s).animate({left:"-100%",opacity:0},{equation:"ease-in",callback:function(){s.destroy()
}})});var o=s.getElement(".qui-sheet-content");return o.setStyles({height:s.getSize().y-50}),this.getElm().setStyle("overflow","hidden"),n.buttons===!1&&s.getElement(".qui-sheet-buttons").destroy(),moofx(s).animate({left:0},{equation:"ease-out",callback:function(){e(o,s)}}),s}})}),function(){var e=function(e){"use strict";function t(e){if(e.paused||e.ended||p)return!1;try{l.clearRect(0,0,u,a),l.drawImage(e,0,0,u,a)}catch(n){}w=setTimeout(t,T.duration,e),_.setIcon(c)}function n(e){var t=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;e=e.replace(t,function(e,t,n,i){return t+t+n+n+i+i});var n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return n?{r:parseInt(n[1],16),g:parseInt(n[2],16),b:parseInt(n[3],16)}:!1}function i(e,t){var n,i={};for(n in e)i[n]=e[n];for(n in t)i[n]=t[n];return i}function s(){return document.hidden||document.msHidden||document.webkitHidden||document.mozHidden}e=e?e:{};var r,o,a,u,c,l,h,d,f,m,g,p,v,y,w,b={bgColor:"#d00",textColor:"#fff",fontFamily:"sans-serif",fontStyle:"bold",type:"circle",position:"down",animation:"slide",elementId:!1};v={},v.ff=/firefox/i.test(navigator.userAgent.toLowerCase()),v.chrome=/chrome/i.test(navigator.userAgent.toLowerCase()),v.opera=/opera/i.test(navigator.userAgent.toLowerCase()),v.ie=/msie/i.test(navigator.userAgent.toLowerCase())||/trident/i.test(navigator.userAgent.toLowerCase()),v.supported=v.chrome||v.ff||v.opera;var E=[];g=function(){},d=p=!1;var x=function(){r=i(b,e),r.bgColor=n(r.bgColor),r.textColor=n(r.textColor),r.position=r.position.toLowerCase(),r.animation=T.types[""+r.animation]?r.animation:b.animation;var t=r.position.indexOf("up")>-1,s=r.position.indexOf("left")>-1;if(t||s)for(var d=0;d<T.types[""+r.animation].length;d++){var f=T.types[""+r.animation][d];t&&(f.y=f.y<.6?f.y-.4:f.y-2*f.y+(1-f.w)),s&&(f.x=f.x<.6?f.x-.4:f.x-2*f.x+(1-f.h)),T.types[""+r.animation][d]=f}r.type=q[""+r.type]?r.type:b.type;try{o=_.getIcon(),c=document.createElement("canvas"),h=document.createElement("img"),o.hasAttribute("href")?(h.setAttribute("src",o.getAttribute("href")),h.onload=function(){a=h.height>0?h.height:32,u=h.width>0?h.width:32,c.height=a,c.width=u,l=c.getContext("2d"),$.ready()}):(h.setAttribute("src",""),a=32,u=32,h.height=a,h.width=u,c.height=a,c.width=u,l=c.getContext("2d"),$.ready())}catch(m){throw"Error initializing favico. Message: "+m.message}},$={};$.ready=function(){d=!0,$.reset(),g()},$.reset=function(){d&&(E=[],f=!1,l.clearRect(0,0,u,a),l.drawImage(h,0,0,u,a),_.setIcon(c),window.clearTimeout(y),window.clearTimeout(w))},$.start=function(){if(d&&!m){var e=function(){f=E[0],m=!1,E.length>0&&(E.shift(),$.start())};if(E.length>0){m=!0;var t=function(){["type","animation","bgColor","textColor","fontFamily","fontStyle"].forEach(function(e){e in E[0].options&&(r[e]=E[0].options[e])}),T.run(E[0].options,function(){e()},!1)};f?T.run(f.options,function(){t()},!0):t()}}};var q={},S=function(e){return e.n="number"==typeof e.n?Math.abs(0|e.n):e.n,e.x=u*e.x,e.y=a*e.y,e.w=u*e.w,e.h=a*e.h,e.len=(""+e.n).length,e};q.circle=function(e){e=S(e);var t=!1;2===e.len?(e.x=e.x-.4*e.w,e.w=1.4*e.w,t=!0):e.len>=3&&(e.x=e.x-.65*e.w,e.w=1.65*e.w,t=!0),l.clearRect(0,0,u,a),l.drawImage(h,0,0,u,a),l.beginPath(),l.font=r.fontStyle+" "+Math.floor(e.h*(e.n>99?.85:1))+"px "+r.fontFamily,l.textAlign="center",t?(l.moveTo(e.x+e.w/2,e.y),l.lineTo(e.x+e.w-e.h/2,e.y),l.quadraticCurveTo(e.x+e.w,e.y,e.x+e.w,e.y+e.h/2),l.lineTo(e.x+e.w,e.y+e.h-e.h/2),l.quadraticCurveTo(e.x+e.w,e.y+e.h,e.x+e.w-e.h/2,e.y+e.h),l.lineTo(e.x+e.h/2,e.y+e.h),l.quadraticCurveTo(e.x,e.y+e.h,e.x,e.y+e.h-e.h/2),l.lineTo(e.x,e.y+e.h/2),l.quadraticCurveTo(e.x,e.y,e.x+e.h/2,e.y)):l.arc(e.x+e.w/2,e.y+e.h/2,e.h/2,0,2*Math.PI),l.fillStyle="rgba("+r.bgColor.r+","+r.bgColor.g+","+r.bgColor.b+","+e.o+")",l.fill(),l.closePath(),l.beginPath(),l.stroke(),l.fillStyle="rgba("+r.textColor.r+","+r.textColor.g+","+r.textColor.b+","+e.o+")","number"==typeof e.n&&e.n>999?l.fillText((e.n>9999?9:Math.floor(e.n/1e3))+"k+",Math.floor(e.x+e.w/2),Math.floor(e.y+e.h-.2*e.h)):l.fillText(e.n,Math.floor(e.x+e.w/2),Math.floor(e.y+e.h-.15*e.h)),l.closePath()},q.rectangle=function(e){e=S(e);var t=!1;2===e.len?(e.x=e.x-.4*e.w,e.w=1.4*e.w,t=!0):e.len>=3&&(e.x=e.x-.65*e.w,e.w=1.65*e.w,t=!0),l.clearRect(0,0,u,a),l.drawImage(h,0,0,u,a),l.beginPath(),l.font="bold "+Math.floor(e.h*(e.n>99?.9:1))+"px sans-serif",l.textAlign="center",l.fillStyle="rgba("+r.bgColor.r+","+r.bgColor.g+","+r.bgColor.b+","+e.o+")",l.fillRect(e.x,e.y,e.w,e.h),l.fillStyle="rgba("+r.textColor.r+","+r.textColor.g+","+r.textColor.b+","+e.o+")","number"==typeof e.n&&e.len>3?l.fillText((e.n>9999?9:Math.floor(e.n/1e3))+"k+",Math.floor(e.x+e.w/2),Math.floor(e.y+e.h-.2*e.h)):l.fillText(e.n,Math.floor(e.x+e.w/2),Math.floor(e.y+e.h-.15*e.h)),l.closePath()};var I=function(e,t){t=("string"==typeof t?{animation:t}:t)||{},g=function(){try{if("number"==typeof e?e>0:""!==e){var i={type:"badge",options:{n:e}};if("animation"in t&&T.types[""+t.animation]&&(i.options.animation=""+t.animation),"type"in t&&q[""+t.type]&&(i.options.type=""+t.type),["bgColor","textColor"].forEach(function(e){e in t&&(i.options[e]=n(t[e]))}),["fontStyle","fontFamily"].forEach(function(e){e in t&&(i.options[e]=t[e])}),E.push(i),E.length>100)throw"Too many badges requests in queue.";$.start()}else $.reset()}catch(s){throw"Error setting badge. Message: "+s.message}},d&&g()},C=function(e){g=function(){try{var t=e.width,n=e.height,i=document.createElement("img"),s=n/a>t/u?t/u:n/a;i.setAttribute("src",e.getAttribute("src")),i.height=n/s,i.width=t/s,l.clearRect(0,0,u,a),l.drawImage(i,0,0,u,a),_.setIcon(c)}catch(r){throw"Error setting image. Message: "+r.message}},d&&g()},A=function(e){g=function(){try{if("stop"===e)return p=!0,$.reset(),void(p=!1);e.addEventListener("play",function(){t(this)},!1)}catch(n){throw"Error setting video. Message: "+n.message}},d&&g()},M=function(e){if(window.URL&&window.URL.createObjectURL||(window.URL=window.URL||{},window.URL.createObjectURL=function(e){return e}),v.supported){var n=!1;navigator.getUserMedia=navigator.getUserMedia||navigator.oGetUserMedia||navigator.msGetUserMedia||navigator.mozGetUserMedia||navigator.webkitGetUserMedia,g=function(){try{if("stop"===e)return p=!0,$.reset(),void(p=!1);n=document.createElement("video"),n.width=u,n.height=a,navigator.getUserMedia({video:!0,audio:!1},function(e){n.src=URL.createObjectURL(e),n.play(),t(n)},function(){})}catch(i){throw"Error setting webcam. Message: "+i.message}},d&&g()}},_={};_.getIcon=function(){var e=!1,t="",n=function(){for(var e=document.getElementsByTagName("head")[0].getElementsByTagName("link"),t=e.length,n=t-1;n>=0;n--)if(/(^|\s)icon(\s|$)/i.test(e[n].getAttribute("rel")))return e[n];return!1};if(r.elementId?(e=document.getElementById(r.elementId),e.setAttribute("href",e.getAttribute("src"))):(e=n(),e===!1&&(e=document.createElement("link"),e.setAttribute("rel","icon"),document.getElementsByTagName("head")[0].appendChild(e))),t=r.elementId?e.src:e.href,-1===t.indexOf(document.location.hostname))throw new Error("Error setting favicon. Favicon image is on different domain (Icon: "+t+", Domain: "+document.location.hostname+")");return e.setAttribute("type","image/png"),e},_.setIcon=function(e){var t=e.toDataURL("image/png");if(r.elementId)document.getElementById(r.elementId).setAttribute("src",t);else if(v.ff||v.opera){var n=o;o=document.createElement("link"),v.opera&&o.setAttribute("rel","icon"),o.setAttribute("rel","icon"),o.setAttribute("type","image/png"),document.getElementsByTagName("head")[0].appendChild(o),o.setAttribute("href",t),n.parentNode&&n.parentNode.removeChild(n)}else o.setAttribute("href",t)};var T={};return T.duration=40,T.types={},T.types.fade=[{x:.4,y:.4,w:.6,h:.6,o:0},{x:.4,y:.4,w:.6,h:.6,o:.1},{x:.4,y:.4,w:.6,h:.6,o:.2},{x:.4,y:.4,w:.6,h:.6,o:.3},{x:.4,y:.4,w:.6,h:.6,o:.4},{x:.4,y:.4,w:.6,h:.6,o:.5},{x:.4,y:.4,w:.6,h:.6,o:.6},{x:.4,y:.4,w:.6,h:.6,o:.7},{x:.4,y:.4,w:.6,h:.6,o:.8},{x:.4,y:.4,w:.6,h:.6,o:.9},{x:.4,y:.4,w:.6,h:.6,o:1}],T.types.none=[{x:.4,y:.4,w:.6,h:.6,o:1}],T.types.pop=[{x:1,y:1,w:0,h:0,o:1},{x:.9,y:.9,w:.1,h:.1,o:1},{x:.8,y:.8,w:.2,h:.2,o:1},{x:.7,y:.7,w:.3,h:.3,o:1},{x:.6,y:.6,w:.4,h:.4,o:1},{x:.5,y:.5,w:.5,h:.5,o:1},{x:.4,y:.4,w:.6,h:.6,o:1}],T.types.popFade=[{x:.75,y:.75,w:0,h:0,o:0},{x:.65,y:.65,w:.1,h:.1,o:.2},{x:.6,y:.6,w:.2,h:.2,o:.4},{x:.55,y:.55,w:.3,h:.3,o:.6},{x:.5,y:.5,w:.4,h:.4,o:.8},{x:.45,y:.45,w:.5,h:.5,o:.9},{x:.4,y:.4,w:.6,h:.6,o:1}],T.types.slide=[{x:.4,y:1,w:.6,h:.6,o:1},{x:.4,y:.9,w:.6,h:.6,o:1},{x:.4,y:.9,w:.6,h:.6,o:1},{x:.4,y:.8,w:.6,h:.6,o:1},{x:.4,y:.7,w:.6,h:.6,o:1},{x:.4,y:.6,w:.6,h:.6,o:1},{x:.4,y:.5,w:.6,h:.6,o:1},{x:.4,y:.4,w:.6,h:.6,o:1}],T.run=function(e,t,n,o){var a=T.types[s()?"none":r.animation];return o=n===!0?"undefined"!=typeof o?o:a.length-1:"undefined"!=typeof o?o:0,t=t?t:function(){},o<a.length&&o>=0?(q[r.type](i(e,a[o])),y=setTimeout(function(){n?o-=1:o+=1,T.run(e,t,n,o)},T.duration),_.setIcon(c),void 0):void t()},x(),{badge:I,video:A,image:C,webcam:M,reset:$.reset}};"undefined"!=typeof define&&define.amd?define("qui/controls/messages/Favico",[],function(){return e}):"undefined"!=typeof module&&module.exports?module.exports=e:this.Favico=e}(),define("qui/lib/require-css/css!qui/controls/messages/Handler",[],function(){}),define("qui/controls/messages/Handler",["require","qui/controls/Control","qui/controls/messages/Favico","qui/Locale","qui/classes/storage/Storage","css!qui/controls/messages/Handler.css"],function(e,t,n,i){"use strict";return new Class({Extends:t,Type:"qui/controls/messages/Handler",$messages:[],$newMessages:0,$filter:{attention:!0,error:!0,information:!0,success:!0},options:{autosave:!0,autoload:!0,useFavicon:!1,displayTimeMessages:2500},initialize:function(t){var i=this;if(this.parent(t),this.Favico=null,this.$Parent=null,!Browser.ie||Browser.ie&&Browser.version>9){try{this.Favico=new n({animation:"fade"})}catch(s){}window.addEvent("unload",function(){i.getAttribute("useFavicon")&&i.Favico&&i.Favico.badge(0)})}var r=window.localStorage.getItem("messageHandler");r&&(r=JSON.decode(r),r.config&&this.setAttributes(r.config),r.filter&&(this.$filter=Object.merge(this.$filter,r.filter)),r.messages&&(r.messages.sort(function(e,t){return e=new Date(e.time),t=new Date(t.time),e>t?-1:t>e?1:0}),e(["qui/controls/messages/Attention","qui/controls/messages/Error","qui/controls/messages/Information","qui/controls/messages/Success","qui/controls/messages/Loading","qui/controls/messages/Message"],function(e,t,n,s,o,a){var u,c,l,h,d;for(u=0,c=r.messages.length;c>u;u++){switch(h=r.messages[u],l=h.Type,delete h.Type,l){case"qui/controls/messages/Attention":d=new e(h);break;case"qui/controls/messages/Error":d=new t(h);break;case"qui/controls/messages/Information":d=new n(h);break;case"qui/controls/messages/Success":d=new s(h);break;case"qui/controls/messages/Loading":d=new o(h);break;default:d=new a(h)}d.addEvent("onDestroy",i.$onMessageDestroy.bind(i)),i.$messages.push(d)}})),r.newMessages&&i.$messages.length&&(this.$newMessages=r.newMessages,this.refreshFavicon()),this.getAttribute("autoload")&&this.load())},bindParent:function(e){this.$Parent=e},unbindParent:function(){this.$Parent=null},load:function(){if("undefined"!=typeof User&&User){var t=this;e(["qui/controls/messages/Attention","qui/controls/messages/Error","qui/controls/messages/Information","qui/controls/messages/Success","qui/controls/messages/Loading"],function(e,n,i,s,r){_Ajax.asyncPost("ajax_messages_get",function(o){var a,u,c,l,h;for(a=0,u=o.length;u>a;a++){switch(l=o[a],c={message:l.message,time:l.time},l.mtype){case"QUI\\Messages\\Attention":h=new e(c);break;case"QUI\\Messages\\Error":h=new n(c);break;case"QUI\\Messages\\Information":h=new i(c);break;case"QUI\\Messages\\Success":h=new s(c);break;case"QUI\\Messages\\Loading":h=new r(c);break;default:continue}t.add(h)}}),t.fireEvent("load",[t])})}},create:function(){return this.$Elm=new Element("div",{"class":"message-handler-control",html:'<span class="icon-info"></span><span class="message-handler-count"></span>',title:i.get("qui/controls/messages","handler.open"),events:{click:this.open.bind(this)}}),this.refreshFavicon(),this.$Elm},open:function(){if(!document.getElement(".message-handler-container")){this.$newMessages=0;var e=this.$Parent;this.$Parent||(e=document.body);var t=this,n=new Element("div",{"class":"message-handler-container",html:'<div class="message-handler-container-title">Nachrichten</div><div class="message-handler-container-buttons"><div class="success message-handler-container-button grid-20 mobile-grid-20 icon-ok"></div><div class="information message-handler-container-button grid-20 mobile-grid-20 icon-info-sign"></div><div class="attention message-handler-container-button grid-20 mobile-grid-20 icon-warning-sign"></div><div class="error message-handler-container-button grid-20 mobile-grid-20 icon-bolt"></div><div class="trash message-handler-container-button grid-20 mobile-grid-20 icon-trash"></div></div><div class="message-handler-container-messages"></div><div class="message-handler-container-close"></div>'}).inject(e);n.getElement(".icon-trash").addEvent("click",this.clear.bind(this)),e!=document.body&&(n.setStyles({border:"none",position:"relative"}),n.getElement(".message-handler-container-title").destroy(),n.getElement(".message-handler-container-close").setStyle("display","none"));var s=n.getElements(".success,.information,.attention,.error");s.addEvent("click",this.$switchFilterStatus.bind(this)),s.addClass("message-handler-container-buttons-active"),n.getElement(".trash").set({title:i.get("qui/controls/messages","handler.button.clear")}),n.getElement(".success").set({title:i.get("qui/controls/messages","handler.button.success")}),n.getElement(".information").set({title:i.get("qui/controls/messages","handler.button.information")}),n.getElement(".attention").set({title:i.get("qui/controls/messages","handler.button.attention")}),n.getElement(".error").set({title:i.get("qui/controls/messages","handler.button.error")});var r=n.getElement(".message-handler-container-messages"),o=n.getElement(".message-handler-container-close");new Element("div",{"class":"button message-handler-container-close-btn",html:i.get("qui/controls/messages","handler.button.close"),events:{click:function(){t.close()}}}).inject(o),this.$onResize(),window.addEvent("resize",this.$onResize),moofx(n).animate({left:0},{callback:function(){r.set("html",""),t.$messages.sort(function(e,t){return e=new Date(e.getAttribute("time")),t=new Date(t.getAttribute("time")),e>t?-1:t>e?1:0});for(var s=0,o=t.$messages.length;o>s;s++)t.$messages[s].inject(r);o||r.set("html",'<p style="text-align: center;">'+i.get("qui/controls/messages","handler.no.messages")+"</p>"),e==document.body&&n.addClass("shadow"),t.refreshFavicon(),t.save()}})}},parse:function(t,n){e(["qui/controls/messages/Attention","qui/controls/messages/Error","qui/controls/messages/Information","qui/controls/messages/Success","qui/controls/messages/Loading","qui/controls/messages/Message"],function(e,i,s,r,o,a){var u,c;switch(u={message:t.message,time:t.time},t.mtype){case"QUI\\Messages\\Attention":c=new e(u);break;case"QUI\\Messages\\Error":c=new i(u);break;case"QUI\\Messages\\Information":c=new s(u);break;case"QUI\\Messages\\Success":c=new r(u);break;case"QUI\\Messages\\Loading":c=new o(u);break;default:c=new a(u)}n(c)})},close:function(){var e=this,t=document.getElement(".message-handler-container");t.removeClass("shadow"),moofx(t).animate({left:-500},{callback:function(){t.destroy(),document.removeEvent("onResize",e.$onResize)}})},clear:function(){this.$messages=[];var e=document.getElement(".message-handler-container-messages");e&&e.set("html",'<p style="text-align: center;">'+i.get("qui/controls/messages","handler.no.messages")+"</p>"),this.Favico&&this.Favico.reset(),this.fireEvent("clear",[this]),this.getAttribute("autosave")&&this.save()},count:function(){return this.$messages.length},save:function(){var e,t,n,i=[],s={config:this.getAttributes(),filter:this.$filter,newMessages:this.$newMessages};for(e=0,t=this.$messages.length;t>e;e++)n=this.$messages[e].getAttributes(),n.Type=this.$messages[e].getType(),i.push(n);s.messages=i,window.localStorage.setItem("messageHandler",JSON.encode(s))},filter:function(){var e=document.getElement(".message-handler-container");if(e){var t,n,i,s=e.getElements(".messages-message"),r=this.$filter;for(t=0,n=s.length;n>t;t++)i=s[t],r.attention&&i.hasClass("message-attention")?i.setStyle("display",null):r.error&&i.hasClass("message-error")?i.setStyle("display",null):r.information&&i.hasClass("message-information")?i.setStyle("display",null):r.success&&i.hasClass("message-success")?i.setStyle("display",null):i.setStyle("display","none")}},clearNewMessages:function(){this.$newMessages=0,this.refreshFavicon(),this.fireEvent("clearNewMessages")},getNewMessages:function(){return this.$newMessages},getMessages:function(){return this.$messages},refreshFavicon:function(){if(this.Favico&&this.getAttribute("useFavicon")&&this.Favico.badge(this.$newMessages),this.getElm()){var e=this.getElm().getElement(".message-handler-count");e&&e.set({html:this.$newMessages,styles:{display:this.$newMessages?"inline":"none"}})}},add:function(e,t){var n=this,i=document.getElement(".message-handler-container-messages");if(this.$messages.push(e),e.addEvents({onDestroy:this.$onMessageDestroy.bind(this),onFinish:function(){n.getAttribute("autosave")&&n.save()}}),!i){this.$newMessages++,this.refreshFavicon(),this.getAttribute("autosave")&&this.save();var s,r,o=e.createMessageElement();if("undefined"==typeof t&&(t=document.body),s=t.getPosition(),r=t.getSize(),o.setStyles({left:s.x,position:"absolute",top:s.y+r.y,width:280,zIndex:1e4}),t==document.body){o.setStyles({bottom:10,left:10,position:"fixed",top:null});var a=document.body.getChildren(".messages-message");if(a.length){var u=a.map(function(e){return e.getSize().y+10}).sum();o.setStyle("bottom",u+10)}}var c=document.getElements("body > *").map(function(e){return e.getStyle("zIndex").toInt()||1}),l=Math.max.apply(null,c)+1;return(!l||1e4>l)&&(l=1e4),o.setStyle("zIndex",l),o.addClass("animated"),o.inject(document.body),o.addClass("fadeInDown"),function(){moofx(o).animate({opacity:0},{callback:function(){o.destroy()}})}.delay(this.getAttribute("displayTimeMessages")),this.fireEvent("add",[this,e]),this}return 1==this.$messages.length&&i.set("html",""),e.inject(i,"top"),new Fx.Scroll(i).toTop(),e.getElm().addClass("animated"),e.getElm().addClass("flash"),this.getAttribute("autosave")&&this.save(),this.fireEvent("add",[this,e]),this},addAttention:function(t,n){var i=this;return e(["qui/controls/messages/Attention"],function(e){var s=new e({message:t});i.add(s,n),i.fireEvent("addAttention",[this,s])}),this},addError:function(t,n){var i=this;return e(["qui/controls/messages/Error"],function(e){var s=new e({message:t});i.add(s,n),i.fireEvent("addError",[this,s])}),this},addException:function(t,n){var i=this;return e(["qui/controls/messages/Error"],function(e){var s=new e({message:t.getMessage(),code:t.getCode()});i.add(s,n),i.fireEvent("addError",[this,s])}),this},addInformation:function(t,n){var i=this;return e(["qui/controls/messages/Information"],function(e){var s=new e({message:t});i.add(s,n),i.fireEvent("addInformation",[this,s])}),this},addLoading:function(t,n,i){var s=this;return new Promise(function(r,o){e(["qui/controls/messages/Loading"],function(e){var o=new e({message:t});s.add(o,i),s.fireEvent("addLoadingMessage",[this,o]),"undefined"!=typeof n&&"function"==typeOf(n)&&n(o),r(o)},o)})},addSuccess:function(t,n){var i=this;return e(["qui/controls/messages/Success"],function(e){var s=new e({message:t});i.add(s,n),i.fireEvent("addSuccess",[this,s])}),this},$switchFilterStatus:function(e){var t=e.target,n=!1,i=t.hasClass("message-handler-container-buttons-active");if(t.hasClass("success"))n="success";else if(t.hasClass("information"))n="information";else if(t.hasClass("attention"))n="attention";else{if(!t.hasClass("error"))return;n="error"}i?t.removeClass("message-handler-container-buttons-active"):t.addClass("message-handler-container-buttons-active"),this.$filter[n]=i?!1:!0,this.filter()},$onMessageDestroy:function(e){var t,n,i=[];for(t=0,n=this.$messages.length;n>t;t++)this.$messages[t]!=e&&i.push(this.$messages[t]);this.$messages=i,this.save()},$onResize:function(){var e=document.getElement(".message-handler-container");if(e){var t,n=this.$Parent;n||(n=document.body);var i=n.getSize(),s=e.getElement(".message-handler-container-title"),r=e.getElement(".message-handler-container-buttons"),o=e.getElement(".message-handler-container-messages"),a=e.getElement(".message-handler-container-close");t=i.y-s.getSize().y-r.getSize().y-a.getSize().y,o.setStyles({height:t})}}})});
//# sourceMappingURL=Handler.js.map