{"version":3,"file":"Favico.js","sources":["Favico.js"],"names":[],"mappings":"CAsBA,WAEA,GAAA,GAAA,SAAA,GAAA,YA0ZA,SAAA,GAAA,GACA,GAAA,EAAA,QAAA,EAAA,OAAA,EACA,OAAA,CAGA,KACA,EAAA,UAAA,EAAA,EAAA,EAAA,GACA,EAAA,UAAA,EAAA,EAAA,EAAA,EAAA,GACA,MAAA,IAGA,EAAA,WAAA,EAAA,EAAA,SAAA,GACA,EAAA,QAAA,GAwEA,QAAA,GAAA,GACA,GAAA,GAAA,kCACA,GAAA,EAAA,QAAA,EAAA,SAAA,EAAA,EAAA,EAAA,GACA,MAAA,GAAA,EAAA,EAAA,EAAA,EAAA,GAEA,IAAA,GAAA,4CAAA,KAAA,EACA,OAAA,IACA,EAAA,SAAA,EAAA,GAAA,IACA,EAAA,SAAA,EAAA,GAAA,IACA,EAAA,SAAA,EAAA,GAAA,MACA,EAMA,QAAA,GAAA,EAAA,GACA,GACA,GADA,IAEA,KAAA,IAAA,GACA,EAAA,GAAA,EAAA,EAEA,KAAA,IAAA,GACA,EAAA,GAAA,EAAA,EAEA,OAAA,GAOA,QAAA,KACA,MAAA,UAAA,QAAA,SAAA,UAAA,SAAA,cAAA,SAAA,UA9gBA,EAAA,EAAA,IACA,IAUA,GAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAVA,GACA,QAAA,OACA,UAAA,OACA,WAAA,aACA,UAAA,OACA,KAAA,SACA,SAAA,OACA,UAAA,QACA,WAAA,EAIA,MACA,EAAA,GAAA,WAAA,KAAA,UAAA,UAAA,eACA,EAAA,OAAA,UAAA,KAAA,UAAA,UAAA,eACA,EAAA,MAAA,SAAA,KAAA,UAAA,UAAA,eACA,EAAA,GAAA,QAAA,KAAA,UAAA,UAAA,gBAAA,WAAA,KAAA,UAAA,UAAA,eACA,EAAA,UAAA,EAAA,QAAA,EAAA,IAAA,EAAA,KAEA,IAAA,KACA,GAAA,aAEA,EAAA,GAAA,CAIA,IAAA,GAAA,WAEA,EAAA,EAAA,EAAA,GACA,EAAA,QAAA,EAAA,EAAA,SACA,EAAA,UAAA,EAAA,EAAA,WACA,EAAA,SAAA,EAAA,SAAA,cACA,EAAA,UAAA,EAAA,MAAA,GAAA,EAAA,WAAA,EAAA,UAAA,EAAA,SAEA,IAAA,GAAA,EAAA,SAAA,QAAA,MAAA,GACA,EAAA,EAAA,SAAA,QAAA,QAAA,EAGA,IAAA,GAAA,EACA,IAAA,GAAA,GAAA,EAAA,EAAA,EAAA,MAAA,GAAA,EAAA,WAAA,OAAA,IAAA,CACA,GAAA,GAAA,EAAA,MAAA,GAAA,EAAA,WAAA,EAEA,KAEA,EAAA,EADA,EAAA,EAAA,GACA,EAAA,EAAA,GAEA,EAAA,EAAA,EAAA,EAAA,GAAA,EAAA,EAAA,IAIA,IAEA,EAAA,EADA,EAAA,EAAA,GACA,EAAA,EAAA,GAEA,EAAA,EAAA,EAAA,EAAA,GAAA,EAAA,EAAA,IAIA,EAAA,MAAA,GAAA,EAAA,WAAA,GAAA,EAGA,EAAA,KAAA,EAAA,GAAA,EAAA,MAAA,EAAA,KAAA,EAAA,IACA,KACA,EAAA,EAAA,UAEA,EAAA,SAAA,cAAA,UAEA,EAAA,SAAA,cAAA,OACA,EAAA,aAAA,SACA,EAAA,aAAA,MAAA,EAAA,aAAA,SAEA,EAAA,OAAA,WACA,EAAA,EAAA,OAAA,EAAA,EAAA,OAAA,GACA,EAAA,EAAA,MAAA,EAAA,EAAA,MAAA,GACA,EAAA,OAAA,EACA,EAAA,MAAA,EACA,EAAA,EAAA,WAAA,MACA,EAAA,WAGA,EAAA,aAAA,MAAA,IACA,EAAA,GACA,EAAA,GACA,EAAA,OAAA,EACA,EAAA,MAAA,EACA,EAAA,OAAA,EACA,EAAA,MAAA,EACA,EAAA,EAAA,WAAA,MACA,EAAA,SAEA,MAAA,GACA,KAAA,uCAAA,EAAA,UAOA,IAIA,GAAA,MAAA,WACA,GAAA,EACA,EAAA,QACA,KAKA,EAAA,MAAA,WAEA,IAGA,KACA,GAAA,EACA,EAAA,UAAA,EAAA,EAAA,EAAA,GACA,EAAA,UAAA,EAAA,EAAA,EAAA,EAAA,GAEA,EAAA,QAAA,GAGA,OAAA,aAAA,GACA,OAAA,aAAA,KAKA,EAAA,MAAA,WACA,GAAA,IAAA,EAAA,CAGA,GAAA,GAAA,WACA,EAAA,EAAA,GACA,GAAA,EACA,EAAA,OAAA,IACA,EAAA,QACA,EAAA,SAKA,IAAA,EAAA,OAAA,EAAA,CACA,GAAA,CACA,IAAA,GAAA,YAEA,OAAA,YAAA,UAAA,YACA,aAAA,aAAA,QAAA,SAAA,GACA,IAAA,GAAA,GAAA,UACA,EAAA,GAAA,EAAA,GAAA,QAAA,MAGA,EAAA,IAAA,EAAA,GAAA,QAAA,WACA,MACA,GAEA,GACA,EAAA,IAAA,EAAA,QAAA,WACA,MACA,GAEA,MAQA,IAAA,MACA,EAAA,SAAA,GAOA,MANA,GAAA,EAAA,gBAAA,GAAA,EAAA,KAAA,IAAA,EAAA,EAAA,GAAA,EAAA,EACA,EAAA,EAAA,EAAA,EAAA,EACA,EAAA,EAAA,EAAA,EAAA,EACA,EAAA,EAAA,EAAA,EAAA,EACA,EAAA,EAAA,EAAA,EAAA,EACA,EAAA,KAAA,GAAA,EAAA,GAAA,OACA,EAMA,GAAA,OAAA,SAAA,GACA,EAAA,EAAA,EACA,IAAA,IAAA,CACA,KAAA,EAAA,KACA,EAAA,EAAA,EAAA,EAAA,GAAA,EAAA,EACA,EAAA,EAAA,IAAA,EAAA,EACA,GAAA,GACA,EAAA,KAAA,IACA,EAAA,EAAA,EAAA,EAAA,IAAA,EAAA,EACA,EAAA,EAAA,KAAA,EAAA,EACA,GAAA,GAEA,EAAA,UAAA,EAAA,EAAA,EAAA,GACA,EAAA,UAAA,EAAA,EAAA,EAAA,EAAA,GACA,EAAA,YACA,EAAA,KAAA,EAAA,UAAA,IAAA,KAAA,MAAA,EAAA,GAAA,EAAA,EAAA,GAAA,IAAA,IAAA,MAAA,EAAA,WACA,EAAA,UAAA,SACA,GACA,EAAA,OAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,GACA,EAAA,OAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,GACA,EAAA,iBAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,GACA,EAAA,OAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,GACA,EAAA,iBAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,GACA,EAAA,OAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,GACA,EAAA,iBAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,GACA,EAAA,OAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,GACA,EAAA,iBAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,IAEA,EAAA,IAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,KAAA,IAEA,EAAA,UAAA,QAAA,EAAA,QAAA,EAAA,IAAA,EAAA,QAAA,EAAA,IAAA,EAAA,QAAA,EAAA,IAAA,EAAA,EAAA,IACA,EAAA,OACA,EAAA,YACA,EAAA,YACA,EAAA,SACA,EAAA,UAAA,QAAA,EAAA,UAAA,EAAA,IAAA,EAAA,UAAA,EAAA,IAAA,EAAA,UAAA,EAAA,IAAA,EAAA,EAAA,IAEA,gBAAA,GAAA,GAAA,EAAA,EAAA,IACA,EAAA,UAAA,EAAA,EAAA,KAAA,EAAA,KAAA,MAAA,EAAA,EAAA,MAAA,KAAA,KAAA,MAAA,EAAA,EAAA,EAAA,EAAA,GAAA,KAAA,MAAA,EAAA,EAAA,EAAA,EAAA,GAAA,EAAA,IAEA,EAAA,SAAA,EAAA,EAAA,KAAA,MAAA,EAAA,EAAA,EAAA,EAAA,GAAA,KAAA,MAAA,EAAA,EAAA,EAAA,EAAA,IAAA,EAAA,IAEA,EAAA,aAMA,EAAA,UAAA,SAAA,GACA,EAAA,EAAA,EACA,IAAA,IAAA,CACA,KAAA,EAAA,KACA,EAAA,EAAA,EAAA,EAAA,GAAA,EAAA,EACA,EAAA,EAAA,IAAA,EAAA,EACA,GAAA,GACA,EAAA,KAAA,IACA,EAAA,EAAA,EAAA,EAAA,IAAA,EAAA,EACA,EAAA,EAAA,KAAA,EAAA,EACA,GAAA,GAEA,EAAA,UAAA,EAAA,EAAA,EAAA,GACA,EAAA,UAAA,EAAA,EAAA,EAAA,EAAA,GACA,EAAA,YACA,EAAA,KAAA,QAAA,KAAA,MAAA,EAAA,GAAA,EAAA,EAAA,GAAA,GAAA,IAAA,gBACA,EAAA,UAAA,SACA,EAAA,UAAA,QAAA,EAAA,QAAA,EAAA,IAAA,EAAA,QAAA,EAAA,IAAA,EAAA,QAAA,EAAA,IAAA,EAAA,EAAA,IACA,EAAA,SAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,GACA,EAAA,UAAA,QAAA,EAAA,UAAA,EAAA,IAAA,EAAA,UAAA,EAAA,IAAA,EAAA,UAAA,EAAA,IAAA,EAAA,EAAA,IAEA,gBAAA,GAAA,GAAA,EAAA,IAAA,EACA,EAAA,UAAA,EAAA,EAAA,KAAA,EAAA,KAAA,MAAA,EAAA,EAAA,MAAA,KAAA,KAAA,MAAA,EAAA,EAAA,EAAA,EAAA,GAAA,KAAA,MAAA,EAAA,EAAA,EAAA,EAAA,GAAA,EAAA,IAEA,EAAA,SAAA,EAAA,EAAA,KAAA,MAAA,EAAA,EAAA,EAAA,EAAA,GAAA,KAAA,MAAA,EAAA,EAAA,EAAA,EAAA,IAAA,EAAA,IAEA,EAAA,YAMA,IAAA,GAAA,SAAA,EAAA,GACA,GAAA,gBAAA,IAAA,UAAA,GAAA,OACA,EAAA,WACA,IACA,GAAA,gBAAA,GAAA,EAAA,EAAA,KAAA,EAAA,CACA,GAAA,IACA,KAAA,QACA,SACA,EAAA,GAqBA,IAlBA,aAAA,IACA,EAAA,MAAA,GAAA,EAAA,aACA,EAAA,QAAA,UAAA,GAAA,EAAA,WAEA,QAAA,IAAA,EAAA,GAAA,EAAA,QACA,EAAA,QAAA,KAAA,GAAA,EAAA,OAEA,UAAA,aAAA,QAAA,SAAA,GACA,IAAA,KACA,EAAA,QAAA,GAAA,EAAA,EAAA,QAGA,YAAA,cAAA,QAAA,SAAA,GACA,IAAA,KACA,EAAA,QAAA,GAAA,EAAA,MAGA,EAAA,KAAA,GACA,EAAA,OAAA,IACA,KAAA,oCAEA,GAAA,YAEA,GAAA,QAEA,MAAA,GACA,KAAA,iCAAA,EAAA,UAGA,GACA,KAOA,EAAA,SAAA,GACA,EAAA,WACA,IACA,GAAA,GAAA,EAAA,MACA,EAAA,EAAA,OACA,EAAA,SAAA,cAAA,OACA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,EAAA,CACA,GAAA,aAAA,MAAA,EAAA,aAAA,QACA,EAAA,OAAA,EAAA,EACA,EAAA,MAAA,EAAA,EACA,EAAA,UAAA,EAAA,EAAA,EAAA,GACA,EAAA,UAAA,EAAA,EAAA,EAAA,EAAA,GACA,EAAA,QAAA,GACA,MAAA,GACA,KAAA,iCAAA,EAAA,UAGA,GACA,KAMA,EAAA,SAAA,GACA,EAAA,WACA,IACA,GAAA,SAAA,EAIA,MAHA,IAAA,EACA,EAAA,aACA,GAAA,EAMA,GAAA,iBAAA,OAAA,WACA,EAAA,QACA,GAEA,MAAA,GACA,KAAA,iCAAA,EAAA,UAGA,GACA,KAMA,EAAA,SAAA,GAQA,GANA,OAAA,KAAA,OAAA,IAAA,kBACA,OAAA,IAAA,OAAA,QACA,OAAA,IAAA,gBAAA,SAAA,GACA,MAAA,KAGA,EAAA,UAAA,CACA,GAAA,IAAA,CACA,WAAA,aAAA,UAAA,cAAA,UAAA,eAAA,UAAA,gBAAA,UAAA,iBAAA,UAAA,mBACA,EAAA,WACA,IACA,GAAA,SAAA,EAIA,MAHA,IAAA,EACA,EAAA,aACA,GAAA,EAGA,GAAA,SAAA,cAAA,SACA,EAAA,MAAA,EACA,EAAA,OAAA,EACA,UAAA,cACA,OAAA,EACA,OAAA,GACA,SAAA,GACA,EAAA,IAAA,IAAA,gBAAA,GACA,EAAA,OACA,EAAA,IACA,cAEA,MAAA,GACA,KAAA,kCAAA,EAAA,UAGA,GACA,MAwBA,IAIA,GAAA,QAAA,WACA,GAAA,IAAA,EACA,EAAA,GAEA,EAAA,WAEA,IAAA,GADA,GAAA,SAAA,qBAAA,QAAA,GAAA,qBAAA,QACA,EAAA,EAAA,OAAA,EAAA,EAAA,EAAA,GAAA,EAAA,IACA,GAAA,oBAAA,KAAA,EAAA,GAAA,aAAA,QACA,MAAA,GAAA,EAGA,QAAA,EAiBA,IAfA,EAAA,WAEA,EAAA,SAAA,eAAA,EAAA,WACA,EAAA,aAAA,OAAA,EAAA,aAAA,UAGA,EAAA,IACA,KAAA,IACA,EAAA,SAAA,cAAA,QACA,EAAA,aAAA,MAAA,QACA,SAAA,qBAAA,QAAA,GAAA,YAAA,KAIA,EAAA,EAAA,UAAA,EAAA,IAAA,EAAA,KACA,KAAA,EAAA,QAAA,SAAA,SAAA,UACA,KAAA,IAAA,OAAA,sEAAA,EAAA,aAAA,SAAA,SAAA,SAAA,IAGA,OADA,GAAA,aAAA,OAAA,aACA,GAEA,EAAA,QAAA,SAAA,GACA,GAAA,GAAA,EAAA,UAAA,YACA,IAAA,EAAA,UAEA,SAAA,eAAA,EAAA,WAAA,aAAA,MAAA,OAGA,IAAA,EAAA,IAAA,EAAA,MAAA,CAGA,GAAA,GAAA,CACA,GAAA,SAAA,cAAA,QAEA,EAAA,OACA,EAAA,aAAA,MAAA,QAEA,EAAA,aAAA,MAAA,QACA,EAAA,aAAA,OAAA,aACA,SAAA,qBAAA,QAAA,GAAA,YAAA,GACA,EAAA,aAAA,OAAA,GACA,EAAA,YACA,EAAA,WAAA,YAAA,OAGA,GAAA,aAAA,OAAA,GA8CA,IAAA,KA6PA,OAzPA,GAAA,SAAA,GAIA,EAAA,SACA,EAAA,MAAA,OACA,EAAA,GACA,EAAA,GACA,EAAA,GACA,EAAA,GACA,EAAA,IAEA,EAAA,GACA,EAAA,GACA,EAAA,GACA,EAAA,GACA,EAAA,KAEA,EAAA,GACA,EAAA,GACA,EAAA,GACA,EAAA,GACA,EAAA,KAEA,EAAA,GACA,EAAA,GACA,EAAA,GACA,EAAA,GACA,EAAA,KAEA,EAAA,GACA,EAAA,GACA,EAAA,GACA,EAAA,GACA,EAAA,KAEA,EAAA,GACA,EAAA,GACA,EAAA,GACA,EAAA,GACA,EAAA,KAEA,EAAA,GACA,EAAA,GACA,EAAA,GACA,EAAA,GACA,EAAA,KAEA,EAAA,GACA,EAAA,GACA,EAAA,GACA,EAAA,GACA,EAAA,KAEA,EAAA,GACA,EAAA,GACA,EAAA,GACA,EAAA,GACA,EAAA,KAEA,EAAA,GACA,EAAA,GACA,EAAA,GACA,EAAA,GACA,EAAA,KAEA,EAAA,GACA,EAAA,GACA,EAAA,GACA,EAAA,GACA,EAAA,IAEA,EAAA,MAAA,OACA,EAAA,GACA,EAAA,GACA,EAAA,GACA,EAAA,GACA,EAAA,IAEA,EAAA,MAAA,MACA,EAAA,EACA,EAAA,EACA,EAAA,EACA,EAAA,EACA,EAAA,IAEA,EAAA,GACA,EAAA,GACA,EAAA,GACA,EAAA,GACA,EAAA,IAEA,EAAA,GACA,EAAA,GACA,EAAA,GACA,EAAA,GACA,EAAA,IAEA,EAAA,GACA,EAAA,GACA,EAAA,GACA,EAAA,GACA,EAAA,IAEA,EAAA,GACA,EAAA,GACA,EAAA,GACA,EAAA,GACA,EAAA,IAEA,EAAA,GACA,EAAA,GACA,EAAA,GACA,EAAA,GACA,EAAA,IAEA,EAAA,GACA,EAAA,GACA,EAAA,GACA,EAAA,GACA,EAAA,IAEA,EAAA,MAAA,UACA,EAAA,IACA,EAAA,IACA,EAAA,EACA,EAAA,EACA,EAAA,IAEA,EAAA,IACA,EAAA,IACA,EAAA,GACA,EAAA,GACA,EAAA,KAEA,EAAA,GACA,EAAA,GACA,EAAA,GACA,EAAA,GACA,EAAA,KAEA,EAAA,IACA,EAAA,IACA,EAAA,GACA,EAAA,GACA,EAAA,KAEA,EAAA,GACA,EAAA,GACA,EAAA,GACA,EAAA,GACA,EAAA,KAEA,EAAA,IACA,EAAA,IACA,EAAA,GACA,EAAA,GACA,EAAA,KAEA,EAAA,GACA,EAAA,GACA,EAAA,GACA,EAAA,GACA,EAAA,IAEA,EAAA,MAAA,QACA,EAAA,GACA,EAAA,EACA,EAAA,GACA,EAAA,GACA,EAAA,IAEA,EAAA,GACA,EAAA,GACA,EAAA,GACA,EAAA,GACA,EAAA,IAEA,EAAA,GACA,EAAA,GACA,EAAA,GACA,EAAA,GACA,EAAA,IAEA,EAAA,GACA,EAAA,GACA,EAAA,GACA,EAAA,GACA,EAAA,IAEA,EAAA,GACA,EAAA,GACA,EAAA,GACA,EAAA,GACA,EAAA,IAEA,EAAA,GACA,EAAA,GACA,EAAA,GACA,EAAA,GACA,EAAA,IAEA,EAAA,GACA,EAAA,GACA,EAAA,GACA,EAAA,GACA,EAAA,IAEA,EAAA,GACA,EAAA,GACA,EAAA,GACA,EAAA,GACA,EAAA,IASA,EAAA,IAAA,SAAA,EAAA,EAAA,EAAA,GACA,GAAA,GAAA,EAAA,MAAA,IAAA,OAAA,EAAA,UAQA,OANA,GADA,KAAA,EACA,mBAAA,GAAA,EAAA,EAAA,OAAA,EAEA,mBAAA,GAAA,EAAA,EAEA,EAAA,EAAA,EAAA,aAEA,EAAA,EAAA,QAAA,GAAA,GACA,EAAA,EAAA,MAAA,EAAA,EAAA,EAAA,KACA,EAAA,WAAA,WACA,EACA,GAAA,EAEA,GAAA,EAEA,EAAA,IAAA,EAAA,EAAA,EAAA,IACA,EAAA,UAEA,EAAA,QAAA,GAVA,YAYA,MAKA,KAEA,MAAA,EACA,MAAA,EACA,MAAA,EACA,OAAA,EACA,MAAA,EAAA,OAKA,oBAAA,SAAA,OAAA,IACA,OAAA,kCAAA,WACA,MAAA,KAIA,mBAAA,SAAA,OAAA,QACA,OAAA,QAAA,EAIA,KAAA,OAAA","sourcesContent":["/**\n * @license MIT\n * @fileOverview Favico animations\n * @author Miroslav Magda, http://blog.ejci.net\n * @version 0.3.4\n */\n\n/**\n * Create new favico instance\n * @param {Object} Options\n * @return {Object} Favico object\n * @example\n * var favico = new Favico({\n *    bgColor : '#d00',\n *    textColor : '#fff',\n *    fontFamily : 'sans-serif',\n *    fontStyle : 'bold',\n *    position : 'down',\n *    type : 'circle',\n *    animation : 'slide',\n * });\n */\n(function() {\n\n    var Favico = (function(opt) {'use strict';\n        opt = (opt) ? opt : {};\n        var _def = {\n            bgColor : '#d00',\n            textColor : '#fff',\n            fontFamily : 'sans-serif', //Arial,Verdana,Times New Roman,serif,sans-serif,...\n            fontStyle : 'bold', //normal,italic,oblique,bold,bolder,lighter,100,200,300,400,500,600,700,800,900\n            type : 'circle',\n            position : 'down', // down, up, left, leftup (upleft)\n            animation : 'slide',\n            elementId : false\n        };\n        var _opt, _orig, _h, _w, _canvas, _context, _img, _ready, _lastBadge, _running, _readyCb, _stop, _browser, _animTimeout, _drawTimeout;\n\n        _browser = {};\n        _browser.ff = (/firefox/i.test(navigator.userAgent.toLowerCase()));\n        _browser.chrome = (/chrome/i.test(navigator.userAgent.toLowerCase()));\n        _browser.opera = (/opera/i.test(navigator.userAgent.toLowerCase()));\n        _browser.ie = (/msie/i.test(navigator.userAgent.toLowerCase())) || (/trident/i.test(navigator.userAgent.toLowerCase()));\n        _browser.supported = (_browser.chrome || _browser.ff || _browser.opera);\n\n        var _queue = [];\n        _readyCb = function() {\n        };\n        _ready = _stop = false;\n        /**\n         * Initialize favico\n         */\n        var init = function() {\n            //merge initial options\n            _opt = merge(_def, opt);\n            _opt.bgColor = hexToRgb(_opt.bgColor);\n            _opt.textColor = hexToRgb(_opt.textColor);\n            _opt.position = _opt.position.toLowerCase();\n            _opt.animation = (animation.types['' + _opt.animation]) ? _opt.animation : _def.animation;\n\n            var isUp = _opt.position.indexOf('up') > -1;\n            var isLeft = _opt.position.indexOf('left') > -1;\n\n            //transform animation\n            if (isUp || isLeft) {\n                for (var i = 0; i < animation.types['' + _opt.animation].length; i++) {\n                    var step = animation.types['' + _opt.animation][i];\n\n                    if (isUp) {\n                        if (step.y < 0.6) {\n                            step.y = step.y - 0.4;\n                        } else {\n                            step.y = step.y - 2 * step.y + (1 - step.w);\n                        }\n                    }\n\n                    if (isLeft) {\n                        if (step.x < 0.6) {\n                            step.x = step.x - 0.4;\n                        } else {\n                            step.x = step.x - 2 * step.x + (1 - step.h);\n                        }\n                    }\n\n                    animation.types['' + _opt.animation][i] = step;\n                }\n            }\n            _opt.type = (type['' + _opt.type]) ? _opt.type : _def.type;\n            try {\n                _orig = link.getIcon();\n                //create temp canvas\n                _canvas = document.createElement('canvas');\n                //create temp image\n                _img = document.createElement('img');\n                if (_orig.hasAttribute('href')) {\n                    _img.setAttribute('src', _orig.getAttribute('href'));\n                    //get width/height\n                    _img.onload = function() {\n                        _h = (_img.height > 0) ? _img.height : 32;\n                        _w = (_img.width > 0) ? _img.width : 32;\n                        _canvas.height = _h;\n                        _canvas.width = _w;\n                        _context = _canvas.getContext('2d');\n                        icon.ready();\n                    };\n                } else {\n                    _img.setAttribute('src', '');\n                    _h = 32;\n                    _w = 32;\n                    _img.height = _h;\n                    _img.width = _w;\n                    _canvas.height = _h;\n                    _canvas.width = _w;\n                    _context = _canvas.getContext('2d');\n                    icon.ready();\n                }\n            } catch(e) {\n                throw 'Error initializing favico. Message: ' + e.message;\n            }\n\n        };\n        /**\n         * Icon namespace\n         */\n        var icon = {};\n        /**\n         * Icon is ready (reset icon) and start animation (if ther is any)\n         */\n        icon.ready = function() {\n            _ready = true;\n            icon.reset();\n            _readyCb();\n        };\n        /**\n         * Reset icon to default state\n         */\n        icon.reset = function() {\n            //reset\n            if (!_ready) {\n                return;\n            }\n            _queue = [];\n            _lastBadge = false;\n            _context.clearRect(0, 0, _w, _h);\n            _context.drawImage(_img, 0, 0, _w, _h);\n            //_stop=true;\n            link.setIcon(_canvas);\n            //webcam('stop');\n            //video('stop');\n            window.clearTimeout(_animTimeout);\n            window.clearTimeout(_drawTimeout);\n        };\n        /**\n         * Start animation\n         */\n        icon.start = function() {\n            if (!_ready || _running) {\n                return;\n            }\n            var finished = function() {\n                _lastBadge = _queue[0];\n                _running = false;\n                if (_queue.length > 0) {\n                    _queue.shift();\n                    icon.start();\n                } else {\n\n                }\n            };\n            if (_queue.length > 0) {\n                _running = true;\n                var run = function() {\n                    // apply options for this animation\n                    ['type', 'animation', 'bgColor', 'textColor',\n                     'fontFamily', 'fontStyle'].forEach(function(a) {\n                        if (a in _queue[0].options) {\n                            _opt[a] = _queue[0].options[a];\n                        }\n                    });\n                    animation.run(_queue[0].options, function() {\n                        finished();\n                    }, false);\n                };\n                if (_lastBadge) {\n                    animation.run(_lastBadge.options, function() {\n                        run();\n                    }, true);\n                } else {\n                    run();\n                }\n            }\n        };\n\n        /**\n         * Badge types\n         */\n        var type = {};\n        var options = function(opt) {\n            opt.n = ((typeof opt.n)==='number') ? Math.abs(opt.n|0) : opt.n;\n            opt.x = _w * opt.x;\n            opt.y = _h * opt.y;\n            opt.w = _w * opt.w;\n            opt.h = _h * opt.h;\n            opt.len = (\"\" + opt.n).length;\n            return opt;\n        };\n        /**\n         * Generate circle\n         * @param {Object} opt Badge options\n         */\n        type.circle = function(opt) {\n            opt = options(opt);\n            var more = false;\n            if (opt.len === 2) {\n                opt.x = opt.x - opt.w * 0.4;\n                opt.w = opt.w * 1.4;\n                more = true;\n            } else if (opt.len >= 3) {\n                opt.x = opt.x - opt.w * 0.65;\n                opt.w = opt.w * 1.65;\n                more = true;\n            }\n            _context.clearRect(0, 0, _w, _h);\n            _context.drawImage(_img, 0, 0, _w, _h);\n            _context.beginPath();\n            _context.font = _opt.fontStyle + \" \" + Math.floor(opt.h * (opt.n > 99 ? 0.85 : 1)) + \"px \" + _opt.fontFamily;\n            _context.textAlign = 'center';\n            if (more) {\n                _context.moveTo(opt.x + opt.w / 2, opt.y);\n                _context.lineTo(opt.x + opt.w - opt.h / 2, opt.y);\n                _context.quadraticCurveTo(opt.x + opt.w, opt.y, opt.x + opt.w, opt.y + opt.h / 2);\n                _context.lineTo(opt.x + opt.w, opt.y + opt.h - opt.h / 2);\n                _context.quadraticCurveTo(opt.x + opt.w, opt.y + opt.h, opt.x + opt.w - opt.h / 2, opt.y + opt.h);\n                _context.lineTo(opt.x + opt.h / 2, opt.y + opt.h);\n                _context.quadraticCurveTo(opt.x, opt.y + opt.h, opt.x, opt.y + opt.h - opt.h / 2);\n                _context.lineTo(opt.x, opt.y + opt.h / 2);\n                _context.quadraticCurveTo(opt.x, opt.y, opt.x + opt.h / 2, opt.y);\n            } else {\n                _context.arc(opt.x + opt.w / 2, opt.y + opt.h / 2, opt.h / 2, 0, 2 * Math.PI);\n            }\n            _context.fillStyle = 'rgba(' + _opt.bgColor.r + ',' + _opt.bgColor.g + ',' + _opt.bgColor.b + ',' + opt.o + ')';\n            _context.fill();\n            _context.closePath();\n            _context.beginPath();\n            _context.stroke();\n            _context.fillStyle = 'rgba(' + _opt.textColor.r + ',' + _opt.textColor.g + ',' + _opt.textColor.b + ',' + opt.o + ')';\n            //_context.fillText((more) ? '9+' : opt.n, Math.floor(opt.x + opt.w / 2), Math.floor(opt.y + opt.h - opt.h * 0.15));\n            if ((typeof opt.n)==='number' && opt.n > 999) {\n                _context.fillText(((opt.n > 9999) ? 9 : Math.floor(opt.n / 1000) ) + 'k+', Math.floor(opt.x + opt.w / 2), Math.floor(opt.y + opt.h - opt.h * 0.2));\n            } else {\n                _context.fillText(opt.n, Math.floor(opt.x + opt.w / 2), Math.floor(opt.y + opt.h - opt.h * 0.15));\n            }\n            _context.closePath();\n        };\n        /**\n         * Generate rectangle\n         * @param {Object} opt Badge options\n         */\n        type.rectangle = function(opt) {\n            opt = options(opt);\n            var more = false;\n            if (opt.len === 2) {\n                opt.x = opt.x - opt.w * 0.4;\n                opt.w = opt.w * 1.4;\n                more = true;\n            } else if (opt.len >= 3) {\n                opt.x = opt.x - opt.w * 0.65;\n                opt.w = opt.w * 1.65;\n                more = true;\n            }\n            _context.clearRect(0, 0, _w, _h);\n            _context.drawImage(_img, 0, 0, _w, _h);\n            _context.beginPath();\n            _context.font = \"bold \" + Math.floor(opt.h * (opt.n > 99 ? 0.9 : 1)) + \"px sans-serif\";\n            _context.textAlign = 'center';\n            _context.fillStyle = 'rgba(' + _opt.bgColor.r + ',' + _opt.bgColor.g + ',' + _opt.bgColor.b + ',' + opt.o + ')';\n            _context.fillRect(opt.x, opt.y, opt.w, opt.h);\n            _context.fillStyle = 'rgba(' + _opt.textColor.r + ',' + _opt.textColor.g + ',' + _opt.textColor.b + ',' + opt.o + ')';\n            //_context.fillText((more) ? '9+' : opt.n, Math.floor(opt.x + opt.w / 2), Math.floor(opt.y + opt.h - opt.h * 0.15));\n            if ((typeof opt.n)==='number' && opt.len > 3) {\n                _context.fillText(((opt.n > 9999) ? 9 : Math.floor(opt.n / 1000) ) + 'k+', Math.floor(opt.x + opt.w / 2), Math.floor(opt.y + opt.h - opt.h * 0.2));\n            } else {\n                _context.fillText(opt.n, Math.floor(opt.x + opt.w / 2), Math.floor(opt.y + opt.h - opt.h * 0.15));\n            }\n            _context.closePath();\n        };\n\n        /**\n         * Set badge\n         */\n        var badge = function(number, opts) {\n            opts = ((typeof opts)==='string' ? {animation:opts} : opts) || {};\n            _readyCb = function() {\n                try {\n                    if (typeof(number)==='number' ? (number > 0) : (number !== '')) {\n                        var q = {\n                            type : 'badge',\n                            options : {\n                                n : number\n                            }\n                        };\n                        if ('animation' in opts &&\n                            animation.types['' + opts.animation]) {\n                            q.options.animation = '' + opts.animation;\n                        }\n                        if ('type' in opts && type['' + opts.type]) {\n                            q.options.type = '' + opts.type;\n                        }\n                        ['bgColor', 'textColor'].forEach(function(o) {\n                            if (o in opts) {\n                                q.options[o] = hexToRgb(opts[o]);\n                            }\n                        });\n                        ['fontStyle', 'fontFamily'].forEach(function(o) {\n                            if (o in opts) {\n                                q.options[o] = opts[o];\n                            }\n                        });\n                        _queue.push(q);\n                        if (_queue.length > 100) {\n                            throw 'Too many badges requests in queue.';\n                        }\n                        icon.start();\n                    } else {\n                        icon.reset();\n                    }\n                } catch(e) {\n                    throw 'Error setting badge. Message: ' + e.message;\n                }\n            };\n            if (_ready) {\n                _readyCb();\n            }\n        };\n\n        /**\n         * Set image as icon\n         */\n        var image = function(imageElement) {\n            _readyCb = function() {\n                try {\n                    var w = imageElement.width;\n                    var h = imageElement.height;\n                    var newImg = document.createElement('img');\n                    var ratio = (w / _w < h / _h) ? (w / _w) : (h / _h);\n                    newImg.setAttribute('src', imageElement.getAttribute('src'));\n                    newImg.height = (h / ratio);\n                    newImg.width = (w / ratio);\n                    _context.clearRect(0, 0, _w, _h);\n                    _context.drawImage(newImg, 0, 0, _w, _h);\n                    link.setIcon(_canvas);\n                } catch(e) {\n                    throw 'Error setting image. Message: ' + e.message;\n                }\n            };\n            if (_ready) {\n                _readyCb();\n            }\n        };\n        /**\n         * Set video as icon\n         */\n        var video = function(videoElement) {\n            _readyCb = function() {\n                try {\n                    if (videoElement === 'stop') {\n                        _stop = true;\n                        icon.reset();\n                        _stop = false;\n                        return;\n                    }\n                    //var w = videoElement.width;\n                    //var h = videoElement.height;\n                    //var ratio = (w / _w < h / _h) ? (w / _w) : (h / _h);\n                    videoElement.addEventListener('play', function() {\n                        drawVideo(this);\n                    }, false);\n\n                } catch(e) {\n                    throw 'Error setting video. Message: ' + e.message;\n                }\n            };\n            if (_ready) {\n                _readyCb();\n            }\n        };\n        /**\n         * Set video as icon\n         */\n        var webcam = function(action) {\n            //UR\n            if (!window.URL || !window.URL.createObjectURL) {\n                window.URL = window.URL || {};\n                window.URL.createObjectURL = function(obj) {\n                    return obj;\n                };\n            }\n            if (_browser.supported) {\n                var newVideo = false;\n                navigator.getUserMedia = navigator.getUserMedia || navigator.oGetUserMedia || navigator.msGetUserMedia || navigator.mozGetUserMedia || navigator.webkitGetUserMedia;\n                _readyCb = function() {\n                    try {\n                        if (action === 'stop') {\n                            _stop = true;\n                            icon.reset();\n                            _stop = false;\n                            return;\n                        }\n                        newVideo = document.createElement('video');\n                        newVideo.width = _w;\n                        newVideo.height = _h;\n                        navigator.getUserMedia({\n                            video : true,\n                            audio : false\n                        }, function(stream) {\n                            newVideo.src = URL.createObjectURL(stream);\n                            newVideo.play();\n                            drawVideo(newVideo);\n                        }, function() {\n                        });\n                    } catch(e) {\n                        throw 'Error setting webcam. Message: ' + e.message;\n                    }\n                };\n                if (_ready) {\n                    _readyCb();\n                }\n            }\n\n        };\n\n        /**\n         * Draw video to context and repeat :)\n         */\n        function drawVideo(video) {\n            if (video.paused || video.ended || _stop) {\n                return false;\n            }\n            //nasty hack for FF webcam (Thanks to Julian Ä†wirko, kontakt@redsunmedia.pl)\n            try {\n                _context.clearRect(0, 0, _w, _h);\n                _context.drawImage(video, 0, 0, _w, _h);\n            } catch(e) {\n\n            }\n            _drawTimeout = setTimeout(drawVideo, animation.duration, video);\n            link.setIcon(_canvas);\n        }\n\n        var link = {};\n        /**\n         * Get icon from HEAD tag or create a new <link> element\n         */\n        link.getIcon = function() {\n            var elm = false;\n            var url = '';\n            //get link element\n            var getLink = function() {\n                var link = document.getElementsByTagName('head')[0].getElementsByTagName('link');\n                for (var l = link.length, i = (l - 1); i >= 0; i--) {\n                    if ((/(^|\\s)icon(\\s|$)/i).test(link[i].getAttribute('rel'))) {\n                        return link[i];\n                    }\n                }\n                return false;\n            };\n            if (_opt.elementId) {\n                //if img element identified by elementId\n                elm = document.getElementById(_opt.elementId);\n                elm.setAttribute('href', elm.getAttribute('src'));\n            } else {\n                //if link element\n                elm = getLink();\n                if (elm === false) {\n                    elm = document.createElement('link');\n                    elm.setAttribute('rel', 'icon');\n                    document.getElementsByTagName('head')[0].appendChild(elm);\n                }\n            }\n            //check if image and link url is on same domain. if not raise error\n            url = (_opt.elementId) ? elm.src : elm.href;\n            if (url.indexOf(document.location.hostname) === -1) {\n                throw new Error('Error setting favicon. Favicon image is on different domain (Icon: ' + url + ', Domain: ' + document.location.hostname + ')');\n            }\n            elm.setAttribute('type', 'image/png');\n            return elm;\n        };\n        link.setIcon = function(canvas) {\n            var url = canvas.toDataURL('image/png');\n            if (_opt.elementId) {\n                //if is attached to element (image)\n                document.getElementById(_opt.elementId).setAttribute('src', url);\n            } else {\n                //if is attached to fav icon\n                if (_browser.ff || _browser.opera) {\n                    //for FF we need to \"recreate\" element, atach to dom and remove old <link>\n                    //var originalType = _orig.getAttribute('rel');\n                    var old = _orig;\n                    _orig = document.createElement('link');\n                    //_orig.setAttribute('rel', originalType);\n                    if (_browser.opera) {\n                        _orig.setAttribute('rel', 'icon');\n                    }\n                    _orig.setAttribute('rel', 'icon');\n                    _orig.setAttribute('type', 'image/png');\n                    document.getElementsByTagName('head')[0].appendChild(_orig);\n                    _orig.setAttribute('href', url);\n                    if (old.parentNode) {\n                        old.parentNode.removeChild(old);\n                    }\n                } else {\n                    _orig.setAttribute('href', url);\n                }\n            }\n        };\n\n        //http://stackoverflow.com/questions/5623838/rgb-to-hex-and-hex-to-rgb#answer-5624139\n        //HEX to RGB convertor\n        function hexToRgb(hex) {\n            var shorthandRegex = /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i;\n            hex = hex.replace(shorthandRegex, function(m, r, g, b) {\n                return r + r + g + g + b + b;\n            });\n            var result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n            return result ? {\n                r : parseInt(result[1], 16),\n                g : parseInt(result[2], 16),\n                b : parseInt(result[3], 16)\n            } : false;\n        }\n\n        /**\n         * Merge options\n         */\n        function merge(def, opt) {\n            var mergedOpt = {};\n            var attrname;\n            for (attrname in def) {\n                mergedOpt[attrname] = def[attrname];\n            }\n            for (attrname in opt) {\n                mergedOpt[attrname] = opt[attrname];\n            }\n            return mergedOpt;\n        }\n\n        /**\n         * Cross-browser page visibility shim\n         * http://stackoverflow.com/questions/12536562/detect-whether-a-window-is-visible\n         */\n        function isPageHidden() {\n            return document.hidden || document.msHidden || document.webkitHidden || document.mozHidden;\n        }\n\n        /**\n         * @namespace animation\n         */\n        var animation = {};\n        /**\n         * Animation \"frame\" duration\n         */\n        animation.duration = 40;\n        /**\n         * Animation types (none,fade,pop,slide)\n         */\n        animation.types = {};\n        animation.types.fade = [{\n            x : 0.4,\n            y : 0.4,\n            w : 0.6,\n            h : 0.6,\n            o : 0.0\n        }, {\n            x : 0.4,\n            y : 0.4,\n            w : 0.6,\n            h : 0.6,\n            o : 0.1\n        }, {\n            x : 0.4,\n            y : 0.4,\n            w : 0.6,\n            h : 0.6,\n            o : 0.2\n        }, {\n            x : 0.4,\n            y : 0.4,\n            w : 0.6,\n            h : 0.6,\n            o : 0.3\n        }, {\n            x : 0.4,\n            y : 0.4,\n            w : 0.6,\n            h : 0.6,\n            o : 0.4\n        }, {\n            x : 0.4,\n            y : 0.4,\n            w : 0.6,\n            h : 0.6,\n            o : 0.5\n        }, {\n            x : 0.4,\n            y : 0.4,\n            w : 0.6,\n            h : 0.6,\n            o : 0.6\n        }, {\n            x : 0.4,\n            y : 0.4,\n            w : 0.6,\n            h : 0.6,\n            o : 0.7\n        }, {\n            x : 0.4,\n            y : 0.4,\n            w : 0.6,\n            h : 0.6,\n            o : 0.8\n        }, {\n            x : 0.4,\n            y : 0.4,\n            w : 0.6,\n            h : 0.6,\n            o : 0.9\n        }, {\n            x : 0.4,\n            y : 0.4,\n            w : 0.6,\n            h : 0.6,\n            o : 1.0\n        }];\n        animation.types.none = [{\n            x : 0.4,\n            y : 0.4,\n            w : 0.6,\n            h : 0.6,\n            o : 1\n        }];\n        animation.types.pop = [{\n            x : 1,\n            y : 1,\n            w : 0,\n            h : 0,\n            o : 1\n        }, {\n            x : 0.9,\n            y : 0.9,\n            w : 0.1,\n            h : 0.1,\n            o : 1\n        }, {\n            x : 0.8,\n            y : 0.8,\n            w : 0.2,\n            h : 0.2,\n            o : 1\n        }, {\n            x : 0.7,\n            y : 0.7,\n            w : 0.3,\n            h : 0.3,\n            o : 1\n        }, {\n            x : 0.6,\n            y : 0.6,\n            w : 0.4,\n            h : 0.4,\n            o : 1\n        }, {\n            x : 0.5,\n            y : 0.5,\n            w : 0.5,\n            h : 0.5,\n            o : 1\n        }, {\n            x : 0.4,\n            y : 0.4,\n            w : 0.6,\n            h : 0.6,\n            o : 1\n        }];\n        animation.types.popFade = [{\n            x : 0.75,\n            y : 0.75,\n            w : 0,\n            h : 0,\n            o : 0\n        }, {\n            x : 0.65,\n            y : 0.65,\n            w : 0.1,\n            h : 0.1,\n            o : 0.2\n        }, {\n            x : 0.6,\n            y : 0.6,\n            w : 0.2,\n            h : 0.2,\n            o : 0.4\n        }, {\n            x : 0.55,\n            y : 0.55,\n            w : 0.3,\n            h : 0.3,\n            o : 0.6\n        }, {\n            x : 0.50,\n            y : 0.50,\n            w : 0.4,\n            h : 0.4,\n            o : 0.8\n        }, {\n            x : 0.45,\n            y : 0.45,\n            w : 0.5,\n            h : 0.5,\n            o : 0.9\n        }, {\n            x : 0.4,\n            y : 0.4,\n            w : 0.6,\n            h : 0.6,\n            o : 1\n        }];\n        animation.types.slide = [{\n            x : 0.4,\n            y : 1,\n            w : 0.6,\n            h : 0.6,\n            o : 1\n        }, {\n            x : 0.4,\n            y : 0.9,\n            w : 0.6,\n            h : 0.6,\n            o : 1\n        }, {\n            x : 0.4,\n            y : 0.9,\n            w : 0.6,\n            h : 0.6,\n            o : 1\n        }, {\n            x : 0.4,\n            y : 0.8,\n            w : 0.6,\n            h : 0.6,\n            o : 1\n        }, {\n            x : 0.4,\n            y : 0.7,\n            w : 0.6,\n            h : 0.6,\n            o : 1\n        }, {\n            x : 0.4,\n            y : 0.6,\n            w : 0.6,\n            h : 0.6,\n            o : 1\n        }, {\n            x : 0.4,\n            y : 0.5,\n            w : 0.6,\n            h : 0.6,\n            o : 1\n        }, {\n            x : 0.4,\n            y : 0.4,\n            w : 0.6,\n            h : 0.6,\n            o : 1\n        }];\n        /**\n         * Run animation\n         * @param {Object} opt Animation options\n         * @param {Object} cb Callabak after all steps are done\n         * @param {Object} revert Reverse order? true|false\n         * @param {Object} step Optional step number (frame bumber)\n         */\n        animation.run = function(opt, cb, revert, step) {\n            var animationType = animation.types[isPageHidden() ? 'none' : _opt.animation];\n            if (revert === true) {\n                step = ( typeof step !== 'undefined') ? step : animationType.length - 1;\n            } else {\n                step = ( typeof step !== 'undefined') ? step : 0;\n            }\n            cb = (cb) ? cb : function() {\n            };\n            if ((step < animationType.length) && (step >= 0)) {\n                type[_opt.type](merge(opt, animationType[step]));\n                _animTimeout = setTimeout(function() {\n                    if (revert) {\n                        step = step - 1;\n                    } else {\n                        step = step + 1;\n                    }\n                    animation.run(opt, cb, revert, step);\n                }, animation.duration);\n\n                link.setIcon(_canvas);\n            } else {\n                cb();\n                return;\n            }\n        };\n        //auto init\n        init();\n        return {\n            badge : badge,\n            video : video,\n            image : image,\n            webcam : webcam,\n            reset : icon.reset\n        };\n    });\n\n    // AMD / RequireJS\n    if ( typeof define !== 'undefined' && define.amd) {\n        define('qui/controls/messages/Favico',[], function() {\n            return Favico;\n        });\n    }\n    // CommonJS\n    else if ( typeof module !== 'undefined' && module.exports) {\n        module.exports = Favico;\n    }\n    // included directly via <script> tag\n    else {\n        this.Favico = Favico;\n    }\n\n})();\n\n"]}