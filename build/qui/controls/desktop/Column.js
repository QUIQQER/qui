define("qui/classes/DOM",[],function(){"use strict";return window.$quistorage={},new Class({Implements:[Options,Events],Type:"qui/classes/DOM",options:{},$uid:null,initialize:function(t){t=t||{},t.events&&(this.addEvents(t.events),delete t.events),t.methods&&(Object.append(this,t.methods),delete t.methods),this.setAttributes(t),this.fireEvent("init",[this])},$family:function(){return"undefined"!=typeof this.Type?this.Type:typeOf(this)},getId:function(){return this.$uid||(this.$uid=String.uniqueID()),this.$uid},getType:function(){return typeOf(this)},setAttribute:function(t,e){if(this.fireEvent("setAttribute",[t,e]),"undefined"!=typeof this.options[t])return this.options[t]=e,this;var i=Slick.uidOf(this);return"undefined"==typeof window.$quistorage[i]&&(window.$quistorage[i]={}),window.$quistorage[i][t]=e,this},destroy:function(){this.fireEvent("destroy",[this]);var t=Slick.uidOf(this);t in window.$quistorage&&delete window.$quistorage[t],this.removeEvents()},setOptions:function(t){this.setAttributes(t)},setAttributes:function(t){t=t||{};for(var e in t)t.hasOwnProperty(e)&&this.setAttribute(e,t[e]);return this},getAttribute:function(t){if(t in this.options)return this.options[t];var e=Slick.uidOf(this);return"undefined"==typeof window.$quistorage[e]?!1:"undefined"!=typeof window.$quistorage[e][t]?window.$quistorage[e][t]:!1},getAllAttributes:function(){return this.getAttributes()},getAttributes:function(){return this.options},getStorageAttributes:function(){var t=Slick.uidOf(this);return t in window.$quistorage?window.$quistorage[t]:{}},existAttribute:function(t){if("undefined"!=typeof this.options[t])return!0;var e=Slick.uidOf(this);return window.$quistorage[e]&&window.$quistorage[e][t]},getEvents:function(t){return"undefined"==typeof this.$events?!1:"undefined"!=typeof this.$events[t]?this.$events[t]:!1}})}),define("qui/classes/Controls",["require","qui/classes/DOM"],function(t,e){"use strict";return new Class({Extends:e,Type:"qui/classes/Controls",initialize:function(){this.$controls={},this.$cids={},this.$types={}},get:function(t){return"undefined"==typeof this.$controls[t]?[]:this.$controls[t]},getById:function(t){return t in this.$cids?this.$cids[t]:!1},getByType:function(t){return t in this.$types?this.$types[t]:[]},loadType:function(e,i){e.match(/qui\//)||(e="qui/"+e),t([e],i)},isControl:function(t){return"undefined"!=typeof t&&t?"undefined"!=typeof t.getType:!1},add:function(t){var e=this,i=t.getAttribute("name"),n=typeOf(t);i&&""!==i||(i="#unknown"),"undefined"==typeof this.$controls[i]&&(this.$controls[i]=[]),"undefined"==typeof this.$types[n]&&(this.$types[n]=[]),this.$controls[i].push(t),this.$types[n].push(t),this.$cids[t.getId()]=t,t.addEvent("onDestroy",function(){e.destroy(t)})},destroy:function(t){var e=t.getAttribute("name"),i=typeOf(t),n=t.getId();e&&""!==e||(e="#unknown"),"undefined"!=typeof this.$cids[n]&&delete this.$cids[n];var s,o,r=[];if("undefined"!=typeof this.$controls[e]){for(s=0,o=this.$controls[e].length;o>s;s++)n!==this.$controls[e][s].getId()&&r.push(this.$controls[e][s]);this.$controls[e]=r,r.length||delete this.$controls[e]}if(r=[],"undefined"!=typeof this.$types[i])for(s=0,o=this.$types[i].length;o>s;s++)n!==this.$types[i][s].getId()&&r.push(this.$types[i][s]);this.$types[i]=r}})});var needle=["qui/classes/DOM"];("undefined"==typeof window.localStorage||"undefined"==typeof window.sessionStorage)&&needle.push("qui/classes/storage/Polyfill"),define("qui/classes/storage/Storage",needle,function(t){"use strict";return new Class({Extends:t,Type:"qui/classes/storage/Storage",$data:{},set:function(t,e){try{window.localStorage.setItem(t,e)}catch(i){this.$data[t]=e}},get:function(t){try{return window.localStorage.getItem(t)}catch(e){}return"undefined"!=typeof this.$data[t]?this.$data[t]:null},remove:function(t){try{window.localStorage.removeItem(t)}catch(e){}"undefined"!=typeof this.$data[t]&&delete this.$data[t]},clear:function(){this.$data={};try{window.localStorage.clear()}catch(t){}}})}),define("qui/classes/QUI",["require","qui/classes/DOM","qui/classes/Controls","qui/classes/storage/Storage"],function(t,e,i,n){"use strict";return new Class({Extends:e,Type:"qui/classes/QUI",initialize:function(e){if(this.setAttributes({debug:!1,fetchErrors:!0}),this.parent(e),this.getAttribute("fetchErrors")){var s=this;t.onError=function(t,e){s.trigger("ERROR :"+t+"\nRequire :"+e)},window.onerror=this.trigger.bind(this)}this.Controls=new i,this.Storage=new n,this.MessageHandler=null},namespace:function(){for(var t,e=arguments,i=this,n=0,s=0,o=e.length,r=null,l=null;o>n;n+=1)for(r=e[n].split("."),t=r.length,s=0;t>s;s+=1)l=r[s],i[l]=i[l]||{},i=i[l];return i},parse:function(e,i){if("undefined"==typeof e&&(e=document.body),"element"!==typeOf(e))return void("undefined"!=typeof i&&i());var n=e.getElements("[data-qui]"),s=n.map(function(t){return t.get("data-qui")});t(s,function(){var t,e,o,r,l={TEXTAREA:!0,INPUT:!0};for(t=0,e=s.length;e>t;t++)o=arguments[t],r=n[t],r.get("data-quiid")||(""!==r.get("html").trim()||"undefined"!=typeof l[r.nodeName]?(new o).import(r):(new o).replaces(r));"undefined"!=typeof i&&i()})},triggerError:function(t){return this.trigger(t.getMessage(),"",0)},trigger:function(t,e,i){return this.fireEvent("error",[t,e,i]),this},getMessageHandler:function(e){if("undefined"!=typeof this.$execGetMessageHandler&&!this.MessageHandler)return this.$execGetMessageHandler=!0,void function(){this.getMessageHandler(e)}.delay(20,this);if(this.$execGetMessageHandler=!0,this.MessageHandler)return void e(this.MessageHandler);var i=this;t(["qui/controls/messages/Handler"],function(t){i.MessageHandler=new t,e(i.MessageHandler)})},getControls:function(t){this.Controls&&t(this.Controls)}})}),define("qui/QUI",["qui/classes/QUI"],function(t){"use strict";return"undefined"==typeof window.QUI&&(window.QUI=new t),document.fireEvent("qui-loaded"),document.addEvent("domready",function(){window.QUI.parse(document.body)}),window.QUI}),define("qui/classes/Locale",["qui/classes/DOM"],function(t){"use strict";return new Class({Extends:t,Type:"qui/classes/Locale",current:"en",langs:{},no_translation:!1,initialize:function(t){this.parent(t)},setCurrent:function(t){this.current=t},getCurrent:function(){return this.current},set:function(t,e,i,n){if(this.langs[t]||(this.langs[t]={}),this.langs[t][e]||(this.langs[t][e]={}),"undefined"!=typeof n)return this.langs[t][e][i]=n,this;var s=this.langs[t][e];for(var o in i)i.hasOwnProperty(o)&&(s[o]=i[o]);this.langs[t][e]=s},get:function(t,e,i){if("undefined"==typeof i)return this.$get(t,e);var n=this.$get(t,e);for(t in i)i.hasOwnProperty(t)&&(n=n.replace("["+t+"]",i[t]));return n},$get:function(t,e){return this.no_translation?"["+t+"] "+e:this.langs[this.current]&&this.langs[this.current][t]&&this.langs[this.current][t][e]?this.langs[this.current][t][e]:this.langs[this.current]&&this.langs[this.current][t]&&"undefined"==typeof e?this.langs[this.current][t]:(this.fireEvent("error",["No translation found for ["+t+"] "+e,this]),"["+t+"] "+e)}})}),define("qui/Locale",["qui/classes/Locale"],function(t){"use strict";return"undefined"==typeof window.QUILocale&&(window.QUILocale=new t),window.QUILocale}),define("qui/lib/require-css/normalize",[],function(){function t(t,i,s){if(t.match(l)||t.match(r))return t;t=o(t);var u=s.match(r),h=i.match(r);return!h||u&&u[1]==h[1]&&u[2]==h[2]?n(e(t,i),s):e(t,i)}function e(t,e){if("./"==t.substr(0,2)&&(t=t.substr(2)),t.match(l)||t.match(r))return t;var i=e.split("/"),n=t.split("/");for(i.pop();curPart=n.shift();)".."==curPart?i.pop():i.push(curPart);return i.join("/")}function n(t,e){var n=e.split("/");for(n.pop(),e=n.join("/")+"/",i=0;e.substr(i,1)==t.substr(i,1);)i++;for(;"/"!=e.substr(i,1);)i--;e=e.substr(i+1),t=t.substr(i+1),n=e.split("/");var s=t.split("/");for(out="";n.shift();)out+="../";for(;curPart=s.shift();)out+=curPart+"/";return out.substr(0,out.length-1)}var s=/([^:])\/+/g,o=function(t){return t.replace(s,"$1/")},r=/[^\:\/]*:\/\/([^\/])*/,l=/^(\/|data:)/,u=function(e,i,n){i=o(i),n=o(n);for(var s,r,e,l=/@import\s*("([^"]*)"|'([^']*)')|url\s*\(\s*(\s*"([^"]*)"|'([^']*)'|[^\)]*\s*)\s*\)/gi;s=l.exec(e);){r=s[3]||s[2]||s[5]||s[6]||s[4];var u;u=t(r,i,n);var h=s[5]||s[6]?1:0;e=e.substr(0,l.lastIndex-r.length-h-1)+u+e.substr(l.lastIndex-h-1),l.lastIndex=l.lastIndex+(u.length-r.length)}return e};return u.convertURIBase=t,u.absoluteURI=e,u.relativeURI=n,u}),define("qui/lib/require-css/css",[],function(){if("undefined"==typeof window)return{load:function(t,e,i){i()}};var t=document.getElementsByTagName("head")[0],e=window.navigator.userAgent.match(/Trident\/([^ ;]*)|AppleWebKit\/([^ ;]*)|Opera\/([^ ;]*)|rv\:([^ ;]*)(.*?)Gecko\/([^ ;]*)|MSIE\s([^ ;]*)/)||0,i=!1,n=!0;e[1]||e[7]?i=parseInt(e[1])<6||parseInt(e[7])<=9:e[2]?n=!1:e[4]&&(i=parseInt(e[4])<18);var s={};s.pluginBuilder="./css-builder";var o,r,l,u=function(){o=document.createElement("style"),t.appendChild(o),r=o.styleSheet||o.sheet},h=0,a=[],c=function(t){h++,32==h&&(u(),h=0),r.addImport(t),o.onload=d},d=function(){l();var t=a.shift();return t?(l=t[1],void c(t[0])):void(l=null)},g=function(t,e){if(r&&r.addImport||u(),r&&r.addImport)l?a.push([t,e]):(c(t),l=e);else{o.textContent='@import "'+t+'";';var i=setInterval(function(){try{o.sheet.cssRules,clearInterval(i),e()}catch(t){}},10)}},f=function(e,i){var s=document.createElement("link");if(s.type="text/css",s.rel="stylesheet",n)s.onload=function(){s.onload=function(){},setTimeout(i,7)};else var o=setInterval(function(){for(var t=0;t<document.styleSheets.length;t++){var e=document.styleSheets[t];if(e.href==s.href)return clearInterval(o),i()}},10);s.href=e,t.appendChild(s)};return s.normalize=function(t,e){return".css"==t.substr(t.length-4,4)&&(t=t.substr(0,t.length-4)),e(t)},s.load=function(t,e,n){(i?g:f)(e.toUrl(t+".css"),n)},s}),define("qui/lib/require-css/css!qui/controls/Control",[],function(){}),define("qui/controls/Control",["qui/QUI","qui/Locale","qui/classes/DOM","css!qui/controls/Control.css"],function(t,e,i){"use strict";return new Class({Extends:i,Type:"qui/controls/Control",$Parent:null,options:{name:""},initialize:function(e){this.parent(e),this.addEvent("onDestroy",function(){"undefined"!=typeof this.$Elm&&this.$Elm&&this.$Elm.destroy(),this.$Elm=null}.bind(this)),t.Controls.add(this)},create:function(){return this.$Elm?this.$Elm:(this.$Elm=new Element("div.qui-control"),this.$Elm.set("data-quiid",this.getId()),this.$Elm)},inject:function(e,i){return this.fireEvent("drawBegin",[this]),"undefined"!=typeof this.$Elm&&this.$Elm||(this.$Elm=this.create()),"undefined"!=typeof t&&"undefined"!=typeof t.Controls&&t.Controls.isControl(e)?e.appendChild(this):this.$Elm.inject(e,i),this.$Elm.set("data-quiid",this.getId()),this.fireEvent("inject",[this]),this},"import":function(t){return this.$Elm=t,this.$Elm.set("data-quiid",this.getId()),this.fireEvent("import",[this,t]),this},replaces:function(t){return this.$Elm?this.$Elm:("styles"in t&&this.setAttribute("styles",t.styles),this.$Elm=this.create(),this.$Elm.set("data-quiid",this.getId()),this.$Elm.set("data-qui",t.get("data-qui")),t.getParent()&&this.$Elm.replaces(t),this)},serialize:function(){return{attributes:this.getAttributes(),type:this.getType()}},unserialize:function(t){t.attributes&&this.setAttributes(t.attributes)},getElm:function(){return"undefined"!=typeof this.$Elm&&this.$Elm||this.create(),this.$Elm},getParent:function(){return this.$Parent||!1},setParent:function(t){return this.$Parent=t,this},getPath:function(){var t="/"+this.getAttribute("name"),e=this.getParent();return e?e.getPath()+t:t},hide:function(){return this.$Elm&&this.$Elm.setStyle("display","none"),this},show:function(){return this.$Elm&&this.$Elm.setStyle("display",null),this},isHidden:function(){return this.$Elm?"none"==this.$Elm.getStyle("display"):!0},highlight:function(){return this.fireEvent("highlight",[this]),this},normalize:function(){return this.fireEvent("normalize",[this]),this},focus:function(){if(this.$Elm)try{this.$Elm.focus()}catch(t){}return this},resize:function(){this.fireEvent("resize",[this])},openSheet:function(t,i){var n=this;i=i||{},i=Object.merge({buttons:!0},i);var s=new Element("div",{"class":"qui-sheet qui-box",html:'<div class="qui-sheet-content box"></div><div class="qui-sheet-buttons box"><div class="qui-sheet-buttons-back qui-button btn-white"><span>'+e.get("qui/controls/Control","btn.back")+"</span></div></div>",styles:{left:"-110%"}}).inject(this.$Elm);s.getElement(".qui-sheet-buttons-back").addEvent("click",function(){s.fireEvent("close")});var o=this.getElm().getStyle("overflow");s.addEvent("close",function(){n.getElm().setStyle("overflow",o),moofx(s).animate({left:"-100%",opacity:0},{equation:"ease-in",callback:function(){s.destroy()}})});var r=s.getElement(".qui-sheet-content");return r.setStyles({height:s.getSize().y-50}),this.getElm().setStyle("overflow","hidden"),i.buttons===!1&&s.getElement(".qui-sheet-buttons").destroy(),moofx(s).animate({left:0},{equation:"ease-out",callback:function(){t(r,s)}}),s}})}),define("qui/utils/Elements",{isInViewport:function(t){"use strict";var e=t.getBoundingClientRect();return e.top>=0&&e.left>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth)},getComputedZIndex:function(t){"use strict";var e,i,n,s=0,o=t.getParents();for(e=0,n=o.length;n>e;e++)i=o[e].getStyle("zIndex"),"auto"!=i&&i>s&&(s=i);return s},getChildIndex:function(t){"use strict";return Array.prototype.indexOf.call(t.getParent().children,t)},getCursorPosition:function(t){"use strict";if("INPUT"!==t.nodeName)return null;if("selectionStart"in t)return t.selectionStart;if(document.selection){t.focus();var e=document.selection.createRange(),i=e.text.length;return e.moveStart("character",-t.value.length),e.text.length-i}return null},setCursorPosition:function(t,e){"use strict";if("INPUT"!==t.nodeName&&"TEXTAREA"!==t.nodeName)return null;if(t.createTextRange){var i=t.createTextRange();return i.move("character",e),void i.select()}return t.selectionStart?(t.focus(),void t.setSelectionRange(e+1,e+1)):void t.focus()}}),define("qui/lib/require-css/css!qui/controls/contextmenu/Menu",[],function(){}),define("qui/controls/contextmenu/Menu",["qui/QUI","qui/controls/Control","qui/utils/Elements","css!qui/controls/contextmenu/Menu.css"],function(t,e,i){"use strict";return new Class({Extends:e,Type:"qui/controls/contextmenu/Menu",Binds:["$keyup"],options:{styles:null,width:200,title:!1,shadow:!0,corner:!1,dragable:!1},initialize:function(t){this.parent(t),this.$items=[],this.$Title=null,this.$Active=null},create:function(){this.$Elm=new Element("div.qui-contextmenu",{html:'<div class="qui-contextmenu-container"></div>',tabindex:-1,styles:{display:"none",outline:"none","-moz-outline":"none"},events:{blur:function(){this.fireEvent("blur",[this])}.bind(this),keyup:this.$keyup},"data-quiid":this.getId()}),this.$Container=this.$Elm.getElement(".qui-contextmenu-container"),this.getAttribute("width")&&this.$Elm.setStyle("width",this.getAttribute("width")),this.getAttribute("styles")&&this.$Elm.setStyles(this.getAttribute("styles")),this.getAttribute("title")&&this.setTitle(this.getAttribute("title")),this.getAttribute("shadow")&&this.$Container.addClass("qui-contextmenu-shadow");for(var t=0,e=this.$items.length;e>t;t++)this.$items[t].inject(this.$Container);return this.$Elm},show:function(){if(!this.$Elm)return this;var e=this.$Elm.getParent(),n=this.$Elm;switch(this.getAttribute("corner")&&(n.removeClass("qui-context-corner-top"),n.removeClass("qui-context-corner-bottom"),n.removeClass("qui-context-corner-left"),n.removeClass("qui-context-corner-left")),this.getAttribute("corner")){case"top":n.addClass("qui-context-corner-top");break;case"bottom":n.addClass("qui-context-corner-bottom");break;case"left":n.addClass("qui-context-corner-left");break;case"right":n.addClass("qui-context-corner-right")}if(this.getParent()&&t.Controls.isControl(this.getParent())){var s=this.getParent().getElm();s&&n.setStyle("zIndex",i.getComputedZIndex(s)+1)}n.setStyles({display:""});var o=n.getSize();if(this.$Container.setStyles({height:o.y}),this.setAttribute("menuPosLeft",!1),"BODY"===e.nodeName){var r=n.getPosition(),l=e.getSize();r.x+o.x+50>l.x&&this.$Elm.setStyle("left",l.x-o.x-50),r.y+o.y+50>l.y&&this.$Elm.setStyle("top",l.y-o.y-50)}return this.$Active&&this.$Active.setActive(),this.fireEvent("show",[this]),this},hide:function(){return this.getElm().setStyles({display:"none"}),this.fireEvent("hide",[this]),this},focus:function(){return this.getElm().focus(),this.fireEvent("focus",[this]),this},setPosition:function(t,e){return this.$Elm&&this.$Elm.setStyles({left:t,top:e}),this},setTitle:function(t){return this.$Container&&!this.$Title&&(this.$Title=new Element("div.qui-contextmenu-title"),this.$Title.inject(this.$Container,"top")),this.$Title&&this.$Title.set("html",t),this.setAttribute("title",t),this},getChildren:function(t){if("undefined"!=typeof t){var e,i,n=this.$items;for(e=0,i=n.length;i>e;e++)if(n[e].getAttribute("name")==t)return n[e];return!1}return this.$items},firstChild:function(){return this.$items[0]?this.$items[0]:!1},count:function(){return this.$items.length},appendChild:function(t){return t&&"undefined"!=typeof t?(this.$items.push(t),t.setParent(this),this.getAttribute("dragable")&&t.setAttribute("dragable",!0),this.$Container&&t.inject(this.$Container),this):this},clearChildren:function(){for(var t=0,e=this.$items.length;e>t;t++)this.$items[t]&&this.$items[t].destroy();return this.$items=[],this},clear:function(){return this.clearChildren()},getActive:function(){return this.$Active?this.$Active:!1},getNext:function(t){for(var e=0,i=this.$items.length;i>e;e++)if(this.$items[e]==t&&"undefined"!=typeof this.$items[e+1])return this.$items[e+1];return!1},getPrevious:function(t){for(var e=this.$items.length-1;e>=0;e--){if(0===e)return!1;if(this.$items[e]==t)return this.$items[e-1]}return!1},deselectItems:function(){return this.$Active&&(this.$Active=null),this},$keyup:function(t){return"down"===t.key?void this.down():"up"===t.key?void this.up(t):void("enter"===t.key&&this.select(t))},up:function(){if(this.$items.length){var t=this.$items.length;if(!this.$Active)return void this.$items[t-1].setActive();var e=this.getPrevious(this.$Active);return this.$Active.setNormal(),e?void e.setActive():void this.$items[t-1].setActive()}},down:function(){if(this.$items.length){if(!this.$Active)return void this.$items[0].setActive();var t=this.getNext(this.$Active);return this.$Active.setNormal(),t?void t.setActive():void this.$items[0].setActive()}},select:function(t){this.$Active&&(this.$Active.fireEvent("mouseDown",[this.$Active,t]),this.$Active.fireEvent("click",[this.$Active,t]))}})}),define("qui/classes/utils/DragDrop",["qui/classes/DOM"],function(t){"use strict";return new Class({Extends:t,Type:"qui/classes/utils/DragDrop",Binds:["$complete","$onDrag","$onDrop","$onLeave","$onEnter"],options:{dropables:[document.body],styles:!1,cssClass:!1,delay:500,limit:{x:!1,y:!1}},initialize:function(t,e){var i=this;this.parent(e),this.$Drag=null,this.$Element=t,this.$enable=!0,"undefined"!=typeof t&&t.addEvents({mousedown:function(t){i.$enable&&(i.setAttribute("_stopdrag",!1),i.$timer=i.$start.delay(i.getAttribute("delay"),i,t),t.stop())},mouseup:function(t){"undefined"!=typeof i.$timer&&clearTimeout(i.$timer),i.$stop(t)}})},getElm:function(){return this.$Elm},enable:function(){this.$enable=!0},disable:function(){this.$enable=!1},$start:function(t){if(this.$enable&&!(t.rightClick||Browser.ie8||this.getAttribute("_mousedown")||this.getAttribute("_stopdrag"))){this.setAttribute("_mousedown",!0);var e=t.page.x,i=t.page.y,n=this.$Element,s=n.getSize(),o=this.getAttribute("limit"),r=document.body.getSize();this.$Drag=new Element("div",{"class":"box",styles:{position:"absolute",top:i-20,left:e-40,zIndex:1e3,MozOutline:"none",outline:0,color:"#fff",padding:10,cursor:"pointer",width:s.x,height:s.y,background:"rgba(0,0,0, 0.5)"}}).inject(document.body),this.getAttribute("styles")&&this.$Drag.setStyles(this.getAttribute("styles")),this.getAttribute("cssClass")&&this.$Drag.addClass(this.getAttribute("cssClass")),this.$Drag.focus(),this.fireEvent("start",[this,this.$Drag,t]),o.x||(o.x=[0,r.x-this.$Drag.getSize().x]),o.y||(o.y=[0,r.y-this.$Drag.getSize().y]);var l=this.getAttribute("dropables");"array"===typeOf(l)&&(l=l.join(",")),new Drag.Move(this.$Drag,{precalculate:!0,droppables:l,onComplete:this.$complete,onDrop:this.$onDrop,onEnter:this.$onEnter,onLeave:this.$onLeave,onDrag:this.$onDrag,limit:o}).start({page:{x:e,y:i}})}},$stop:function(){if(!Browser.ie8){if(!this.getAttribute("_mousedown"))return void this.setAttribute("_stopdrag",!0);this.setAttribute("_mousedown",!1),("undefined"!=typeof this.$Drag||this.$Drag)&&(this.fireEvent("stop",[this,this.$Drag]),this.$Drag.destroy(),this.$Drag=null)}},$complete:function(t){this.fireEvent("complete",[this,t]),this.$stop()},$onDrag:function(t,e){this.fireEvent("drag",[this,t,e])},$onDrop:function(t,e,i){this.fireEvent("drop",[this,t,e,i])},$onEnter:function(t,e){this.fireEvent("enter",[this,t,e])},$onLeave:function(t,e){this.fireEvent("leave",[this,t,e])}})}),define("qui/utils/Controls",["qui/QUI"],function(t){"use strict";return{isFontAwesomeClass:function(t){return t?(t.match(/icon-/)||t.match(/fa-/))&&!t.match(/\./):!1},highlight:function(e){if(e){var i=e.get("data-quiid");i&&t.Controls.getById(i).highlight()}},normalize:function(e){if(e){var i=e.get("data-quiid");i&&t.Controls.getById(i).normalize()}}}}),define("qui/lib/require-css/css!qui/controls/contextmenu/Item",[],function(){}),define("qui/controls/contextmenu/Item",["qui/QUI","qui/controls/Control","qui/classes/utils/DragDrop","qui/controls/contextmenu/Menu","qui/utils/Controls","css!qui/controls/contextmenu/Item.css"],function(QUI,Control,DragDrop,ContextMenu,Utils){"use strict";return new Class({Extends:Control,Type:"qui/controls/contextmenu/Item",Binds:["$onSetAttribute","$stringEvent","$onClick","$onInject","$onMouseEnter","$onMouseLeave","$onMouseUp","$onMouseDown"],options:{text:"",icon:"",styles:null,dragable:!1},initialize:function(options){options=options||{};var self=this,items=options.items||[];delete options.items,this.parent(options),this.$items=[],this.$path="",this.$disabled=!1,this.$Elm=null,this.$Container=null,this.$Menu=null,this.$Text=null,"undefined"!=typeof options.disabled&&options.disabled&&(this.$disabled=!0),this.addEvent("onSetAttribute",this.$onSetAttribute),this.addEvent("onInject",this.$onInject),items.length&&this.insert(items),this.getAttribute("onClick")&&this.addEvent("onClick",function(){try{eval(self.getAttribute("onClick")+"( self )")}catch(e){console.error(e)}})},create:function(){var t,e,i=this;if(this.$Elm=new Element("div.qui-contextitem",{html:'<div class="qui-contextitem-container"><span class="qui-contextitem-icon"></span><span class="qui-contextitem-text"></span></div>',"data-quiid":this.getId(),tabindex:-1,events:{mouseenter:this.$onMouseEnter,mouseleave:this.$onMouseLeave}}),this.$Container=this.$Elm.getElement(".qui-contextitem-container"),this.$Text=this.$Elm.getElement(".qui-contextitem-text"),this.$Container.addEvents({click:this.$onClick,mousedown:this.$onMouseDown,mouseup:this.$onMouseUp}),this.getAttribute("icon")&&""!==this.getAttribute("icon")){var n=this.$Elm.getElement(".qui-contextitem-icon"),s=this.getAttribute("icon");Utils.isFontAwesomeClass(s)?n.addClass(s):n.setStyle("background-image","url("+s+")")}if(this.getAttribute("text")&&""!==this.getAttribute("text")){var o=this.$Elm.getElement(".qui-contextitem-text");o.set({html:this.getAttribute("text")}),this.$onInject.delay(500)}if(this.getAttribute("dragable")&&new DragDrop(this.$Elm,{dropables:".qui-contextitem-dropable",events:{onEnter:function(t,e,i){if(i){var n=i.get("data-quiid");n&&QUI.Controls.getById(n).highlight()}},onLeave:function(t,e,i){if(i){var n=i.get("data-quiid");n&&QUI.Controls.getById(n).normalize()}},onDrop:function(t,e,n){if(n){var s=n.get("data-quiid");if(s){var o=QUI.Controls.getById(s);o.normalize(),o.appendChild(i)}}}}}),e=this.$items.length){this.$Elm.addClass("haschildren");var r=this.getContextMenu();for(t=0;e>t;t++)r.appendChild(this.$items[t])}return this.isDisabled()&&this.disable(),this.$Elm},$onInject:function(){var t=this.$Container.getElement(".qui-contextitem-icon"),e=this.$Container.getElement(".qui-contextitem-text"),i=t.measure(function(){return this.getComputedSize()}),n=this.$Container.measure(function(){return this.getComputedSize()});e.setStyle("width",n.width-i.totalWidth)},insert:function(t){var e=this;return require(["qui/controls/contextmenu/Item","qui/controls/contextmenu/Seperator"],function(i,n){for(var s=0,o=t.length;o>s;s++)e.getAttribute("dragable")&&(t[s].dragable=!0),e.appendChild("qui/controls/contextmenu/Seperator"!=t[s].type?new i(t[s]):new n(t[s]))}),this},click:function(){this.$onClick(!1)},appendChild:function(t){return this.$items.push(t),t.setParent(this),this.$Elm&&(this.$Elm.addClass("haschildren"),t.inject(this.getContextMenu())),this.fireEvent("append",[this,t]),this},disable:function(){return this.$disabled=!0,this.$Elm?(this.$Elm.addClass("qui-contextitem-disabled"),this):this},isDisabled:function(){return this.$disabled},enable:function(){return this.$disabled=!1,this.$Elm?(this.$Elm.removeClass("qui-contextitem-disabled"),this):this},setActive:function(){return this.$Elm&&this.$Elm.hasClass("qui-contextitem-active")?this:(this.$Elm&&(this.$Menu?this.$Container.addClass("qui-contextitem-active"):this.$Elm.addClass("qui-contextitem-active")),this.fireEvent("active",[this]),this)},setNormal:function(){return this.$Elm?(this.$Menu?this.$Container.removeClass("qui-contextitem-active"):this.$Elm.removeClass("qui-contextitem-active"),this.fireEvent("normal",[this]),this):this},getChildren:function(t){return"undefined"!=typeof t?t==this.getAttribute("name")+"-menu"?this.getContextMenu():this.getContextMenu().getChildren(t):this.getContextMenu().getChildren()},getTextElm:function(){return this.$Text},clear:function(){return this.getContextMenu().clear(),this.$items=[],this},getContextMenu:function(){return this.$Menu?this.$Menu:(this.$Menu=new ContextMenu({name:this.getAttribute("name")+"-menu",corner:"left",events:{onShow:function(t){for(var e=t.getChildren(),i=0,n=e.length;n>i;i++)e[i].setNormal()}}}),this.$Menu.inject(this.$Elm),this.$Menu.hide(),this.$Menu.setParent(this),this.$Menu)},$onSetAttribute:function(t,e){if(this.$Elm){if("text"==t)return void this.$Elm.getElement(".qui-contextitem-text").set("html",e);if("icon"==t){var i=this.$Elm.getElement(".qui-contextitem-icon");i.className="qui-contextitem-icon",i.setStyle("background-image",null),Utils.isFontAwesomeClass(e)?i.addClass(e):this.$Container.setStyle("background-image","url("+e+")")}}},$stringEvent:function(event){eval("("+event+"(this));")},$onClick:function(t){if(!this.$disabled){this.fireEvent("click",[this,t]);var e=this.getParent();e&&this.getParent().hide()}},$onMouseEnter:function(){if(!this.$disabled){if(this.$Menu){var t=this.$Elm.getSize(),e=this.$Menu.getParent();if(this.$Menu.setPosition(t.x,0),this.$Menu.show(),e){var i=this.$Menu.getElm(),n=i.getPosition(),s=i.getSize(),o=document.body.getSize();n.x+t.x>o.x&&this.$Menu.setPosition(0-s.x,0)}this.$Container.addClass("qui-contextitem-active")}this.setActive()}},$onMouseLeave:function(){this.$disabled||(this.$Menu&&this.$Menu.hide(),this.$Container.removeClass("qui-contextitem-active"),this.setNormal())},$onMouseUp:function(t){this.fireEvent("mouseUp",[this,t]),this.getAttribute("dragable")===!1&&t.stop()},$onMouseDown:function(t){this.fireEvent("mouseDown",[this,t]),this.getAttribute("dragable")===!1&&t.stop()}})}),define("qui/lib/require-css/css!qui/controls/loader/Loader",[],function(){}),define("qui/controls/loader/Loader",["qui/controls/Control","qui/Locale","css!qui/controls/loader/Loader.css"],function(t,e){"use strict";return new Class({Extends:t,Type:"qui/controls/loader/Loader",options:{cssclass:"",closetime:5e4,styles:!1},initialize:function(t){this.parent(t),this.$delay=null,this.addEvent("onDestroy",function(){this.$Elm.getParent()&&this.$Elm.getParent().removeClass("qui-loader-parent")})},create:function(){return this.$Elm=new Element("div",{"class":"qui-loader",html:'<div class="qui-loader-message"></div><div class="qui-loader-bar"><div class="qui-loader-dot qui-loader-bar1"></div><div class="qui-loader-dot qui-loader-bar2"></div><div class="qui-loader-dot qui-loader-bar3"></div><div class="qui-loader-dot qui-loader-bar4"></div><div class="qui-loader-dot qui-loader-bar5"></div><div class="qui-loader-dot qui-loader-bar6"></div><div class="qui-loader-dot qui-loader-bar7"></div><div class="qui-loader-dot qui-loader-bar8"></div></div>',styles:{display:"none",opacity:.8}}),this.getAttribute("cssclass")&&this.$Elm.addClass(this.getAttribute("cssclass")),this.getAttribute("styles")&&this.$Elm.setStyles(this.getAttribute("styles")),this.$Elm},show:function(t){if(this.$Elm&&this.$Elm.getParent()){var e=this.$Elm.getElement(".qui-loader-message"),i=this.$Elm.getElement(".qui-loader-bar"),n=this.$Elm.getSize();e.set("html","");var s=(n.y-50)/2,o=(n.x-240)/2;0>s&&(n=this.$Elm.measure(function(){return this.getSize()}),s=(n.y-50)/2,o=(n.x-240)/2),i.setStyles({top:s,left:o}),"undefined"!=typeof t&&e.set({html:t,styles:{top:(n.y+20)/2}}),this.$Elm.setStyle("display",""),this.$Elm.getParent().hasClass("qui-window-popup")||this.$Elm.getParent().addClass("qui-loader-parent"),this.getAttribute("closetime")&&(this.$delay&&clearTimeout(this.$delay),this.$delay=function(){this.showCloseButton()}.delay(this.getAttribute("closetime"),this))}},hide:function(){this.$delay&&clearTimeout(this.$delay),this.$Elm&&this.$Elm.setStyle("display","none")},showCloseButton:function(){if(this.$Elm){this.$Elm.set({html:"",styles:{cursor:"pointer"}}),this.$Elm.setStyle("opacity",.9);var t=this;new Element("div",{text:e.get("quiqqer/controls","loader.close"),styles:{"font-weight":"bold","text-align":"center","margin-top":this.$Elm.getSize().y/2-100},events:{click:function(){t.hide()}}}).inject(this.$Elm)}}})}),define("qui/utils/NoSelect",{enable:function(t){"use strict";return"undefined"==typeof t.setProperty&&(t=document.id(t)),t.removeClass("qui-utils-noselect"),Browser.ie?void document.removeEvent("selectstart",this.stopSelection):(t.removeProperty("unselectable","on"),t.removeProperty("unSelectable","on"),void t.setStyles({MozUserSelect:"",KhtmlUserSelect:""}))},disable:function(t){"use strict";return"undefined"==typeof t.setProperty&&(t=document.id(t)),t.addClass("qui-utils-noselect"),Browser.ie?void document.addEvent("selectstart",this.stopSelection):(t.setProperty("unselectable","on"),t.setProperty("unSelectable","on"),void t.setStyles({MozUserSelect:"none",KhtmlUserSelect:"none"}))},stopSelection:function(t){"use strict";return t.stop(),!1}}),define("qui/lib/require-css/css!qui/controls/buttons/Button",[],function(){}),define("qui/controls/buttons/Button",["qui/controls/Control","qui/utils/Controls","qui/utils/NoSelect","css!qui/controls/buttons/Button.css"],function(Control,Utils,NoSelect){"use strict";return new Class({Extends:Control,Type:"qui/controls/buttons/Button",Binds:["onSetAttribute"],options:{type:"button",image:!1,icon:!1,style:{},textimage:!1,text:!1,title:!1,"class":!1,buttonCSSClass:!0,menuCorner:"top",dropDownIcon:!0},params:{},initialize:function(t){t=t||{},this.parent(t),this.$Menu=null,this.$Drop=null,this.$items=[],t.events&&delete t.events,this.setAttributes(this.initV2(t)),this.addEvent("onSetAttribute",this.onSetAttribute),this.addEvent("onDestroy",function(){this.$Menu&&this.$Menu.destroy()}.bind(this))},initV2:function(options){return"undefined"!=typeof options.onclick&&("string"===typeOf(options.onclick)&&(options.onclick=function(p){eval(p+"(this);")}.bind(this,[options.onclick])),this.addEvent("onClick",options.onclick),delete options.onclick),"undefined"!=typeof options.oncreate&&(this.addEvent("onCreate",options.oncreate),delete options.oncreate),options
},create:function(){var t=this,e=new Element("button",{type:this.getAttribute("type"),"data-status":0,"data-quiid":this.getId()});this.getAttribute("buttonCSSClass")&&e.addClass("qui-button"),this.getAttribute("width")&&e.setStyle("width",this.getAttribute("width")),this.getAttribute("height")&&e.setStyle("height",this.getAttribute("height")),this.getAttribute("styles")&&e.setStyles(this.getAttribute("styles")),this.getAttribute("class")&&e.addClass(this.getAttribute("class")),e.style.outline=0,e.setAttribute("tabindex","-1"),e.addEvents({click:function(e){t.isDisabled()||t.onclick(e)},mouseenter:function(){t.isDisabled()||(t.isActive()||t.getElm().addClass("qui-button-over"),t.fireEvent("enter",[t]))},mouseleave:function(){t.isDisabled()||(t.isActive()||t.getElm().removeClass("qui-button-over"),t.fireEvent("leave",[t]))},mousedown:function(e){t.isDisabled()||t.fireEvent("mousedown",[t,e])},mouseup:function(e){t.isDisabled()||t.fireEvent("mouseup",[t,e])},blur:function(e){t.fireEvent("blur",[t,e])},focus:function(e){t.fireEvent("focus",[t,e])}}),this.$Elm=e,this.getAttribute("icon")&&this.setAttribute("icon",this.getAttribute("icon")),!this.getAttribute("icon")&&this.getAttribute("image")&&this.setAttribute("icon",this.getAttribute("image")),this.getAttribute("styles")&&this.setAttribute("styles",this.getAttribute("styles")),this.getAttribute("textimage")&&this.setAttribute("textimage",this.getAttribute("textimage")),this.getAttribute("text")&&this.setAttribute("text",this.getAttribute("text")),this.getAttribute("title")&&this.$Elm.setAttribute("title",this.getAttribute("title")),this.getAttribute("disabled")&&this.disable();var i,n=this.$items.length;return n&&this.getContextMenu(function(e){for(i=0;n>i;i++)e.appendChild(t.$items[i]);t.getAttribute("dropDownIcon")&&(t.$Drop=new Element("div",{"class":"qui-button-drop icon-chevron-down fa fa-chevron-down"}).inject(t.$Elm))}),this.fireEvent("create",[this]),NoSelect.disable(e),this.$Elm},click:function(t){this.isDisabled()||this.fireEvent("click",[this,t])},onclick:function(t){this.click(t)},setActive:function(){if(!this.isDisabled()){var t=this.getElm();t&&(t.addClass("qui-button-active"),t.set("data-status",1),this.fireEvent("active",[this]))}},isActive:function(){return this.getElm()?1==this.getElm().get("data-status"):!1},disable:function(){var t=this.getElm();return t?(t.set({"data-status":-1,disabled:"disabled"}),this.fireEvent("disable",[this]),this):this},setDisable:function(){return this.disable()},isDisabled:function(){return this.getElm()?-1==this.getElm().get("data-status"):!1},enable:function(){return this.getElm()?(this.getElm().set({"data-status":0,disabled:null}),this.setNormal(),this):this},setEnable:function(){return this.enable()},setNormal:function(){if(this.isDisabled())return this;if(!this.getElm())return this;var t=this.getElm();return t.set({"data-status":0,disabled:null}),t.removeClass("qui-button-active"),t.removeClass("qui-button-over"),this.fireEvent("normal",[this]),this},appendChild:function(t){if(this.$items.push(t),t.setAttribute("Button",this),!this.$Elm)return this;var e=this;return this.getContextMenu(function(i){i.appendChild(t),e.getAttribute("dropDownIcon")&&!e.$Drop&&(e.$Drop=new Element("div",{"class":"qui-button-drop icon-chevron-down fa fa-chevron-down"}).inject(e.$Elm))}),this},getChildren:function(){return this.$items},clear:function(){return this.getContextMenu(function(t){t.clearChildren()}),this.$items=[],this},getContextMenu:function(t){if(this.$Menu&&"undefined"==typeof this.$createContextMenu)return t(this.$Menu),this;var e=this;return"undefined"!=typeof this.$createContextMenu?(function(){e.getContextMenu(t)}.delay(10),this):(this.$createContextMenu=!0,void require(["qui/controls/contextmenu/Menu"],function(i){e.$Menu=new i({name:e.getAttribute("name")+"-menu",corner:e.getAttribute("menuCorner")}),e.$Menu.inject(document.body),e.addEvents({onClick:function(){if(!e.isDisabled()){var t=e.$Elm.getPosition(),i=e.$Elm.getSize(),n=e.getAttribute("menuCorner"),s=e.$Menu.getElm().getComputedSize();n.contains("bottom")?e.$Menu.setPosition(t.x-20,t.y-i.y-s.totalHeight+10):e.$Menu.setPosition(t.x-20,t.y+i.y+10),e.$Menu.show(),e.$Elm.focus()}},onBlur:function(){e.$Menu.hide()}}),e.$Menu.setParent(e),delete e.$createContextMenu,t(e.$Menu)}))},onSetAttribute:function(k,value){var Elm=this.getElm();if(Elm){if("onclick"===k)return this.removeEvents("click"),void this.addEvent("click",function(p){eval(p+"(this);")}.bind(this,[value]));if("image"==k&&(k="icon"),"icon"===k){Elm.getElement(".image-container")||new Element("div.image-container",{align:"center"}).inject(Elm);var Image=Elm.getElement(".image-container");return Image.set("html",""),void(Utils.isFontAwesomeClass(value)?new Element("span",{"class":value}).inject(Image):new Element("img.qui-button-image",{src:value,styles:{display:"block"}}).inject(Image))}if("styles"===k)return void Elm.setStyles(value);if("title"===k)return void Elm.setAttribute("title",value);if("textimage"===k||"text"===k){Elm.getElement(".qui-button-text")||new Element("span.qui-button-text").inject(Elm);var Txt=Elm.getElement(".qui-button-text");if("text"===k&&Txt.set("html",value),"textimage"===k){var Img;Elm.getElement(".qui-button-text-image")&&Elm.getElement(".qui-button-text-image").destroy(),Img=Utils.isFontAwesomeClass(value)?new Element("span",{"class":"qui-button-text-image "+value,styles:{"margin-right":0}}).inject(Txt,"before"):new Element("img",{"class":"qui-button-text-image",src:value,styles:{"margin-right":0}}).inject(Txt,"before"),this.getAttribute("text")&&Img.setStyle("margin-right",null)}}}}})}),define("qui/lib/require-css/css!qui/controls/toolbar/Bar",[],function(){}),define("qui/controls/toolbar/Bar",["qui/controls/Control","qui/controls/contextmenu/Menu","qui/controls/contextmenu/Item","qui/controls/buttons/Button","css!qui/controls/toolbar/Bar.css"],function(t,e,i,n){"use strict";return new Class({Extends:t,Type:"qui/controls/toolbar/Bar",options:{"menu-button":!0,slide:!0,width:!1,type:"tabbar"},initialize:function(t){this.Fx=null,this.$Elm=null,this.Tabs=null,this.Menu=null,this.Container=null,this.Active=null,this.BtnLeft=null,this.BtnRight=null,this.items=[],this.btns=[],this.moveLeft=null,this.moveRight=null,this.parent(t)},destroy:function(){var t,e;for(t=0,e=this.items.length;e>t;t++)this.items[t].destroy();for(t=0,e=this.btns.length;e>t;t++)this.btns[t].destroy();this.items=[],this.btns=[],this.$Elm&&this.$Elm.destroy(),this.BtnLeft&&this.BtnLeft.destroy(),this.BtnRight&&this.BtnRight.destroy(),this.Menu&&this.Menu.destroy(),this.Fx=null,this.$Elm=null,this.Tabs=null,this.Menu=null,this.Container=null,this.Active=null,this.BtnLeft=null,this.BtnRight=null},refresh:function(){if(!this.$Elm)return this;var t,e,i,n=this.items;for(this.Tabs.set("html",""),t=0,e=n.length;e>t;t++)i=n[t],i.inject(this.Tabs),this.Menu.appendChild(this.$addContextMenuItm(i));return this.getAttribute("menu-button")===!0?this.Menu.show():this.Menu.hide(),this.getAttribute("slide")===!0?(this.BtnLeft.show(),this.BtnRight.show()):(this.BtnLeft.hide(),this.BtnRight.hide()),this.resize(),this},create:function(){return this.$Elm?(this.refresh(),this.$Elm):(this.$Elm=new Element("div",{"class":"qui-toolbar","data-quiid":this.getId(),html:'<div class="qui-toolbar-container"><div class="qui-toolbar-tabs"></div></div>'}),this.getAttribute("styles")&&this.$Elm.setStyles(this.getAttribute("styles")),this.Tabs=this.$Elm.getElement(".qui-toolbar-tabs"),this.Container=this.$Elm.getElement(".qui-toolbar-container"),this.BtnLeft=new n({name:"toLeft","class":"qui-toolbar-button icon-chevron-left fa fa-icon-chevron-left",events:{onClick:function(t){t.getAttribute("Toolbar").toLeft()}},Toolbar:this}),this.BtnRight=new n({name:"toRight","class":"qui-toolbar-button icon-chevron-right fa fa-icon-chevron-right",events:{onClick:function(t){t.getAttribute("Toolbar").toRight()}},Toolbar:this}),this.Menu=new n({"class":"qui-toolbar-button icon-chevron-down fa fa-icon-chevron-down"}),this.Menu.setParent(this),this.Menu.inject(this.$Elm,"top"),this.BtnLeft.inject(this.$Elm,"top"),this.BtnRight.inject(this.$Elm),this.Tabs.setStyles({position:"relative",left:0,"float":"left"}),this.refresh(),this.Fx=moofx(this.Tabs),this.$Elm)},clear:function(){if(!this.Tabs)return this.fireEvent("clear",[this]),this;var t,e;for(t=0,e=this.items.length;e>t;t++)this.items[t].destroy();for(t=0,e=this.btns.length;e>t;t++)this.btns[t].destroy();return this.Tabs.set("html",""),delete this.items,delete this.Active,this.items=[],this.btns=[],this.Active=null,this.Menu&&(this.Menu.clear(),this.Menu.setDisable()),this.moveLeft&&this.moveLeft.setDisable(),this.moveRight&&this.moveRight.setDisable(),this.Tabs.setStyle("left",0),this.fireEvent("clear",[this]),this},hide:function(){return this.$Elm.setStyles({height:0,overflow:"hidden"}),this},show:function(){return this.$Elm.setStyle("height",null),this.$Elm.setStyle("overflow",null),this},toLeft:function(){return this.Fx?(this.Fx.animate({left:0}),this):this},toRight:function(){var t=this.Tabs.offsetLeft-150;return t<-1*(this.Tabs.offsetWidth-150)&&(t=0),this.Fx.animate({left:t}),this},toTab:function(t){if(this.getAttribute("slide")===!1)return this;if(!this.$Elm)return this;if(t==this.firstChild())return this.Fx.animate({left:0}),this;var e,i=t.getElm(),n=this.$Elm.getElement(".qui-toolbar-container"),s=this.$Elm.getElement(".qui-toolbar-tabs"),o=s.getStyle("left").toInt()+i.offsetLeft,r=i.offsetLeft+i.offsetWidth;return 0>o?(this.Fx.animate({left:s.getStyle("left").toInt()+-1*o+20}),this):r>n.offsetWidth?(e=r-n.offsetWidth,this.Fx.animate({left:-1*(e+20)}),this):this},firstChild:function(){return this.items[0]},lastChild:function(){return this.items[this.items.length-1]},getChildren:function(t){return"undefined"!=typeof t?this.getElement(t):this.items},count:function(){return this.items.length},removeChild:function(t){var e,i,n=[],s=this.items,o=t.getAttribute("name");for(e=0,i=s.length;i>e;e++)s[e].getAttribute("name")==o?s[e].destroy():n.push(s[e]);return this.items=n,this},moveChildToPos:function(t,e){for(var i=[],n=this.items,s=0,o=n.length;o>s;s++)t!=n[s]?i.push(n[s]):n[s].destroy();return i.splice(e-1,0,t),e-2>=0&&i[e-2].getElm().inject(t.create(),"after"),this.items=i,this},getElement:function(t){var e,i,n=this.items;for(e=0,i=n.length;i>e;e++)if(n[e]&&n[e].getAttribute("name")==t)return n[e];return null},appendChild:function(t){if("undefined"==typeof t)return this;var e=this,i=typeOf(t);switch(i){case"qui/controls/buttons/Button":case"qui/controls/buttons/Select":case"qui/controls/buttons/Seperator":case"qui/controls/toolbar/Tab":break;case"element":return t.inject(this.Tabs),this;default:return this}if(t.setParent(this),"qui/controls/toolbar/Tab"==i&&t.addEvent("click",function(t){e.toTab(t)}),this.fireEvent("appendChild",[this,t]),"tabbar"===this.getAttribute("type")&&"qui/controls/buttons/Button"===t.getType()){this.btns.push(t),t.inject(this.BtnRight.getElm(),"before");var n=this.Container,s=t.getElm();return n.setStyle("width",n.getStyle("width").toInt()-s.getSize().x),this}return this.items.push(t),this.$Elm?(t.inject(this.Tabs),this.Menu&&this.Menu.appendChild(this.$addContextMenuItm(t)),this.resize(),this.Menu&&this.Menu.setEnable(),this.BtnLeft&&this.BtnLeft.setEnable(),this.BtnRight&&this.BtnRight.setEnable(),this):this},setItemActive:function(t){return this.Active&&(this.Active.leave(),this.Active.setNormal(),this.Active.getAttribute("ContextMenuItem")&&this.Active.getAttribute("ContextMenuItem").getElm().setStyle("fontWeight","")),this.Active=t,this.Active.setActive(),this.Active.getAttribute("ContextMenuItem")&&this.Active.getAttribute("ContextMenuItem").getElm().setStyle("fontWeight","bold"),this},getActive:function(){return this.Active},resize:function(){if(!this.getElm())return this;var t,e,i=0,n=0,s=this.Tabs.getChildren();for(t=0,e=s.length;e>t;t++)i=i+s[t].getSize().x.toInt()+30;return this.getAttribute("width")&&this.getAttribute("width").toString().contains("%")===!1?(n=this.getAttribute("width").toInt(),this.getAttribute("slide")&&(n=n-this.BtnLeft.getElm().getComputedSize().totalWidth-this.BtnRight.getElm().getComputedSize().totalWidth),this.getAttribute("menu-button")&&(n-=this.Menu.getElm().getComputedSize().totalWidth)):n="100%",this.Tabs.setStyle("width",i),this.Container.setStyle("width",n),this.getElm().setStyle("width",this.getAttribute("width")),this},$addContextMenuItm:function(t){var e=new i(t.getAttributes());return e.setAttribute("TAB",t),e.setAttribute("Toolbar",this),t.setAttribute("ContextMenuItem",e),e.addEvent("onMouseDown",function(t){var e=t.getAttribute("TAB"),i=t.getAttribute("Toolbar");e.click(),i.toTab(e)}),e}})}),define("qui/controls/buttons/Seperator",["qui/controls/Control"],function(t){"use strict";return new Class({Extends:t,Type:"qui/controls/buttons/Seperator",options:{height:!1},initialize:function(t){this.parent(t),this.addEvent("resize",function(){var t=this.getElm();t&&t.getParent()&&t.setStyle("height",t.getParent().getSize().y)})},create:function(){return this.$Elm=new Element("div.qui-buttons-seperator",{"data-quiid":this.getId()}),this.getAttribute("height")&&this.$Elm.setStyle("height",this.getAttribute("height")),this.fireEvent("create",[this]),this.$Elm}})}),define("qui/lib/require-css/css!qui/controls/desktop/panels/Sheet",[],function(){}),define("qui/controls/desktop/panels/Sheet",["qui/controls/Control","qui/controls/buttons/Button","css!qui/controls/desktop/panels/Sheet.css"],function(t,e){"use strict";return new Class({Extends:t,Type:"qui/controls/desktop/panels/Sheet",Binds:["$fxComplete"],options:{styles:!1,header:!0,buttons:!0,title:"",closeButton:{textimage:"icon-remove fa fa-remove",text:"schließen / abbrechen"}},initialize:function(t){this.parent(t),this.$Elm=null,this.$Header=null,this.$Body=null,this.$Buttons=null,this.$FX=null},create:function(){this.$Elm=new Element("div.qui-panel-sheet",{"data-quiid":this.getId(),html:'<div class="qui-panel-sheet-header box"></div><div class="qui-panel-sheet-body box"></div><div class="qui-panel-sheet-btn-container box"><div class="qui-panel-sheet-buttons"></div></div>',styles:{visibility:"hidden",display:"none"}}),this.getAttribute("styles")&&this.$Elm.setStyles(this.getAttribute("styles")),this.$Header=this.$Elm.getElement(".qui-panel-sheet-header"),this.$Body=this.$Elm.getElement(".qui-panel-sheet-body"),this.$Buttons=this.$Elm.getElement(".qui-panel-sheet-btn-container"),this.getAttribute("buttons")||this.$Buttons.setStyle("display","none"),this.getAttribute("header")||this.$Header.setStyle("display","none"),this.$Header.set("html",this.getAttribute("title")),new e({icon:"icon-remove fa fa-remove",styles:{"float":"right"},events:{onClick:this.hide.bind(this)}}).inject(this.$Header);var t=this.getAttribute("closeButton"),i=new e({text:t.text||"schließen / abbrechen",textimage:t.textimage||!1,styles:{width:200},events:{onClick:this.hide.bind(this)}});return this.addButton(i),this.$FX=moofx(this.$Elm),this.$Elm},getContent:function(){return this.$Body},getBody:function(){return this.getContent()},getButtons:function(){return this.$Buttons},addButton:function(t){"qui/controls/buttons/Button"!==typeOf(t)&&(t=new e(t));var i=this.getButtons().getElement(".qui-panel-sheet-buttons"),n=0,s=t.getAttributes("styles")||{};s.margin="12px 5px",t.setAttribute("styles",s),t.inject(i);for(var o=i.getElements("button"),r=0,l=o.length;l>r;r++)n+=o[r].getComputedSize().totalWidth;i.setStyle("width",n)},show:function(t){var e=this,i=this.getElm(),n=i.getParent(),s=n.getSize();i.setStyles({boxShadow:"0 6px 20px 0 rgba(0, 0, 0, 0.19)",left:-1*(s.x+50),height:s.y,visibility:null}),i.setStyles({display:null,opacity:1}),this.getAttribute("buttons")||this.$Buttons.setStyle("display","none"),this.getAttribute("header")||this.$Header.setStyle("display","none");var o=this.getButtons().getSize(),r=this.$Header.getSize();return this.getBody().setStyles({"float":"left",height:s.y-o.y-r.y,width:"100%"}),this.$FX.animate({left:0},{equation:"ease-out",callback:function(){"function"===typeOf(t)&&t(),e.$fxComplete()}}),this},hide:function(t){var e=this,i=this.getElm(),n=i.getParent(),s=n.getSize();return i.setStyle("boxShadow","0 6px 20px 0 rgba(0, 0, 0, 0.19)"),this.$FX.animate({left:-1*(s.x+50),opacity:0},{equation:"ease-out",callback:function(){"function"===typeOf(t)&&t(),e.$fxComplete()}}),this},$fxComplete:function(){return this.getElm().getStyle("left").toInt()>=0?(this.getElm().setStyle("boxShadow",null),void this.fireEvent("open",[this])):void this.fireEvent("close",[this])}})}),define("qui/lib/require-css/css!qui/controls/breadcrumb/Bar",[],function(){}),define("qui/controls/breadcrumb/Bar",["qui/controls/Control","css!qui/controls/breadcrumb/Bar.css"],function(t){"use strict";return new Class({Extends:t,Type:"qui/controls/breadcrumb/Bar",options:{width:!1,itemClasses:!1,cssclass:!1},initialize:function(t){this.$items=[],this.parent(t)},create:function(){return this.$Elm=new Element("div",{"class":"qui-breadcrumb box","data-quiid":this.getId()}),this.getAttribute("width")&&this.$Elm.setStyle("width",this.getAttribute("width")),this.getAttribute("cssclass")&&this.$Elm.addClass(this.getAttribute("cssclass")),this.$Elm},appendChild:function(t){if("qui/controls/breadcrumb/Item"!==t.getType())return this;if(this.$items.push(t),t.inject(this.getElm()),this.getAttribute("itemClasses")){var e=this.getAttribute("itemClasses");"array"==typeOf(e)&&(e=e.join(" ")),t.getElm().addClass(e)}return this},firstChild:function(){return"undefined"!=typeof this.$items[0]?this.$items[0]:!1},lastChild:function(){return this.$items.getLast()},getChildren:function(){return this.$items},clear:function(){for(var t=0,e=this.$items.length;e>t;t++)this.$items[t].destroy();this.$items=[]},resize:function(){this.getAttribute("width")&&this.getElm().setStyle("width",this.getAttribute("width"))}})}),define("qui/lib/require-css/css!qui/controls/desktop/Panel",[],function(){}),define("qui/controls/desktop/Panel",["qui/QUI","qui/controls/Control","qui/controls/loader/Loader","qui/controls/toolbar/Bar","qui/controls/buttons/Seperator","qui/controls/buttons/Button","qui/controls/desktop/panels/Sheet","qui/controls/breadcrumb/Bar","qui/controls/contextmenu/Menu","qui/utils/Controls","css!qui/controls/desktop/Panel.css"],function(t,e,i,n,s,o,r,l,u,h){"use strict";return new Class({Extends:e,Type:"qui/controls/desktop/Panel",Binds:["$onDestroy"],options:{name:"qui-desktop-panel",content:!1,header:!0,title:!1,icon:!1,footer:!1,height:"100%","class":"",scrollbars:!0,collapsible:!0,collapseFooter:!0,closeable:!0,dragable:!0,breadcrumb:!1,toWindow:!1},initialize:function(t){this.$uid=String.uniqueID(),this.parent(t),this.Loader=new i,this.$Elm=null,this.$Header=null,this.$Title=null,this.$Footer=null,this.$Content=null,this.$Buttons=null,this.$Categories=null,this.$Breadcrumb=null,this.$ContextMenu=null,this.$ButtonBar=null,this.$CategoryBar=null,this.$BreadcrumbBar=null,this.$ActiveCat=null,this.$Dropable=null,this.addEvents({onDestroy:this.$onDestroy})},create:function(){if(this.$Elm)return this.$Elm;var t=this;return this.$Elm=new Element("div",{"data-quiid":this.getId(),"class":"qui-panel box",tabindex:-1,styles:{height:this.getAttribute("height")},html:'<div class="qui-panel-header box"></div><div class="qui-panel-buttons box"></div><div class="qui-panel-categories box"></div><div class="qui-panel-content box"></div><div class="qui-panel-footer box"></div>'}),this.Loader.inject(this.$Elm),this.$Header=this.$Elm.getElement(".qui-panel-header"),this.$Footer=this.$Elm.getElement(".qui-panel-footer"),this.$Content=this.$Elm.getElement(".qui-panel-content"),this.$Buttons=this.$Elm.getElement(".qui-panel-buttons"),this.$Categories=this.$Elm.getElement(".qui-panel-categories"),this.getAttribute("breadcrumb")&&(this.$Breadcrumb=new Element("div",{"class":"qui-panel-breadcrumb box"}).inject(this.$Buttons,"after")),this.getAttribute("styles")&&this.$Elm.setStyles(this.getAttribute("styles")),this.$Content.setStyle("display",null),this.$Buttons.setStyle("display","none"),this.$Categories.setStyle("display","none"),this.getAttribute("content")&&this.$Content.set("html",this.getAttribute("content")),this.getAttribute("collapsible")&&(this.$Collaps=new Element("div",{"class":"qui-panel-collapse icon-chevron-down"}).inject(this.$Header),this.$Header.setStyle("cursor","pointer"),this.$Header.addEvent("click",function(){t.toggle()})),this.getAttribute("dragable")&&this.enableDragDrop(),this.$refresh(),this.fireEvent("create",[this]),this.$Elm},refresh:function(){return this.resize(),this.fireEvent("refresh",[this]),this.$refresh(),this},$refresh:function(){if(this.$Title||(this.$Icon=new Element("span.qui-panel-icon").inject(this.$Header),this.$Title=new Element("h2.qui-panel-title").inject(this.$Header)),this.getAttribute("title")&&this.$Title.set("html",this.getAttribute("title")),this.getAttribute("footer")?this.$Footer.setStyle("display",null):this.$Footer.setStyle("display","none"),this.getAttribute("icon")){var t=this.getAttribute("icon");if(h.isFontAwesomeClass(t)){var e=this.$Icon.className;e=e.replace(/\bicon-\S+/g,""),this.$Icon.className=e,this.$Icon.addClass(t)}else new Element("img",{src:t}).inject(this.$Icon)}},resize:function(){var t=this;if(this.fireEvent("resizeBegin",[this]),this.getAttribute("header")===!1?this.$Header.setStyle("display","none"):this.$Header.setStyle("display",null),this.getAttribute("footer")===!1?this.$Footer.setStyle("display","none"):this.$Footer.setStyle("display",null),this.getButtonBar().count()?this.$Buttons.setStyle("display",null):this.$Buttons.setStyle("display","none"),this.isOpen()===!1)return this.fireEvent("resize",[this]),this;this.getAttribute("styles")&&this.getAttribute("styles").height&&this.setAttribute("height",this.getAttribute("styles").height);var e=this.getAttribute("height"),i=this.$Elm.getSize().x,n="auto";if(e.toString().match("%")){var s=this.$Elm.getParent()||document.body;e=e.toInt(),e=s.getSize().y*(e/100)}return e=e-this.$Buttons.getSize().y-2-this.$Footer.getSize().y-1-this.$Header.getSize().y,this.getAttribute("scrollbars")===!1&&(n="hidden"),this.$Categories.getSize().x?i-=this.$Categories.getSize().x:i="100%",this.$ButtonBar&&this.$ButtonBar.resize(),moofx(this.$Elm).animate({height:this.getAttribute("height")},{duration:250,equation:"ease-out",callback:function(){t.$Content.setStyles({overflow:n,height:e,width:i}),t.fireEvent("resize",[t])}}),this},open:function(t){var e=this;return this.fireEvent("openBegin",[this]),this.$Content.setStyle("display",null),this.$Header.removeClass("qui-panel-close"),this.$Collaps&&(this.$Collaps.removeClass("qui-panel-expand"),this.$Collaps.removeClass("icon-chevron-right"),this.$Collaps.addClass("qui-panel-collapse"),this.$Collaps.addClass("icon-chevron-down")),moofx(this.$Elm).animate({height:this.getAttribute("height")},{duration:200,equation:"ease-out",callback:function(){e.fireEvent("open",[e]),e.resize(),"undefined"!=typeof t&&t()}}),this},minimize:function(t){var e=this;return this.fireEvent("minimizeBegin",[this]),this.$Content.setStyle("display","none"),this.$Footer.setStyle("display","none"),this.$Buttons.setStyle("display","none"),this.$Collaps&&(this.$Collaps.removeClass("qui-panel-collapse"),this.$Collaps.removeClass("icon-chevron-down"),this.$Collaps.addClass("qui-panel-expand"),this.$Collaps.addClass("icon-chevron-right")),this.$Header.addClass("qui-panel-close"),moofx(this.$Elm).animate({height:this.$Header.getSize().y},{duration:200,equation:"ease-out",callback:function(){e.fireEvent("minimize",[e]),e.resize(),"undefined"!=typeof t&&t()}}),this},toggle:function(){return this.getAttribute("collapsible")===!1?this:(this.isOpen()?this.minimize():this.open(),this)},isOpen:function(){return this.$Content?"none"!=this.$Content.getStyle("display"):!1},highlight:function(){return this.getElm()?(new Element("div.qui-panel-highlight").inject(this.getElm()),this):this},normalize:function(){return this.getElm()?(this.getElm().getElements(".qui-panel-highlight").destroy(),this):this},getBody:function(){return this.getContent()},getContent:function(){return this.$Content},setContent:function(t){return this.$Content.set("html",t),this},getFooter:function(){return this.$Footer},setFooter:function(t){return this.$Footer.set("html",t),this},getHeader:function(){return this.$Header},addButton:function(e){return t.Controls.isControl(e)||(e="seperator"==e.type||"QUI\\Controls\\Buttons\\Seperator"==e.type?new s(e):new o(e)),this.getButtonBar().appendChild(e),1==this.getButtonBar().count()&&this.resize(),this},getButtons:function(t){return this.$ButtonBar?this.$ButtonBar.getChildren(t):[]},getButtonBar:function(){return this.$ButtonBar||(this.$Buttons.setStyle("display",null),this.$ButtonBar=new n({slide:!1,type:"buttons","menu-button":!1}).inject(this.$Buttons)),this.$ButtonBar},addCategory:function(t){"undefined"==typeof t.getType&&(t=new o(t));var e=this;return t.addEvents({onClick:function(t){e.$ActiveCat&&e.$ActiveCat==t||(e.fireEvent("categoryLeave",[e,e.$ActiveCat]),t.setActive())},onActive:function(t){e.$ActiveCat&&e.$ActiveCat.setNormal(),e.$ActiveCat=t,e.fireEvent("categoryEnter",[e,t])}}),this.getCategoryBar().appendChild(t),this},getCategory:function(t){return this.$CategoryBar?this.$CategoryBar.getChildren(t):[]},getCategoryBar:function(){return this.$CategoryBar||(this.$Categories.setStyle("display",null),this.$CategoryBar=new n({width:190,slide:!1,type:"buttons","menu-button":!1,events:{onClear:function(){this.$ActiveCat=null}.bind(this)}}).inject(this.$Categories)),this.$CategoryBar},getActiveCategory:function(){return this.$ActiveCat},getBreadcrumb:function(){return this.$BreadcrumbBar||(this.$BreadcrumbBar=new l({name:"panel-breadcrumb-"+this.getId()}).inject(this.$Breadcrumb)),this.$BreadcrumbBar},getContextMenu:function(){return this.$ContextMenu?this.$ContextMenu:(this.$ContextMenu=new u({title:this.getAttribute("title"),events:{blur:function(t){t.hide()}}}),this.$ContextMenu.inject(document.body),this.$ContextMenu)},createSheet:function(t){return new r(t).inject(this.$Elm)},enableDragDrop:function(){if(this.setAttribute("dragable",!0),this.$Header&&this.$Header.setStyle("cursor","move"),this.$Dropable)return void this.$Dropable.enable();var t=this;this.$getDragable(function(){t.getAttribute("dragable")?t.$Dropable.enable():t.$Dropable.disable()})},disableDragDrop:function(){this.setAttribute("dragable",!1),this.$Header&&this.$Header.setStyle("cursor","default"),this.$Dropable&&this.$Dropable.disable()},$getDragable:function(e){if(this.$Dropable)return void e(this.$Dropable);if("undefined"!=typeof this.$_dragDropExec)return void function(){this.$getDragable(e)}.delay(20,this);this.$_dragDropExec=!0;var i=this;require(["qui/classes/utils/DragDrop"],function(n){var s=null;i.$Dropable=new n(i.$Header,{dropables:".qui-panel-drop",cssClass:"radius5",styles:{width:100,height:150},events:{onStart:function(t,e,n){i.fireEvent("dragDropStart",[i,e,n])},onComplete:function(){i.fireEvent("dragDropComplete",[i])},onDrag:function(t,e,n){i.fireEvent("drag",[i,n]),s&&s.fireEvent("dragDropDrag",[i,n])},onEnter:function(e,n,o){var r=o.get("data-quiid");r&&(s=t.Controls.getById(r),s&&s.fireEvent("dragDropEnter",[i,n]))},onLeave:function(t,e){s&&(s.fireEvent("dragDropLeave",[i,e]),s=null)},onDrop:function(t,e,n,o){n&&s&&s.fireEvent("dragDropDrop",[i,e,n,o])}}}),e(i.$Dropable)})},$onDestroy:function(){for(var t=[this.$Header,this.$Title,this.$Footer,this.$Content,this.$Buttons,this.$ButtonBar,this.$CategoryBar,this.$ActiveCat,this.$BreadcrumbBar,this.$ContextMenu],e=0,i=t.length;i>e;e++)t[e]&&"destroy"in t[e]&&t[e].destroy()}})}),define("qui/lib/require-css/css!qui/controls/desktop/Column",[],function(){}),define("qui/controls/desktop/Column",["qui/QUI","qui/controls/Control","qui/controls/contextmenu/Menu","qui/controls/contextmenu/Item","qui/controls/desktop/Panel","qui/controls/loader/Loader","qui/classes/utils/DragDrop","qui/controls/desktop/panels/Sheet","css!qui/controls/desktop/Column.css"],function(t,e,i,n,s,o,r,l){"use strict";return new Class({Extends:e,Type:"qui/controls/desktop/Column",Binds:["$onDestroy","$onContextMenu","$onPanelOpen","$onPanelOpenBegin","$onPanelMinimize","$onPanelDestroy","$clickAddPanelToColumn","$onEnterRemovePanel","$onLeaveRemovePanel","$onClickRemovePanel","$onSettingsOpen","$onSettingsClose","$onDragDropEnter","$onDragDropLeave","$onDragDropDrag","$onDragDropDrop","$onDragDropComplete"],options:{name:"column",width:!1,height:!1,resizeLimit:[],closable:!1,placement:"left",contextmenu:!1,setting_toggle:!1},initialize:function(t){this.parent(t),this.$ContextMenu=null,this.$Elm=null,this.$Content=null,this.$Settings=null,this.$Highlight=null,this.$panels={},this.$dragDrops={},this.$SettingsButton=null,this.$__eventPanelOpen=!1,this.$__unserialize=!1,this.$fixed=!0,this.$tmpList=[],this.addEvents({onDestroy:this.$onDestroy,dragDropEnter:this.$onDragDropEnter,dragDropLeave:this.$onDragDropLeave,dragDropDrag:this.$onDragDropDrag,dragDropDrop:this.$onDragDropDrop,dragDropComplete:this.$onDragDropComplete})},$onDestroy:function(){this.$ContextMenu&&this.$ContextMenu.destroy(),this.$Content&&this.$Content.destroy(),this.$Elm&&this.$Elm.destroy()},create:function(){var t=this;this.$Elm=new Element("div",{"class":"qui-column box qui-panel-drop qui-task-drop","data-quiid":this.getId()}),this.getAttribute("height")&&this.$Elm.setStyle("height",this.getAttribute("height")),this.getAttribute("width")&&this.$Elm.setStyle("width",this.getAttribute("width")),this.$Content=new Element("div",{"class":"qui-column-content box",styles:{width:"100%"}}).inject(this.$Elm),this.$SettingsButton=new Element("div",{"class":"qui-column-settingButton",html:'<span class="icon-gear fa fa-gear"></span>',styles:{display:"none",opacity:0},events:{click:function(){t.showSettings()},mouseenter:function(){t.highlight()},mouseleave:function(){t.normalize()}}}).inject(this.$Elm),this.$Highlight=new Element("div",{"class":"qui-column-hightlight",styles:{display:"none"}}).inject(this.$Elm),this.$ContextMenu=new i({Column:this,events:{onBlur:function(t){t.hide()}}}).inject(document.body),this.$ContextMenu.hide(),this.$Elm.addEvents({contextmenu:this.$onContextMenu}),this.$Settings=new l({header:!1,events:{onOpen:this.$onSettingsOpen,onClose:this.$onSettingsClose},closeButton:{text:"schließen"}}).inject(this.$Elm),"undefined"!=typeof this.$serialize&&this.unserialize(this.$serialize);for(var e=0,n=this.$tmpList.length;n>e;e++)this.appendChild(this.$tmpList[e].Panel,this.$tmpList[e].pos);return this.fireEvent("create",[this]),this.$Elm},serialize:function(){for(var e,i,n=this.$Content.getChildren(".qui-panel"),s=[],o=this.getAttributes(),r=this.getElm().getSize(),l=0,u=n.length;u>l;l++)e=t.Controls.getById(n[l].get("data-quiid")),i=e.serialize(),i.isOpen=e.isOpen(),s.push(i);return o.width=r.x,o.height=r.y,{attributes:o,children:s}},unserialize:function(e){if(this.setAttribute(e.attributes),!this.$Elm)return this.$serialize=e,this;var i,n,s,o,r=e.children,l=this;if(r){this.$__unserialize=!0;var u=[];for(i=0,n=r.length;n>i;i++)s=r[i].type,o=s.replace("QUI.","").replace(/\./g,"/"),u.push(o);require(u,function(){var e=arguments;t.getMessageHandler(function(t){var i,n,s,o,u,h,a=[];for(i=0,n=r.length;n>i;i++){u=r[i],s=u.attributes,o=s.height;try{h=new e[i](s),h.unserialize(u),l.appendChild(h),u.isOpen&&a.push(h)}catch(c){t.addError(c.toString())}}l.$__unserialize=!1,Object.each(a,function(t){t.open()}),Object.each(l.$panels,function(t){t.resize()})})})}},fix:function(){this.$fixed=!0,Object.each(this.$panels,function(t){t.disableDragDrop()});for(var t=this.$Elm.getElements(".qui-column-hor-handle"),e=this,i=0,n=t.length;n>i;i++)t[i].setStyle("cursor","default"),t[i].removeClass("qui-column-hor-handle-enabled");Object.each(this.$dragDrops,function(t){t.disable()}),this.hideSettings(),this.$Highlight.setStyles({width:null}),moofx(this.$SettingsButton).animate({opacity:0},{duration:250,callback:function(){e.$SettingsButton.setStyle("display","none"),moofx(e.$Content).animate({width:e.$Elm.getSize().x},{duration:250,equation:"ease-out",callback:function(){e.$Content.setStyles({boxShadow:null,width:"100%"}),e.resize()
}})}})},unfix:function(){var t=!1;this.$fixed===!1&&(t=!0),this.$fixed=!1,Object.each(this.$panels,function(t){t.enableDragDrop()});for(var e=this,i=this.$Elm.getElements(".qui-column-hor-handle"),n=0,s=i.length;s>n;n++)i[n].setStyle("cursor",null),i[n].addClass("qui-column-hor-handle-enabled");Object.each(this.$dragDrops,function(t){t.enable()});var o=this.$Elm.getSize(),r=this.$SettingsButton.measure(function(){return this.getSize()});this.$Highlight.setStyles({width:o.x-30}),this.$Content.setStyle("boxShadow","0 0 6px 0 rgba(0, 0, 0, 0.7)"),moofx(this.$Content).animate({width:o.x-r.x},{duration:250,equation:"ease-out",callback:function(){e.$SettingsButton.setStyle("display","inline"),e.resize(),t||moofx(e.$SettingsButton).animate({opacity:1},{duration:250})}})},appendChild:function(t,e){if(!this.isApandable(t))return this;if(!this.$Content)return this.$tmpList.push({Panel:t,pos:e}),this;var i=!1,n=this.count(),s=100,o=!1,r=!1,l=this.$Content.getElements(".qui-column-hor-handle"),u=this.$Content.getElements(".qui-panel"),h=this.getElm().getElement('[data-quiid="'+t.getId()+'"]');if(s=this.getAttribute("height")?this.getAttribute("height"):this.$Content.getComputedSize().totalHeight,h&&(o=Array.prototype.indexOf.call(u,t.getElm()),r=!0,"undefined"!=typeof e)){if(e==o)return this;if(o+1==e)return this}return r===!1?(t.getParent()&&t.getParent().dependChild(t),t.setParent(this)):(t.getAttribute("_Handler")?t.getAttribute("_Handler").destroy():0===o&&l[0].destroy(),"undefined"!=typeof l[o-1]&&l[o-1].getParent()&&l[o-1].destroy()),n&&(i=new Element("div",{"class":"qui-column-hor-handle smooth"}),this.$fixed||i.addClass("qui-column-hor-handle-enabled"),this.$addHorResize(i),t.setAttribute("_Handler",i)),t.addEvents({onMinimize:this.$onPanelMinimize,onOpen:this.$onPanelOpen,onOpenBegin:this.$onPanelOpenBegin,onResizeBegin:this.$onPanelOpenBegin,onDestroy:this.$onPanelDestroy}),this.$panels[t.getId()]=t,t.getAttribute("height")||t.setAttribute("height",200),t.getAttribute("height")&&n||t.setAttribute("height",s),"undefined"==typeof e||l.length<e.toInt()?(i&&i.inject(this.$Content),t.inject(this.$Content)):0===e.toInt()?(i&&i.inject(this.$Content,"top"),t.inject(this.$Content,"top")):"undefined"!=typeof l[e-1]&&(i&&i.inject(l[e-1],"after"),t.inject(l[e-1],"after")),this.$__unserialize&&t.minimize(),this.$fixed===!1?t.enableDragDrop():t.disableDragDrop(),n?(this.$recalcAppend(t),this):this},$recalcAppend:function(t){var e=this.$getLeftSpace();if(0!==e){var i=this.getPreviousOpenedPanel(t);if(i||(i=this.getNextOpenedPanel(t)),i){if(i.getElm().getSize().y+e<50)return i.minimize(),void this.$recalcAppend(t);i.setAttribute("height",i.getElm().getSize().y+e),i.resize()}}},dependChild:function(t){this.$panels[t.getId()]&&delete this.$panels[t.getId()],t.removeEvents({onMinimize:this.$onPanelMinimize,onOpen:this.$onPanelOpen,onOpenBegin:this.$onPanelOpenBegin,onResizebegin:this.$onPanelOpenBegin,onDestroy:this.$onPanelDestroy});var e=t.getParent();return e&&t.getParent().$onPanelDestroy(t),t.getElm().dispose(),this.recalcPanels(),this},getChildren:function(t){if("undefined"==typeof t)return this.$panels;var e,i=this.$panels;for(e in i)if(i[e].getAttribute("name")==t)return i[e];return!1},count:function(){var t,e=0;for(t in this.$panels)e++;return e},resize:function(){if(!this.isOpen())return this;var t=this.getAttribute("width"),e=this.getAttribute("height");if(!t&&!e)return this;this.$Elm.setStyle("width",t),this.$Elm.setStyle("height",e),this.$fixed===!1&&(t-=30),this.$Content.setStyle("width",t),this.$Highlight.setStyle("width",t);for(var i in this.$panels)this.$panels[i].setAttribute("width",t),this.$panels[i].resize();return this.recalcPanels(),this},open:function(){this.$Content.setStyle("display",null);var t=this.getSibling();return t.setAttribute("width",t.getAttribute("width")-this.getAttribute("width")+6),t.resize(),this.resize(),this},close:function(){if(this.getAttribute("closable")===!1)return this;var t=this.$Content.getSize().x,e=this.getSibling();return this.$Content.setStyle("display","none"),e.setAttribute("width",e.getAttribute("width")+t),e.resize(),this},toggle:function(){return this.isOpen()?this.close():this.open(),this},isOpen:function(){return"none"!=this.$Content.getStyle("display")},highlight:function(){return this.$Highlight&&this.$Highlight.setStyle("display",null),this},normalize:function(){return this.$Highlight&&this.$Highlight.setStyle("display","none"),this},getSibling:function(){var e;return"left"==this.getAttribute("placement")?e=this.getElm().getNext(".qui-column"):"right"==this.getAttribute("placement")&&(e=this.getElm().getPrevious(".qui-column")),e?t.Controls.getById(e.get("data-quiid")):(e=this.getPrevious())?e:(e=this.getNext(),e?e:!1)},getPrevious:function(){var e=this.getElm().getPrevious(".qui-column");return e?t.Controls.getById(e.get("data-quiid")):!1},getNext:function(){var e=this.getElm().getNext(".qui-column");return e?t.Controls.getById(e.get("data-quiid")):!1},getNextPanel:function(e){var i=e.getElm().getNext(".qui-panel");if(!i)return!1;var n=t.Controls.getById(i.get("data-quiid"));return n?n:!1},getNextOpenedPanel:function(e){var i=e.getElm().getAllNext(".qui-panel");if(!i.length)return!1;var n,s,o;for(n=0,s=i.length;s>n;n++)if(o=t.Controls.getById(i[n].get("data-quiid")),o&&o.isOpen())return o;return!1},getPreviousPanel:function(e){var i=e.getElm().getPrevious(".qui-panel");if(!i)return!1;var n=t.Controls.getById(i.get("data-quiid"));return n?n:!1},getPreviousOpenedPanel:function(e){var i=e.getElm().getAllPrevious(".qui-panel");if(!i.length)return!1;var n,s,o;for(n=0,s=i.length;s>n;n++)if(o=t.Controls.getById(i[n].get("data-quiid")),o&&o.isOpen())return o;return!1},adaptPanels:function(){var e,i,n,s=this.$Content.getElements(".qui-panel"),o=this.$Content.getElements(".qui-column-hor-handle"),r=this.$Content.getComputedSize().totalHeight,l=s.length,u=o.getDimensions().map(function(t){return t.y}).sum();for(r-=u,n=Math.ceil(r/l),e=0;l>e;e++)i=t.Controls.getById(s[e].get("data-quiid")),n>r&&(n=r),i.setAttribute("height",n),i.resize(),r-=n},recalcPanels:function(){if(this.count()){var e=this.$getLeftSpace();if(0!==e){var i=this.$Content.getLast(".qui-panel"),n=t.Controls.getById(i.get("data-quiid"));if(n.isOpen()===!1&&(n=this.getPreviousOpenedPanel(n)),n&&n.isOpen()!==!1){var s=n.getElm().getSize().y;if(50>s+e)return n.minimize(),void this.recalcPanels();n.setAttribute("height",s+e),n.resize()}}}},isApandable:function(t){switch(typeOf(t)){case"qui/controls/desktop/Panel":case"qui/controls/desktop/Tasks":case"qui/controls/taskbar/Task":return!0;default:return instanceOf(t,s)}},$onPanelMinimize:function(t){if(!this.$__eventPanelOpen){var e=this.getNextOpenedPanel(t);if(t.setAttribute("columnCloseDirection","next"),e||(e=this.getPreviousOpenedPanel(t),t.setAttribute("columnCloseDirection","prev")),!e)return void this.close();var i=e.getElm().getSize().y,n=this.$getLeftSpace();if(50>i+n)return void e.minimize();e.setAttribute("height",i+n),e.resize()}},$onPanelOpen:function(e){var i;if(this.getAttribute("setting_toggle")){this.$__eventPanelOpen=!0;var n,s,o,r=this.$Content.getElements(".qui-panel"),l=0;for(n=0,s=r.length;s>n;n++)e.getId()!=r[n].get("data-quiid")&&(o=t.Controls.getById(r[n].get("data-quiid")),o.isOpen()&&(o.minimize(),l++));if(function(){this.$__eventPanelOpen=!1}.delay(200,this),!l){if(i=this.$getLeftSpace(),!i)return;e.setAttribute("height",e.getAttribute("height")+i),e.resize()}}else{var u=!1,h=e.getElm(),a=e.getAttribute("columnCloseDirection"),c=h.getSize().y;if(a&&"next"==a&&(u=this.getNextOpenedPanel(e)),a&&"prev"==a&&(u=this.getPreviousOpenedPanel(e)),u||(u=this.getPreviousOpenedPanel(e)),u||(u=this.getNextOpenedPanel(e)),!u){var d=this.$getLeftSpace();if(!d)return;return e.setAttribute("height",c+d),void e.resize()}i=this.$getLeftSpace();var g=u.getElm(),f=g.getComputedSize().totalHeight,m=f+i;100>m&&(e.setAttribute("height",c-(100-m)),e.resize(),m=100),u.setAttribute("height",m),u.resize()}},$onPanelOpenBegin:function(){this.$Content.setStyle("overflow","hidden")},$getLeftSpace:function(){var t=this.$Content.getChildren(),e=this.$Content.getSize().y;if(!e)return 0;var i=t.getSize().map(function(t){return t.y}).sum();return e-i},$onPanelDestroy:function(e){var i,n,s,o,r=e.getId(),l=e.getElm();this.$panels[r]&&delete this.$panels[r];var u=e.getAttribute("_Handler");return u||l.getPrevious()||!l.getNext()?u||l.getNext()||!l.getPrevious()?void(u&&u.hasClass("qui-column-hor-handle")&&(s=u.getPrevious(),s&&s.get("data-quiid")&&(o=t.Controls.getById(s.get("data-quiid")),i=u.getSize().y+o.getAttribute("height")+e.getAttribute("height"),o.setAttribute("height",i),o.resize()),u.destroy())):(u=l.getPrevious(),s=u.getPrevious(),s&&s.get("data-quiid")&&(o=t.Controls.getById(s.get("data-quiid")),i=u.getSize().y+o.getAttribute("height")+e.getAttribute("height"),o.setAttribute("height",i),o.setAttribute("_Handler",!1),o.resize()),void u.destroy()):(u=l.getNext(),n=u.getNext(),n&&n.get("data-quiid")&&(o=t.Controls.getById(n.get("data-quiid")),i=u.getSize().y+o.getAttribute("height")+e.getAttribute("height"),o.setAttribute("height",i),o.setAttribute("_Handler",!1),o.resize()),void u.destroy())},$addHorResize:function(t){var e=t.getPosition(),i=new r(t,{limit:{x:[e.x,e.x],y:[e.y,e.y]},events:{onStart:function(e,i){if(this.$Elm){var n=this.$Elm.getPosition(),s=t.getPosition(),o=e.getAttribute("limit");o.y=[n.y,n.y+this.$Elm.getSize().y],o.x=[s.x,s.x],e.setAttribute("limit",o),i.setStyles({height:5,padding:0,top:s.y,left:s.x})}}.bind(this),onStop:this.$horResizeStop.bind(this)}});i.setAttribute("Control",this),i.setAttribute("Handle",t),this.$dragDrops[i.getId()]=i},$horResizeStop:function(e,i){var n,s,o=e.getAttribute("Handle"),r=i.getPosition(),l=o.getPosition();n=r.y-l.y;var u=o.getNext(),h=o.getPrevious(),a=!1,c=!1;if(u&&(c=t.Controls.getById(u.get("data-quiid"))),h&&(a=t.Controls.getById(h.get("data-quiid"))),c&&!c.isOpen()){var d=this.getNextOpenedPanel(c);d?c=d:(c.setAttribute("height",40),c.open())}if(a&&!a.isOpen()){var g=this.getPreviousOpenedPanel(a);g?a=g:(a.setAttribute("height",40),a.open())}if(c&&(s=c.getElm().getSize().y-n,50>s&&(s=50),c.setAttribute("height",s),c.resize()),a){s=a.getElm().getSize().y+n;var f=0;50>s&&(f=50-s,s=50),a.setAttribute("height",s),a.resize(),f&&c&&(s=c.getElm().getSize().y-f,c.setAttribute("height",s),c.resize())}var m=this.$getLeftSpace();0!==m&&(s=a.getAttribute("height")+m,a.setAttribute("height",s),a.resize())},$onContextMenu:function(t){if(!this.$fixed&&(this.fireEvent("contextMenu",[this,t]),this.getAttribute("contextmenu")&&this.getParent())){t.stop();var e,i,s,o,r,l=this.getParent(),u=l.getAvailablePanel();for(this.$ContextMenu.clearChildren(),this.$ContextMenu.setTitle("Column"),o=new n({text:"Panel hinzufügen",name:"add_panels_to_column"}),this.$ContextMenu.appendChild(o),e=0,i=u.length;i>e;e++)o.appendChild(new n({text:u[e].text,icon:u[e].icon,name:"add_panels_to_column",params:u[e],events:{onMouseDown:this.$clickAddPanelToColumn}}));r=new n({text:"Panel löschen",name:"remove_panel_of_column"}),this.$ContextMenu.appendChild(r);for(e in this.$panels)s=this.$panels[e],r.appendChild(new n({text:s.getAttribute("title"),icon:s.getAttribute("icon"),name:s.getAttribute("name"),Panel:s,events:{onActive:this.$onEnterRemovePanel,onNormal:this.$onLeaveRemovePanel,onMouseDown:this.$onClickRemovePanel}}));this.$ContextMenu.setPosition(t.page.x,t.page.y).show().focus()}},$clickAddPanelToColumn:function(t){var e=this,i=t.getAttribute("params");i.require&&require([i.require],function(t){e.appendChild(new t)})},$onEnterRemovePanel:function(t){t.getAttribute("Panel").highlight()},$onLeaveRemovePanel:function(t){t.getAttribute("Panel").normalize()},$onClickRemovePanel:function(t){t.getAttribute("Panel").destroy()},$onDragDropEnter:function(t,e){if(this.isApandable(t)){this.$calcDragDropArrows();var i,n=e.getPosition().y,s=null;for(var o in this.$ddArrowPositions)i=n-o,0>i&&(i=-1*i),(!s||s>i)&&(this.$ddArrow=this.$ddArrowPositions[o],s=i);this.$ddArrow&&this.$ddArrow.setStyle("display",null),this.highlight()}},$onDragDropDrag:function(t,e){var i=e.page.y;"undefined"!=typeof this.$ddArrowPositions[i]&&this.$ddArrow!=this.$ddArrowPositions[i]&&(this.$ddArrow&&this.$ddArrow.setStyle("display","none"),this.$ddArrow=this.$ddArrowPositions[i],this.$ddArrow.setStyle("display",null))},$onDragDropDrop:function(t){if(this.isApandable(t)){if("qui/controls/taskbar/Task"==typeOf(t)&&(t=t.getInstance(),this.$onDragDropComplete()),!this.$ddArrow)return this.appendChild(t),void this.recalcPanels();this.appendChild(t,this.$ddArrow.get("data-arrowno")),this.$onDragDropLeave(t),this.recalcPanels()}},$onDragDropComplete:function(){this.$clearDragDropArrows(),this.normalize()},$onDragDropLeave:function(){this.$onDragDropComplete()},$calcDragDropArrows:function(){var t,e,i,n;this.$ddArrowPositions={};var s=this.getElm(),o=s.getPosition(),r=s.getElements(".qui-column-hor-handle"),l=o.x;for(this.$ddArrowPositions[o.y+10]=new Element("div",{"class":"qui-column-drag-arrow icon-circle-arrow-left ",styles:{top:o.y,left:l,display:"none"},"data-arrowno":0}).inject(document.body),t=0,i=r.length;i>t;t++)n=r[t],n.set("data-arrowid",String.uniqueID()),e=n.getPosition().y,this.$ddArrowPositions[e]=new Element("div",{"class":"qui-column-drag-arrow icon-circle-arrow-left ",styles:{top:e-20,left:l,display:"none"},"data-arrowid":n.get("data-arrowid"),"data-arrowno":t+1}).inject(document.body);this.$ddArrowPositions[o.y+s.getSize().y-10]=new Element("div",{"class":"qui-column-drag-arrow icon-circle-arrow-left ",styles:{top:o.y+s.getSize().y-20,left:l,display:"none"},"data-arrowno":t+1}).inject(document.body)},$clearDragDropArrows:function(){var t,e,i;for(this.$ddArrowPositions.each(function(t){t.destroy()}),this.$ddArrowPositions={},i=this.getElm().getElements(".qui-column-hor-handle"),t=0,e=i.length;e>t;t++)i[t].set("data-arrowid",null)},showSettings:function(){this.$fixed||this.$Settings&&this.$Settings.show()},hideSettings:function(){this.$Settings&&this.$Settings.hide()},$onSettingsOpen:function(t){var e=t.getContent();e.set({"class":"qui-column-settings-content",html:'<h1>Einstellungen für die Panelspalte</h1><label><input type="checkbox" name="setting_toggle" />Nur immer ein Panel offen halten</label>'}),this.getAttribute("setting_toggle")&&(e.getElement('[name="setting_toggle"]').checked=!0)},$onSettingsClose:function(t){var e=this,i=t.getContent();i.getElements("input").each(function(t){return"checkbox"==t.type?void e.setAttribute(t.get("name"),t.checked?!0:!1):void e.setAttribute(t.get("name"),t.get("value"))})}})});
//# sourceMappingURL=Column.js.map