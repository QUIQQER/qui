define("qui/classes/DOM",[],function(){"use strict";return window.$quistorage={},new Class({Implements:[Options,Events],Type:"qui/classes/DOM",options:{},$uid:null,initialize:function(t){t=t||{},t.events&&(this.addEvents(t.events),delete t.events),t.methods&&(Object.append(this,t.methods),delete t.methods),this.setAttributes(t)},$family:function(){return"undefined"!=typeof this.Type?this.Type:typeOf(this)},getId:function(){return this.$uid||(this.$uid=String.uniqueID()),this.$uid},getType:function(){return typeOf(this)},setAttribute:function(t,e){if(this.fireEvent("setAttribute",[t,e]),"undefined"!=typeof this.options[t])return void(this.options[t]=e);var i=Slick.uidOf(this);return"undefined"==typeof window.$quistorage[i]&&(window.$quistorage[i]={}),window.$quistorage[i][t]=e,this},destroy:function(){this.fireEvent("destroy",[this]);var t=Slick.uidOf(this);t in window.$quistorage&&delete window.$quistorage[t],this.removeEvents()},setOptions:function(t){this.setAttributes(t)},setAttributes:function(t){t=t||{};for(var e in t)this.setAttribute(e,t[e]);return this},getAttribute:function(t){if(t in this.options)return this.options[t];var e=Slick.uidOf(this);return"undefined"==typeof window.$quistorage[e]?!1:"undefined"!=typeof window.$quistorage[e][t]?window.$quistorage[e][t]:!1},getAllAttributes:function(){return this.getAttributes()},getAttributes:function(){return this.options},getStorageAttributes:function(){var t=Slick.uidOf(this);return t in window.$quistorage?window.$quistorage[t]:{}},existAttribute:function(t){if("undefined"!=typeof this.options[t])return!0;var e=Slick.uidOf(this);return window.$quistorage[e]&&window.$quistorage[e][t]?!0:!1},getEvents:function(t){return"undefined"==typeof this.$events?!1:"undefined"!=typeof this.$events[t]?this.$events[t]:!1}})}),define("qui/classes/Controls",["require","qui/classes/DOM"],function(t,e){"use strict";return new Class({Extends:e,Type:"qui/classes/Controls",initialize:function(){this.$controls={},this.$cids={},this.$types={}},get:function(t){return"undefined"==typeof this.$controls[t]?[]:this.$controls[t]},getById:function(t){return t in this.$cids?this.$cids[t]:!1},getByType:function(t){return t in this.$types?this.$types[t]:[]},loadType:function(e,i){e.match(/qui\//)||(e="qui/"+e),t([modul],i)},isControl:function(t){return"undefined"!=typeof t&&t&&"undefined"!=typeof t.getType?!0:!1},add:function(t){var e=t.getAttribute("name"),i=typeOf(t);e&&""!==e||(e="#unknown"),"undefined"==typeof this.$controls[e]&&(this.$controls[e]=[]),"undefined"==typeof this.$types[i]&&(this.$types[i]=[]),this.$controls[e].push(t),this.$types[i].push(t),this.$cids[t.getId()]=t},destroy:function(t){var e=t.getAttribute("name"),i=typeOf(t),n=t.getId();e&&""!==e||(e="#unknown"),"undefined"!=typeof this.$cids[n]&&delete this.$cids[n];var s,r,o=[];if("undefined"!=typeof this.$controls[e]){for(s=0,r=this.$controls[e].length;r>s;s++)n!==this.$controls[e][s].getId()&&o.push(this.$controls[e][s]);this.$controls[e]=o,o.length||delete this.$controls[e]}if(o=[],"undefined"!=typeof this.$types[i])for(s=0,r=this.$types[i].length;r>s;s++)n!==this.$types[i][s].getId()&&o.push(this.$types[i][s]);this.$types[i]=o}})}),define("qui/classes/QUI",["require","qui/classes/DOM","qui/classes/Controls"],function(t,e,i){"use strict";return new Class({Extends:e,Type:"qui/classes/QUI",initialize:function(e){this.setAttributes({debug:!1,fetchErrors:!0}),this.parent(e),this.getAttribute("fetchErrors")&&(t.onError=function(t,e){self.trigger("ERROR :"+t+"\nRequire :"+e)},window.onerror=this.trigger.bind(this)),this.Controls=new i,this.MessageHandler=null},namespace:function(){for(var t,e=arguments,i=this,n=0,s=0,r=e.length,o=null,u=null;r>n;n+=1)for(o=e[n].split("."),t=o.length,s=0;t>s;s+=1)u=o[s],i[u]=i[u]||{},i=i[u];return i},triggerError:function(t,e){return this.fireEvent("onError",[t,e]),this.trigger(t.getMessage()),this},trigger:function(t,e,i){var n=t+"\nFile: "+e+"\nLinenumber: "+i;return console.error(n),this},getMessageHandler:function(e){if(this.MessageHandler)return void e(this.MessageHandler);var i=this;t(["qui/controls/messages/Handler"],function(t){i.MessageHandler=new t,e(i.MessageHandler)})},getControls:function(t){return this.Controls?void t(this.Controls):void 0}})}),define("qui/QUI",["qui/classes/QUI"],function(t){"use strict";return"undefined"==typeof window.QUI&&(window.QUI=new t),document.fireEvent("qui-loaded"),window.QUI}),define("qui/lib/require-css/normalize",[],function(){function t(t,i,s){if(t.match(u)||t.match(o))return t;t=r(t);var l=s.match(o),a=i.match(o);return!a||l&&l[1]==a[1]&&l[2]==a[2]?n(e(t,i),s):e(t,i)}function e(t,e){if("./"==t.substr(0,2)&&(t=t.substr(2)),t.match(u)||t.match(o))return t;var i=e.split("/"),n=t.split("/");for(i.pop();curPart=n.shift();)".."==curPart?i.pop():i.push(curPart);return i.join("/")}function n(t,e){var n=e.split("/");for(n.pop(),e=n.join("/")+"/",i=0;e.substr(i,1)==t.substr(i,1);)i++;for(;"/"!=e.substr(i,1);)i--;e=e.substr(i+1),t=t.substr(i+1),n=e.split("/");var s=t.split("/");for(out="";n.shift();)out+="../";for(;curPart=s.shift();)out+=curPart+"/";return out.substr(0,out.length-1)}var s=/([^:])\/+/g,r=function(t){return t.replace(s,"$1/")},o=/[^\:\/]*:\/\/([^\/])*/,u=/^(\/|data:)/,l=function(e,i,n){i=r(i),n=r(n);for(var s,o,e,u=/@import\s*("([^"]*)"|'([^']*)')|url\s*\(\s*(\s*"([^"]*)"|'([^']*)'|[^\)]*\s*)\s*\)/gi;s=u.exec(e);){o=s[3]||s[2]||s[5]||s[6]||s[4];var l;l=t(o,i,n);var a=s[5]||s[6]?1:0;e=e.substr(0,u.lastIndex-o.length-a-1)+l+e.substr(u.lastIndex-a-1),u.lastIndex=u.lastIndex+(l.length-o.length)}return e};return l.convertURIBase=t,l.absoluteURI=e,l.relativeURI=n,l}),define("qui/lib/require-css/css",[],function(){if("undefined"==typeof window)return{load:function(t,e,i){i()}};var t=document.getElementsByTagName("head")[0],e=window.navigator.userAgent.match(/Trident\/([^ ;]*)|AppleWebKit\/([^ ;]*)|Opera\/([^ ;]*)|rv\:([^ ;]*)(.*?)Gecko\/([^ ;]*)|MSIE\s([^ ;]*)/)||0,i=!1,n=!0;e[1]||e[7]?i=parseInt(e[1])<6||parseInt(e[7])<=9:e[2]?n=!1:e[4]&&(i=parseInt(e[4])<18);var s={};s.pluginBuilder="./css-builder";var r,o,u,l=function(){r=document.createElement("style"),t.appendChild(r),o=r.styleSheet||r.sheet},a=0,h=[],c=function(t){a++,32==a&&(l(),a=0),o.addImport(t),r.onload=d},d=function(){u();var t=h.shift();return t?(u=t[1],void c(t[0])):void(u=null)},f=function(t,e){if(o&&o.addImport||l(),o&&o.addImport)u?h.push([t,e]):(c(t),u=e);else{r.textContent='@import "'+t+'";';var i=setInterval(function(){try{r.sheet.cssRules,clearInterval(i),e()}catch(t){}},10)}},m=function(e,i){var s=document.createElement("link");if(s.type="text/css",s.rel="stylesheet",n)s.onload=function(){s.onload=function(){},setTimeout(i,7)};else var r=setInterval(function(){for(var t=0;t<document.styleSheets.length;t++){var e=document.styleSheets[t];if(e.href==s.href)return clearInterval(r),i()}},10);s.href=e,t.appendChild(s)};return s.normalize=function(t,e){return".css"==t.substr(t.length-4,4)&&(t=t.substr(0,t.length-4)),e(t)},s.load=function(t,e,n){(i?f:m)(e.toUrl(t+".css"),n)},s}),define("qui/lib/require-css/css!qui/controls/Control",[],function(){}),define("qui/controls/Control",["qui/QUI","qui/classes/DOM","css!qui/controls/Control.css"],function(t,e){"use strict";return new Class({Extends:e,Type:"qui/controls/Control",$Parent:null,options:{name:""},initialize:function(e){this.parent(e),t.Controls.add(this)},create:function(){return this.$Elm?this.$Elm:(this.$Elm=new Element("div.QUI-control"),this.$Elm)},inject:function(e,i){return this.fireEvent("drawBegin",[this]),"undefined"!=typeof this.$Elm&&this.$Elm||(this.$Elm=this.create()),"undefined"!=typeof t&&"undefined"!=typeof t.Controls&&t.Controls.isControl(e)?e.appendChild(this):this.$Elm.inject(e,i),this.fireEvent("inject",[this]),this},serialize:function(){return{attributes:this.getAttributes(),type:this.getType()}},unserialize:function(t){t.attributes&&this.setAttributes(t.attributes)},destroy:function(){this.fireEvent("destroy",[this]),"undefined"!=typeof this.$Elm&&this.$Elm&&this.$Elm.destroy(),this.$Elm=null,t.Controls.destroy(this)},getElm:function(){return"undefined"!=typeof this.$Elm&&this.$Elm||this.create(),this.$Elm},getParent:function(){return this.$Parent||!1},setParent:function(t){return this.$Parent=t,this},getPath:function(){var t="/"+this.getAttribute("name"),e=this.getParent();return e?e.getPath()+t:t},hide:function(){return this.$Elm&&this.$Elm.setStyle("display","none"),this},show:function(){return this.$Elm&&this.$Elm.setStyle("display",null),this},highlight:function(){return this.fireEvent("highlight",[this]),this},normalize:function(){return this.fireEvent("normalize",[this]),this},focus:function(){return this.$Elm&&this.$Elm.focus(),this},resize:function(){this.fireEvent("resize",[this])}})}),define("qui/classes/Locale",["qui/classes/DOM"],function(t){"use strict";return new Class({Extends:t,Type:"qui/classes/Locale",current:"en",langs:{},no_translation:!1,initialize:function(t){this.parent(t)},setCurrent:function(t){this.current=t},getCurrent:function(){return this.current},set:function(t,e,i,n){if(this.langs[t]||(this.langs[t]={}),this.langs[t][e]||(this.langs[t][e]={}),"undefined"!=typeof n)return this.langs[t][set][i]=n,this;var s=this.langs[t][e];for(var r in i)s[r]=i[r];this.langs[t][e]=s},get:function(t,e,i){if("undefined"==typeof i)return this.$get(t,e);var n=this.$get(t,e);for(t in i)n=n.replace("["+t+"]",i[t]);return n},$get:function(t,e){return this.no_translation?"["+t+"] "+e:this.langs[this.current]&&this.langs[this.current][t]?"undefined"==typeof e?this.langs[this.current][t]:this.langs[this.current][t][e]?this.langs[this.current][t][e]:"["+t+"] "+e:(this.fireEvent("error",["No translation found for ["+t+"] "+e,this]),"["+t+"] "+e)}})}),define("qui/Locale",["qui/classes/Locale"],function(t){"use strict";return"undefined"==typeof window.QUILocale&&(window.QUILocale=new t),window.QUILocale}),define("qui/lib/require-css/css!qui/controls/loader/Loader",[],function(){}),define("qui/controls/loader/Loader",["qui/controls/Control","qui/Locale","css!qui/controls/loader/Loader.css"],function(t,e){"use strict";return new Class({Extends:t,Type:"qui/controls/loader/Loader",options:{cssclass:"",closetime:5e4,styles:!1},initialize:function(t){this.parent(t),this.$delay=null;this.addEvent("onDestroy",function(){this.$Elm.getParent()&&this.$Elm.getParent().removeClass("qui-loader-parent")})},create:function(){return this.$Elm=new Element("div",{"class":"qui-loader",html:'<div class="qui-loader-message"></div><div class="qui-loader-bar"><div class="qui-loader-dot qui-loader-bar1"></div><div class="qui-loader-dot qui-loader-bar2"></div><div class="qui-loader-dot qui-loader-bar3"></div><div class="qui-loader-dot qui-loader-bar4"></div><div class="qui-loader-dot qui-loader-bar5"></div><div class="qui-loader-dot qui-loader-bar6"></div><div class="qui-loader-dot qui-loader-bar7"></div><div class="qui-loader-dot qui-loader-bar8"></div></div>',styles:{display:"none",opacity:.8}}),this.getAttribute("cssclass")&&this.$Elm.addClass(this.getAttribute("cssclass")),this.getAttribute("styles")&&this.$Elm.setStyles(this.getAttribute("styles")),this.$Elm},show:function(t){if(this.$Elm&&this.$Elm.getParent()){var e=this.$Elm.getElement(".qui-loader-message"),i=this.$Elm.getElement(".qui-loader-bar"),n=this.$Elm.getParent().getSize();e.set("html",""),i.setStyles({top:(n.y-50)/2,left:(n.x-240)/2}),"undefined"!=typeof t&&e.set({html:t,styles:{top:(n.y+20)/2}}),this.$Elm.setStyle("display",""),this.$Elm.getParent().hasClass("qui-window-popup")||this.$Elm.getParent().addClass("qui-loader-parent"),this.getAttribute("closetime")&&(this.$delay&&clearTimeout(this.$delay),this.$delay=function(){this.showCloseButton()}.delay(this.options.closetime,this))}},hide:function(){this.$delay&&clearTimeout(this.$delay),this.$Elm&&this.$Elm.setStyle("display","none")},showCloseButton:function(){if(this.$Elm){this.$Elm.set({html:"",styles:{cursor:"pointer"}}),this.$Elm.setStyle("opacity",.9);var t=this;new Element("div",{text:e.get("quiqqer/controls","loader.close"),styles:{"font-weight":"bold","text-align":"center","margin-top":this.$Elm.getSize().y/2-100},events:{click:function(){t.hide()}}}).inject(this.$Elm)}}})}),define("qui/lib/require-css/css!qui/controls/contextmenu/Menu",[],function(){}),define("qui/controls/contextmenu/Menu",["qui/controls/Control","css!qui/controls/contextmenu/Menu.css"],function(t){"use strict";return new Class({Extends:t,Type:"qui/controls/contextmenu/Menu",Binds:["$keyup"],options:{styles:null,width:200,title:!1,shadow:!0,corner:!1,dragable:!1},initialize:function(t){this.parent(t),this.$items=[],this.$Title=null,this.$Active=null},create:function(){this.$Elm=new Element("div.qui-contextmenu",{html:'<div class="qui-contextmenu-container"></div>',tabindex:-1,styles:{display:"none",outline:"none","-moz-outline":"none"},events:{blur:function(){this.fireEvent("blur",[this])}.bind(this),keyup:this.$keyup},"data-quiid":this.getId()}),this.$Container=this.$Elm.getElement(".qui-contextmenu-container"),this.getAttribute("width")&&this.$Elm.setStyle("width",this.getAttribute("width")),this.getAttribute("styles")&&this.$Elm.setStyles(this.getAttribute("styles")),this.getAttribute("title")&&this.setTitle(this.getAttribute("title")),this.getAttribute("shadow")&&this.$Container.addClass("qui-contextmenu-shadow");for(var t=0,e=this.$items.length;e>t;t++)this.$items[t].inject(this.$Container);return this.$Elm},show:function(){if(!this.$Elm)return this;var t=this.$Elm.getParent(),e=this.$Elm;switch(this.getAttribute("corner")&&(e.removeClass("qui-context-corner-top"),e.removeClass("qui-context-corner-bottom"),e.removeClass("qui-context-corner-left"),e.removeClass("qui-context-corner-left")),this.getAttribute("corner")){case"top":e.addClass("qui-context-corner-top");break;case"bottom":e.addClass("qui-context-corner-bottom");break;case"left":e.addClass("qui-context-corner-left");break;case"right":e.addClass("qui-context-corner-right")}e.setStyles({display:""});var i=e.getSize();if(this.$Container.setStyles({height:i.y}),this.setAttribute("menuPosLeft",!1),"BODY"===t.nodeName){var n=e.getPosition(),s=t.getSize();n.x+i.x+50>s.x&&this.$Elm.setStyle("left",s.x-i.x-50),n.y+i.y+50>s.y&&this.$Elm.setStyle("top",s.y-i.y-50)}return this.$Active&&this.$Active.setActive(),this.fireEvent("show",[this]),this},hide:function(){return this.getElm().setStyles({display:"none"}),this.fireEvent("hide",[this]),this},focus:function(){return this.getElm().focus(),this.fireEvent("focus",[this]),this},setPosition:function(t,e){return this.$Elm&&this.$Elm.setStyles({left:t,top:e}),this},setTitle:function(t){return this.$Container&&!this.$Title&&(this.$Title=new Element("div.qui-contextmenu-title"),this.$Title.inject(this.$Container,"top")),this.$Title&&this.$Title.set("html",t),this.setAttribute("title",t),this},getChildren:function(t){if("undefined"!=typeof t){var e,i,n=this.$items;for(e=0,i=n.length;i>e;e++)if(n[e].getAttribute("name")==t)return n[e];return!1}return this.$items},firstChild:function(){return this.$items[0]?this.$items[0]:!1},count:function(){return this.$items.length},appendChild:function(t){return t&&"undefined"!=typeof t?(this.$items.push(t),t.setParent(this),this.getAttribute("dragable")&&t.setAttribute("dragable",!0),this.$Container&&t.inject(this.$Container),this):this},clearChildren:function(){for(var t=0,e=this.$items.length;e>t;t++)this.$items[t]&&this.$items[t].destroy();return this.$items=[],this},getActive:function(){return this.$Active?this.$Active:!1},getNext:function(t){for(var e=0,i=this.$items.length;i>e;e++)if(this.$items[e]==t&&"undefined"!=typeof this.$items[e+1])return this.$items[e+1];return!1},getPrevious:function(t){for(var e=this.$items.length-1;e>=0;e--){if(0===e)return!1;if(this.$items[e]==t)return this.$items[e-1]}return!1},deselectItems:function(){return this.$Active&&(this.$Active=null),this},$keyup:function(t){return"down"===t.key?void this.down():"up"===t.key?void this.up(t):"enter"===t.key?void this.select(t):void 0},up:function(){if(this.$items.length){var t=this.$items.length;if(!this.$Active)return void this.$items[t-1].setActive();var e=this.getPrevious(this.$Active);return this.$Active.setNormal(),e?void e.setActive():void this.$items[t-1].setActive()}},down:function(){if(this.$items.length){if(!this.$Active)return void this.$items[0].setActive();var t=this.getNext(this.$Active);return this.$Active.setNormal(),t?void t.setActive():void this.$items[0].setActive()}},select:function(t){this.$Active&&(this.$Active.fireEvent("mouseDown",[this.$Active,t]),this.$Active.fireEvent("click",[this.$Active,t]))}})}),define("qui/classes/utils/DragDrop",["qui/classes/DOM"],function(t){"use strict";return new Class({Extends:t,Type:"qui/classes/utils/DragDrop",Binds:["$complete","$onDrag","$onDrop","$onLeave","$onEnter"],options:{dropables:[document.body],styles:!1,cssClass:!1,delay:500,limit:{x:!1,y:!1}},initialize:function(t,e){var i=this;this.parent(e),this.$Drag=null,this.$Element=t,this.$enable=!0,t.addEvents({mousedown:function(t){i.$enable&&(i.setAttribute("_stopdrag",!1),i.$timer=i.$start.delay(i.getAttribute("delay"),i,t),t.stop())},mouseup:function(t){"undefined"!=typeof i.$timer&&clearTimeout(i.$timer),i.$stop(t)}})},getElm:function(){return this.$Elm},enable:function(){this.$enable=!0},disable:function(){this.$enable=!1},$start:function(t){if(this.$enable&&!(t.rightClick||Browser.ie8||this.getAttribute("_mousedown")||this.getAttribute("_stopdrag"))){this.setAttribute("_mousedown",!0);var e=t.page.x,i=t.page.y,n=this.$Element,s=n.getSize(),r=this.getAttribute("limit"),o=document.body.getSize();this.$Drag=new Element("div",{"class":"box",styles:{position:"absolute",top:i-20,left:e-40,zIndex:1e3,MozOutline:"none",outline:0,color:"#fff",padding:10,cursor:"pointer",width:s.x,height:s.y,background:"rgba(0,0,0, 0.5)"}}).inject(document.body),this.getAttribute("styles")&&this.$Drag.setStyles(this.getAttribute("styles")),this.getAttribute("cssClass")&&this.$Drag.addClass(this.getAttribute("cssClass")),this.$Drag.focus(),this.fireEvent("start",[this,this.$Drag,t]),r.x||(r.x=[0,o.x-this.$Drag.getSize().x]),r.y||(r.y=[0,o.y-this.$Drag.getSize().y]);var u=this.getAttribute("dropables");"array"===typeOf(u)&&(u=u.join(",")),new Drag.Move(this.$Drag,{precalculate:!0,droppables:u,onComplete:this.$complete,onDrop:this.$onDrop,onEnter:this.$onEnter,onLeave:this.$onLeave,onDrag:this.$onDrag,limit:r}).start({page:{x:e,y:i}})}},$stop:function(){if(!Browser.ie8){if(!this.getAttribute("_mousedown"))return void this.setAttribute("_stopdrag",!0);this.setAttribute("_mousedown",!1),("undefined"!=typeof this.$Drag||this.$Drag)&&(this.fireEvent("stop",[this,this.$Drag]),this.$Drag.destroy(),this.$Drag=null)}},$complete:function(t){this.fireEvent("complete",[this,t]),this.$stop()},$onDrag:function(t,e){this.fireEvent("drag",[this,t,e])},$onDrop:function(t,e,i){this.fireEvent("drop",[this,t,e,i])},$onEnter:function(t,e){this.fireEvent("enter",[this,t,e])},$onLeave:function(t,e){this.fireEvent("leave",[this,t,e])}})}),define("qui/utils/Controls",["qui/QUI"],function(t){"use strict";return{isFontAwesomeClass:function(t){return t?!t.match(/icon-/)&&!t.match(/fa-/)||t.match(/\./)?!1:!0:!1},highlight:function(e){if(e){var i=e.get("data-quiid");i&&t.Controls.getById(i).highlight()}},normalize:function(e){if(e){var i=e.get("data-quiid");i&&t.Controls.getById(i).normalize()}}}}),define("qui/lib/require-css/css!qui/controls/contextmenu/Item",[],function(){}),define("qui/controls/contextmenu/Item",["qui/QUI","qui/controls/Control","qui/classes/utils/DragDrop","qui/controls/contextmenu/Menu","qui/utils/Controls","css!qui/controls/contextmenu/Item.css"],function(QUI,Control,DragDrop,ContextMenu,Utils){"use strict";return new Class({Extends:Control,Type:"qui/controls/contextmenu/Item",Binds:["$onSetAttribute","$stringEvent","$onClick","$onMouseEnter","$onMouseLeave","$onMouseUp","$onMouseDown"],options:{text:"",icon:"",styles:null,dragable:!1},initialize:function(options){var self=this,items=options.items||[];delete options.items,this.parent(options),this.$items=[],this.$Elm=null,this.$Menu=null,this.$path="",this.$disabled=!1,"undefined"!=typeof options.disabled&&options.disabled&&(this.$disabled=!0),this.addEvent("onSetAttribute",this.$onSetAttribute),items.length&&this.insert(items),this.getAttribute("onClick")&&this.addEvent("onClick",function(){try{eval(self.getAttribute("onClick")+"( self )")}catch(e){console.error(e)}})},create:function(){var t,e,i=this;if(this.$Elm=new Element("div.qui-contextitem",{html:'<div class="qui-contextitem-container"><span class="qui-contextitem-icon"></span><span class="qui-contextitem-text"></span></div>',"data-quiid":this.getId(),tabindex:-1,events:{mouseenter:this.$onMouseEnter,mouseleave:this.$onMouseLeave}}),this.$Elm.getElement(".qui-contextitem-container").addEvents({click:this.$onClick,mousedown:this.$onMouseDown,mouseup:this.$onMouseUp}),this.getAttribute("icon")&&""!==this.getAttribute("icon")){var n=this.$Elm.getElement(".qui-contextitem-icon"),s=this.getAttribute("icon");Utils.isFontAwesomeClass(s)?n.addClass(s):n.setStyle("background-image","url("+s+")")}if(this.getAttribute("text")&&""!==this.getAttribute("text")){var r=this.$Elm.getElement(".qui-contextitem-text");this.$Elm.getComputedSize().width?r.set({html:this.getAttribute("text"),styles:{width:this.$Elm.getComputedSize().width}}):function(){r.set({html:i.getAttribute("text"),styles:{width:i.$Elm.getComputedSize().width}})}.delay(500)}if(this.getAttribute("dragable")&&new DragDrop(this.$Elm,{dropables:".qui-contextitem-dropable",events:{onEnter:function(t,e,i){if(i){var n=i.get("data-quiid");n&&QUI.Controls.getById(n).highlight()}},onLeave:function(t,e,i){if(i){var n=i.get("data-quiid");n&&QUI.Controls.getById(n).normalize()}},onDrop:function(t,e,n){if(n){var s=n.get("data-quiid");if(s){var r=QUI.Controls.getById(s);r.normalize(),r.appendChild(i)}}}}}),e=this.$items.length){this.$Elm.addClass("haschildren");var o=this.getContextMenu();for(t=0;e>t;t++)o.appendChild(this.$items[t])}return this.isDisabled()&&this.disable(),this.$Elm},insert:function(t){var e=this;return require(["qui/controls/contextmenu/Item","qui/controls/contextmenu/Seperator"],function(i,n){for(var s=0,r=t.length;r>s;s++)e.getAttribute("dragable")&&(t[s].dragable=!0),e.appendChild("qui/controls/contextmenu/Seperator"!=t[s].type?new i(t[s]):new n(t[s]))}),this},click:function(){this.$onClick()},appendChild:function(t){return this.$items.push(t),t.setParent(this),this.$Elm&&(this.$Elm.addClass("haschildren"),t.inject(this.getContextMenu())),this.fireEvent("append",[this,t]),this},disable:function(){return this.$disabled=!0,this.$Elm?(this.$Elm.addClass("qui-contextitem-disabled"),this):this},isDisabled:function(){return this.$disabled},enable:function(){return this.$disabled=!1,this.$Elm?(this.$Elm.removeClass("qui-contextitem-disabled"),this):this},setActive:function(){return this.$Elm&&this.$Elm.hasClass("qui-contextitem-active")?this:(this.$Elm&&(this.$Menu?this.$Elm.getChildren(".qui-contextitem-container").addClass("qui-contextitem-active"):this.$Elm.addClass("qui-contextitem-active")),this.fireEvent("active",[this]),this)},setNormal:function(){return this.$Elm?(this.$Menu?this.$Elm.getChildren(".qui-contextitem-container").removeClass("qui-contextitem-active"):this.$Elm.removeClass("qui-contextitem-active"),this.fireEvent("normal",[this]),this):this},getChildren:function(t){return"undefined"!=typeof t?t==this.getAttribute("name")+"-menu"?this.getContextMenu():this.getContextMenu().getChildren(t):this.getContextMenu().getChildren()},clear:function(){return this.getContextMenu().clear(),this.$items=[],this},getContextMenu:function(){return this.$Menu?this.$Menu:(this.$Menu=new ContextMenu({name:this.getAttribute("name")+"-menu",corner:"left",events:{onShow:function(t){for(var e=t.getChildren(),i=(t.getElm(),0),n=e.length;n>i;i++)e[i].setNormal()}}}),this.$Menu.inject(this.$Elm),this.$Menu.hide(),this.$Menu.setParent(this),this.$Menu)},$onSetAttribute:function(t,e){if(this.$Elm){if("text"==t)return void this.$Elm.getElement(".qui-contextitem-text").set("html",e);if("icon"==t){var i=this.$Elm.getElement(".qui-contextitem-icon");return i.className="qui-contextitem-icon",i.setStyle("background-image",null),void(Utils.isFontAwesomeClass(e)?i.addClass(e):this.$Elm.getElement(".qui-contextitem-container").setStyle("background-image","url("+e+")"))}}},$stringEvent:function(event){eval("("+event+"(this));")},$onClick:function(t){this.fireEvent("click",[this,t]);var e=this.getParent();e&&this.getParent().hide()},$onMouseEnter:function(){if(!this.$disabled){if(this.$Menu){var t=this.$Elm.getSize(),e=this.$Menu.getParent();if(this.$Menu.setPosition(t.x,0),this.$Menu.show(),e){var i=this.$Menu.getElm(),n=i.getPosition(),s=i.getSize(),r=document.body.getSize();n.x+t.x>r.x&&this.$Menu.setPosition(0-s.x,0)}this.$Elm.getChildren(".qui-contextitem-container").addClass("qui-contextitem-active")}this.setActive()}},$onMouseLeave:function(){this.$disabled||(this.$Menu&&this.$Menu.hide(),this.$Elm.getChildren(".qui-contextitem-container").removeClass("qui-contextitem-active"),this.setNormal())},$onMouseUp:function(t){this.fireEvent("mouseUp",[this,t]),this.getAttribute("dragable")===!1&&t.stop()},$onMouseDown:function(t){this.fireEvent("mouseDown",[this,t]),this.getAttribute("dragable")===!1&&t.stop()}})}),define("qui/utils/NoSelect",[],function(){"use strict";return{enable:function(t){return"undefined"==typeof t.setProperty&&(t=document.id(t)),t.removeClass("qui-utils-noselect"),Browser.ie?void document.removeEvent("selectstart",this.stopSelection):(t.removeProperty("unselectable","on"),t.removeProperty("unSelectable","on"),void t.setStyles({MozUserSelect:"",KhtmlUserSelect:""}))},disable:function(t){return"undefined"==typeof t.setProperty&&(t=document.id(t)),t.addClass("qui-utils-noselect"),Browser.ie?void document.addEvent("selectstart",this.stopSelection):(t.setProperty("unselectable","on"),t.setProperty("unSelectable","on"),void t.setStyles({MozUserSelect:"none",KhtmlUserSelect:"none"}))},stopSelection:function(t){return t.stop(),!1}}}),define("qui/utils/Elements",[],function(){"use strict";return{isInViewport:function(t){var e=t.getBoundingClientRect();return e.top>=0&&e.left>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth)},isInBody:function(t){var e=document.body.getSize(),i=t.getCoordinates();return console.log(i),console.log(e),!1},getComputedZIndex:function(t){var e,i,n,s=0,r=t.getParents();for(e=0,n=r.length;n>e;e++)i=r[e].getStyle("zIndex"),"auto"!=i&&i>s&&(s=i);return s}}}),define("qui/lib/require-css/css!qui/controls/buttons/Button",[],function(){}),define("qui/controls/buttons/Button",["qui/controls/Control","qui/utils/Controls","qui/utils/NoSelect","qui/utils/Elements","css!qui/controls/buttons/Button.css"],function(Control,Utils,NoSelect,ElementUtils){"use strict";return new Class({Extends:Control,Type:"qui/controls/buttons/Button",Binds:["onSetAttribute"],options:{type:"button",image:!1,icon:!1,style:{},textimage:!1,text:!1,title:!1,"class":!1,buttonCSSClass:!0,menuCorner:"top"},params:{},initialize:function(t){this.parent(t),this.$Menu=null,this.$Drop=null,this.$items=[],t.events&&delete t.events,this.setAttributes(this.initV2(t)),this.addEvent("onSetAttribute",this.onSetAttribute),this.addEvent("onDestroy",function(){this.$Menu&&this.$Menu.destroy()}.bind(this))},initV2:function(options){return options.onclick&&("string"===typeOf(options.onclick)&&(options.onclick=function(p){eval(p+"(this);")}.bind(this,[options.onclick])),this.addEvent("onClick",options.onclick),delete options.onclick),options.oncreate&&(this.addEvent("onCreate",options.oncreate),delete options.oncreate),options},create:function(){var t,e,i=this,n=new Element("button",{type:this.getAttribute("type"),"data-status":0,"data-quiid":this.getId()});return this.getAttribute("buttonCSSClass")&&n.addClass("qui-button"),this.getAttribute("width")&&n.setStyle("width",this.getAttribute("width")),this.getAttribute("height")&&n.setStyle("height",this.getAttribute("height")),this.getAttribute("styles")&&n.setStyles(this.getAttribute("styles")),this.getAttribute("class")&&n.addClass(this.getAttribute("class")),n.style.outline=0,n.setAttribute("tabindex","-1"),n.addEvents({click:function(t){i.isDisabled()||i.onclick(t)},mouseenter:function(){i.isDisabled()||(i.isActive()||i.getElm().addClass("qui-button-over"),i.fireEvent("enter",[i]))},mouseleave:function(){i.isDisabled()||(i.isActive()||i.getElm().removeClass("qui-button-over"),i.fireEvent("leave",[i]))},mousedown:function(t){i.isDisabled()||i.fireEvent("mousedown",[i,t])},mouseup:function(t){i.isDisabled()||i.fireEvent("mouseup",[i,t])},blur:function(t){i.fireEvent("blur",[i,t])},focus:function(t){i.fireEvent("focus",[i,t])}}),this.$Elm=n,this.getAttribute("icon")&&this.setAttribute("icon",this.getAttribute("icon")),!this.getAttribute("icon")&&this.getAttribute("image")&&this.setAttribute("icon",this.getAttribute("image")),this.getAttribute("styles")&&this.setAttribute("styles",this.getAttribute("styles")),this.getAttribute("textimage")&&this.setAttribute("textimage",this.getAttribute("textimage")),this.getAttribute("text")&&this.setAttribute("text",this.getAttribute("text")),this.getAttribute("title")&&this.$Elm.setAttribute("title",this.getAttribute("title")),this.getAttribute("disabled")&&this.setDisable(),e=this.$items.length,e&&this.getContextMenu(function(n){for(t=0;e>t;t++)n.appendChild(i.$items[t]);i.$Drop=new Element("div",{"class":"qui-button-drop icon-chevron-down"}).inject(i.$Elm)}),this.fireEvent("create",[this]),NoSelect.disable(n),this.$Elm},click:function(t){this.isDisabled()||this.fireEvent("click",[this,t])},onclick:function(t){this.click(t)},setActive:function(){if(!this.isDisabled()){var t=this.getElm();t&&(t.addClass("qui-button-active"),t.set("data-status",1),this.fireEvent("active",[this]))}},isActive:function(){return this.getElm()&&1==this.getElm().get("data-status")?!0:!1},disable:function(){var t=this.getElm();if(t)return t.set({"data-status":-1,disabled:"disabled"}),this.fireEvent("disable",[this]),this},setDisable:function(){return this.disable()},isDisabled:function(){return this.getElm()&&-1==this.getElm().get("data-status")?!0:!1},enable:function(){return this.getElm()?(this.getElm().set({"data-status":0,disabled:null}),this.setNormal(),this):!1},setEnable:function(){return this.enable()},setNormal:function(){if(!this.isDisabled()){if(!this.getElm())return!1;var t=this.getElm();return t.set({"data-status":0,disabled:null}),t.removeClass("qui-button-active"),t.removeClass("qui-button-over"),this.fireEvent("normal",[this]),this}},appendChild:function(t){if(this.$items.push(t),t.setAttribute("Button",this),!this.$Elm)return this;var e=this;return this.getContextMenu(function(i){i.appendChild(t),e.$Drop||(e.$Drop=new Element("div",{"class":"qui-button-drop icon-chevron-down"}).inject(e.$Elm))}),this},getChildren:function(){return this.$items},clear:function(){return this.getContextMenu(function(t){t.clearChildren()}),this.$items=[],this},getContextMenu:function(t){if(this.$Menu&&"undefined"==typeof this.$createContextMenu)return t(this.$Menu),this;var e=this;return"undefined"!=typeof this.$createContextMenu?(function(){e.getContextMenu(t)}.delay(10),this):(this.$createContextMenu=!0,void require(["qui/controls/contextmenu/Menu"],function(i){e.$Menu=new i({name:e.getAttribute("name")+"-menu",corner:e.getAttribute("menuCorner")}),e.$Menu.inject(document.body),e.addEvents({onClick:function(){if(!e.isDisabled()){var t=e.$Elm.getPosition(),i=e.$Elm.getSize();e.$Menu.setPosition(t.x-20,t.y+i.y+10),e.$Menu.show(),e.$Elm.focus()}},onBlur:function(){e.$Menu.hide()}}),e.$Menu.setParent(e),delete e.$createContextMenu,t(e.$Menu)}))},onSetAttribute:function(k,value){var Elm=this.getElm();if(Elm){if("onclick"===k)return this.removeEvents("click"),void this.addEvent("click",function(p){eval(p+"(this);")
}.bind(this,[value]));if("image"==k&&(k="icon"),"icon"===k){Elm.getElement(".image-container")||new Element("div.image-container",{align:"center"}).inject(Elm);var Image=Elm.getElement(".image-container");return Image.set("html",""),void(Utils.isFontAwesomeClass(value)?new Element("span",{"class":value}).inject(Image):new Element("img.qui-button-image",{src:value,styles:{display:"block"}}).inject(Image))}if("styles"===k)return void Elm.setStyles(value);if("title"===k)return void Elm.setAttribute("title",value);if("textimage"===k||"text"===k){Elm.getElement(".qui-button-text")||new Element("span.qui-button-text").inject(Elm);var Txt=Elm.getElement(".qui-button-text");if("text"===k&&Txt.set("html",value),"textimage"===k){var Img;Elm.getElement(".qui-button-text-image")&&Elm.getElement(".qui-button-text-image").destroy(),Img=Utils.isFontAwesomeClass(value)?new Element("span",{"class":"qui-button-text-image "+value,styles:{"margin-right":0}}).inject(Txt,"before"):new Element("img",{"class":"qui-button-text-image",src:value,styles:{"margin-right":0}}).inject(Txt,"before"),this.getAttribute("text")&&Img.setStyle("margin-right",null)}}}}})}),function(t){var e={},i=function(n){var s=e[n];if(!s){s=e[n]={};var r=s.exports={};t[n].call(r,i,s,r,window)}return s.exports};window.moofx=i("0")}({0:function(t,e){"use strict";var i=t("1"),n=t("2"),s=t("undefined"!=typeof document?"4":"o");s.requestFrame=function(t){return n.request(t),this},s.cancelFrame=function(t){return n.cancel(t),this},s.color=i,e.exports=s},1:function(t,e){"use strict";var i={maroon:"#800000",red:"#ff0000",orange:"#ffA500",yellow:"#ffff00",olive:"#808000",purple:"#800080",fuchsia:"#ff00ff",white:"#ffffff",lime:"#00ff00",green:"#008000",navy:"#000080",blue:"#0000ff",aqua:"#00ffff",teal:"#008080",black:"#000000",silver:"#c0c0c0",gray:"#808080",transparent:"#0000"},n=function(t,e,i,n){return(null==n||""===n)&&(n=1),t=parseFloat(t),e=parseFloat(e),i=parseFloat(i),n=parseFloat(n),255>=t&&t>=0&&255>=e&&e>=0&&255>=i&&i>=0&&1>=n&&n>=0?[Math.round(t),Math.round(e),Math.round(i),n]:null},s=function(t){if(3===t.length&&(t+="f"),4===t.length){var e=t.charAt(0),i=t.charAt(1),n=t.charAt(2),s=t.charAt(3);t=e+e+i+i+n+n+s+s}6===t.length&&(t+="ff");for(var r=[],o=0,u=t.length;u>o;o+=2)r.push(parseInt(t.substr(o,2),16)/(6===o?255:1));return r},r=function(t,e,i){return 0>i&&(i+=1),i>1&&(i-=1),1/6>i?t+6*(e-t)*i:.5>i?e:2/3>i?t+6*(e-t)*(2/3-i):t},o=function(t,e,i,n){var s,o,u;if((null==n||""===n)&&(n=1),t=parseFloat(t)/360,e=parseFloat(e)/100,i=parseFloat(i)/100,n=parseFloat(n)/1,t>1||0>t||e>1||0>e||i>1||0>i||n>1||0>n)return null;if(0===e)s=o=u=i;else{var l=.5>i?i*(1+e):i+e-i*e,a=2*i-l;s=r(a,l,t+1/3),u=r(a,l,t),o=r(a,l,t-1/3)}return[255*s,255*u,255*o,n]},u=[];for(var l in i)u.push(l);var a="(?:#([a-f0-9]{3,8}))",h="\\s*([.\\d%]+)\\s*",c="(?:,\\s*([.\\d]+)\\s*)?",d="\\("+[h,h,h]+c+"\\)",f="(?:rgb)a?",m="(?:hsl)a?",g="("+u.join("|")+")",p=RegExp(a,"i"),v=RegExp(f+d,"i"),b=RegExp(m+d,"i"),$=function(t,e){if(null==t)return null;t=(t+"").replace(/\s+/,"");var r=i[t];if(r)return $(r,e);if(r=t.match(p))t=s(r[1]);else if(r=t.match(v))t=r.slice(1);else{if(!(r=t.match(b)))return null;t=o.apply(null,r.slice(1))}return t&&(t=n.apply(null,t))?e?t:(1===t[3]&&t.splice(3,1),"rgb"+(4===t.length?"a":"")+"("+t+")"):null};$.x=RegExp([g,a,f+d,m+d].join("|"),"gi"),e.exports=$},2:function(t,e,i,n){"use strict";var s=t("3"),r=n.requestAnimationFrame||n.webkitRequestAnimationFrame||n.mozRequestAnimationFrame||n.oRequestAnimationFrame||n.msRequestAnimationFrame||function(t){return setTimeout(function(){t()},1e3/60)},o=[],u=function(t){for(var e=o.splice(0,o.length),i=0,n=e.length;n>i;i++)e[i](t||(t=+new Date))},l=function(t){var e=s(o,t);e>-1&&o.splice(e,1)},a=function(t){var e=o.push(t);return 1===e&&r(u),function(){l(t)}};i.request=a,i.cancel=l},3:function(t,e){"use strict";var i=function(t,e,i){for(var n=t.length>>>0,s=0>i?Math.max(0,n+i):i||0;n>s;s++)if(t[s]===e)return s;return-1};e.exports=i},4:function(t,e,i,n){"use strict";var s=t("1"),r=t("2"),o=(r.cancel,r.request),u=t("5"),l=t("d"),a=t("e"),h=t("g"),c=t("h"),d=t("i"),f=t("j"),m=t("3"),g=t("k"),p=t("o"),v=function(t,e){return String.prototype.match.call(t,e)},b={},$=function(t){return b[t]||(b[t]=c(t))},y=function(t){return Math.round(1e3*t)/1e3},E=n.getComputedStyle?function(t){var e=getComputedStyle(t,null);return function(t){return e&&e.getPropertyValue($(t))?e.getPropertyValue($(t)):""}}:function(t){var e=t.currentStyle;return function(t){return e?e[l(t)]:""}},C=document.createElement("div"),q="border:none;margin:none;padding:none;visibility:hidden;position:absolute;height:0;",x=function(t,e){var i=t.parentNode,n=1;return i&&(C.style.cssText=q+("width:100"+e+";"),i.appendChild(C),n=C.offsetWidth/100,i.removeChild(C)),n},A=function(t){var e=t.length;return 1===e?t.push(t[0],t[0],t[0]):2===e?t.push(t[0],t[1]):3===e&&t.push(t[1]),t},S="([-.\\d]+)(%|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vm)",w=S+"?",B="none|hidden|dotted|dashed|solid|double|groove|ridge|inset|outset|inherit",M=RegExp(S,"g"),k=RegExp(w),I=RegExp(w,"g"),T=RegExp(B),z=function(t){return null==t?"":t+""},D=function(t,e){return null==t||""===t?e?"1":"":isFinite(t=+t)?0>t?"0":t+"":"1"};try{C.style.color="rgba(0,0,0,0.5)"}catch(j){}var P=/^rgba/.test(C.style.color),F=function(t,e){var i,n="rgba(0,0,0,1)";if(!t||!(i=s(t,!0)))return e?n:"";if(e)return"rgba("+i+")";var r=i[3];return 0===r?"transparent":P&&1!==r?"rgba("+i+")":"rgb("+i.slice(0,3)+")"},L=function(t,e){if(null==t||""===t)return e?"0px":"";var i=v(t,k);return i?i[1]+(i[2]||"px"):t},O=function(t,e){if(null==t||""===t)return e?"none":"";var i=t.match(T);return i?t:e?"none":""},R=function(t,e){var i="0px none rgba(0,0,0,1)";if(null==t||""===t)return e?i:"";if(0===t||"none"===t)return e?i:t+"";var n;t=t.replace(s.x,function(t){return n=t,""});var r=t.match(T),o=t.match(I);return a([L(o?o[0]:"",e),O(r?r[0]:"",e),F(n,e)].join(" "))},U=function(t,e){return null==t||""===t?e?"0px 0px 0px 0px":"":a(A(d(a(t).split(" "),function(t){return L(t,e)})).join(" "))},H=function(t,e,i){var n="rgba(0,0,0,0)",r=3===i?n+" 0px 0px 0px":n+" 0px 0px 0px 0px";if(null==t||""===t)return e?r:"";if("none"===t)return e?r:t;var o=[],t=a(t).replace(s.x,function(t){return o.push(t),""});return d(t.split(","),function(t,n){var s=F(o[n],e),r=/inset/.test(t),u=t.match(I)||["0px"];for(u=d(u,function(t){return L(t,e)});i>u.length;)u.push("0px");var l=r?["inset",s]:[s];return l.concat(u).join(" ")}).join(", ")},N=function(t,e){return null==t||""===t?"":t.replace(s.x,function(t){return F(t,e)}).replace(M,function(t){return L(t,e)})},W={},Q={},_={},X={},V=function(t){return W[t]||(W[t]=function(){var e=X[t]||t,i=_[t]||N;return function(){return i(E(this)(e),!0)}}())},Y=function(t){return Q[t]||(Q[t]=function(){var e=X[t]||t,i=_[t]||N;return function(t){this.style[e]=i(t,!1)}}())},K=["Top","Right","Bottom","Left"],Z=["TopLeft","TopRight","BottomRight","BottomLeft"];f(K,function(t){var e="border"+t;f(["margin"+t,"padding"+t,e+"Width",t.toLowerCase()],function(t){_[t]=L}),_[e+"Color"]=F,_[e+"Style"]=O,_[e]=R,W[e]=function(){return[V(e+"Width").call(this),V(e+"Style").call(this),V(e+"Color").call(this)].join(" ")}}),f(Z,function(t){_["border"+t+"Radius"]=L}),_.color=_.backgroundColor=F,_.width=_.height=_.minWidth=_.minHeight=_.maxWidth=_.maxHeight=_.fontSize=_.backgroundSize=L,f(["margin","padding"],function(t){_[t]=U,W[t]=function(){return d(K,function(e){return V(t+e).call(this)},this).join(" ")}}),_.borderWidth=U,_.borderStyle=function(t,e){return null==t||""===t?e?A(["none"]).join(" "):"":(t=a(t).split(" "),a(A(d(t,function(t){O(t,e)})).join(" ")))},_.borderColor=function(t,e){return t&&(t=v(t,s.x))?a(A(d(t,function(t){return F(t,e)})).join(" ")):e?A(["rgba(0,0,0,1)"]).join(" "):""},f(["Width","Style","Color"],function(t){W["border"+t]=function(){return d(K,function(e){return V("border"+e+t).call(this)},this).join(" ")}}),_.borderRadius=U,W.borderRadius=function(){return d(Z,function(t){return V("border"+t+"Radius").call(this)},this).join(" ")},_.border=R,W.border=function(){for(var t,e=0;K.length>e;e++){var i=V("border"+K[e]).call(this);if(t&&i!==t)return null;t=i}return t},_.zIndex=z,_.opacity=D;var G=null!=C.style.MsFilter&&"MsFilter"||null!=C.style.filter&&"filter";if(G&&null==C.style.opacity){var J=/alpha\(opacity=([\d.]+)\)/i;Q.opacity=function(t){t="1"===(t=D(t))?"":"alpha(opacity="+Math.round(100*t)+")";var e=E(this)(G);return this.style[G]=J.test(e)?e.replace(J,t):e+" "+t},W.opacity=function(){var t=E(this)(G).match(J);return(t?t[1]/100:1)+""}}var te=_.boxShadow=function(t,e){return H(t,e,4)},ee=_.textShadow=function(t,e){return H(t,e,3)};f(["Webkit","Moz","ms","O",null],function(t){f(["transition","transform","transformOrigin","transformStyle","perspective","perspectiveOrigin","backfaceVisibility"],function(e){var i=t?t+h(e):e;"ms"===t&&(b[i]="-ms-"+$(e)),null!=C.style[i]&&(X[e]=i)})});var ie=X.transition,ne=X.transform;"OTransition"===ie&&(ie=null);var se,re;!ie&&ne&&function(){var e=t("q"),i="\\s*([-\\d\\w.]+)\\s*",n=RegExp("matrix\\("+[i,i,i,i,i,i]+"\\)"),s=function(t){var i=e.apply(null,t.match(n).slice(1))||[[0,0],0,0,[0,0]];return["translate("+d(i[0],function(t){return y(t)+"px"})+")","rotate("+y(180*i[1]/Math.PI)+"deg)","skewX("+y(180*i[2]/Math.PI)+"deg)","scale("+d(i[3],y)+")"].join(" ")},r=function(t){return t||"0px"},o=function(t){return t||"1"},l=function(t){return t||"0deg"},h={translate:function(t){t||(t="0px,0px");var e=t.split(",");return e[1]||(e[1]="0px"),d(e,a)+""},translateX:r,translateY:r,scale:function(t){t||(t="1,1");var e=t.split(",");return e[1]||(e[1]=e[0]),d(e,a)+""},scaleX:o,scaleY:o,rotate:l,skewX:l,skewY:l};re=u({constructor:function(t){var e=this.names=[],i=this.values=[];t.replace(/(\w+)\(([-.\d\s\w,]+)\)/g,function(t,n,s){e.push(n),i.push(s)})},identity:function(){var t=[];return f(this.names,function(e){var i=h[e];i&&t.push(e+"("+i()+")")}),t.join(" ")},sameType:function(t){return""+this.names==""+t.names},decompose:function(){var t=""+this;C.style.cssText=q+$(ne)+":"+t+";",document.body.appendChild(C);var e=E(C)(ne);return e&&"none"!==e||(e="matrix(1, 0, 0, 1, 0, 0)"),document.body.removeChild(C),s(e)}}),re.prototype.toString=function(t){var e=this.values,i=[];return f(this.names,function(n,s){var r=h[n];if(r){var o=r(e[s]);t&&o===r()||i.push(n+"("+o+")")}}),i.length?i.join(" "):"none"},re.union=function(t,e){if(t!==e){var i,n;if("none"===t?(n=new re(e),e=""+n,t=n.identity(),i=new re(t)):"none"===e?(i=new re(t),t=""+i,e=i.identity(),n=new re(e)):(i=new re(t),t=""+i,n=new re(e),e=""+n),t!==e&&(i.sameType(n)||(t=i.decompose(),e=n.decompose()),t!==e))return[t,e]}},se=_.transform=function(t){return t&&"none"!==t?new re(n.test(t)?s(t):t).toString(!0):"none"},W.transform=function(){var t=this.style;return t[ne]||(t[ne]=se(E(this)(ne)))}}();var oe,ue=function(t,e,i){var n=_[e]||N,s=V(e).call(t),i=n(i,!0);if(s!==i){if(n===L||n===R||n===U){var r=i.match(M),o=0;r&&(s=s.replace(M,function(e,i,n){var s=r[o++],u=s.match(k),l=u[2];if(n!==l){var a="px"===n?i:x(t,n)*i;return y(a/x(t,l))+l}return e})),o>0&&Y(e).call(t,s)}else if(n===se)return re.union(s,i);return s!==i?[s,i]:null}},le=u({inherits:p,constructor:function fe(t,e){var i=V(e),n=Y(e);this.get=function(){return i.call(t)},this.set=function(e){return n.call(t,e)},fe.parent.constructor.call(this,this.set),this.node=t,this.property=e}});oe=u({inherits:le,constructor:function me(){return me.parent.constructor.apply(this,arguments)},start:function(t){if(this.stop(),0===this.duration)return this.cancel(t),this;var e=ue(this.node,this.property,t);if(!e)return this.cancel(t),this;if(oe.parent.start.apply(this,e),!this.cancelStep)return this;var i=_[this.property]||N;return i!==te&&i!==ee&&i!==N||this.templateFrom===this.templateTo||(this.cancelStep(),delete this.cancelStep,this.cancel(t)),this},parseEquation:function(t){return"string"==typeof t?oe.parent.parseEquation.call(this,t):void 0}});var ae=function(t,e,i,n){var s=m(e,t);-1!==s&&(e.splice(s,1),i.splice(s,1),n.splice(s,1))},he=u({inherits:le,constructor:function ge(t,e){ge.parent.constructor.call(this,t,e),this.hproperty=$(X[e]||e);var i=this;this.bSetTransitionCSS=function(t){i.setTransitionCSS(t)},this.bSetStyleCSS=function(t){i.setStyleCSS(t)},this.bComplete=function(){i.complete()}},start:function(t){if(this.stop(),0===this.duration)return this.cancel(t),this;var e=ue(this.node,this.property,t);return e?(this.to=e[1],this.cancelSetTransitionCSS=o(this.bSetTransitionCSS),this):(this.cancel(t),this)},setTransitionCSS:function(){delete this.cancelSetTransitionCSS,this.resetCSS(!0),this.cancelSetStyleCSS=o(this.bSetStyleCSS)},setStyleCSS:function(t){delete this.cancelSetStyleCSS;var e=this.duration;this.cancelComplete=setTimeout(this.bComplete,e),this.endTime=t+e,this.set(this.to)},complete:function(){delete this.cancelComplete,this.resetCSS(),this.callback(this.endTime)},stop:function(t){return this.cancelExit?(this.cancelExit(),delete this.cancelExit):this.cancelSetTransitionCSS?(this.cancelSetTransitionCSS(),delete this.cancelSetTransitionCSS):this.cancelSetStyleCSS?(this.cancelSetStyleCSS(),delete this.cancelSetStyleCSS,t&&this.resetCSS()):this.cancelComplete&&(clearTimeout(this.cancelComplete),delete this.cancelComplete,t&&(this.resetCSS(),this.set(this.get()))),this},resetCSS:function(t){var e=E(this.node),i=(e(ie+"Property").replace(/\s+/g,"")||"all").split(","),n=(e(ie+"Duration").replace(/\s+/g,"")||"0s").split(","),s=(e(ie+"TimingFunction").replace(/\s+/g,"")||"ease").match(/cubic-bezier\([\d-.,]+\)|([a-z-]+)/g);ae("all",i,n,s),ae(this.hproperty,i,n,s),t&&(i.push(this.hproperty),n.push(this.duration+"ms"),s.push("cubic-bezier("+this.equation+")"));var r=this.node.style;r[ie+"Property"]=i,r[ie+"Duration"]=n,r[ie+"TimingFunction"]=s},parseEquation:function(t){return"string"==typeof t?he.parent.parseEquation.call(this,t,!0):void 0}}),ce=ie?he:oe,de=function(t,e){return"function"==typeof t?p(t):g(t,e)};g.implement({animate:function(t,e,i){var n=t,s=e;"string"==typeof t&&(n={},n[t]=e,s=i),null==s&&(s={});var r=typeof s;s="function"===r?{callback:s}:"string"===r||"number"===r?{duration:s}:s;var o=s.callback||function(){},u=0,a=0;s.callback=function(t){++u===a&&o(t)};for(var h in n){var c=n[h],h=l(h);this.forEach(function(t){a++;var e=g(t),i=e._animations||(e._animations={}),n=i[h]||(i[h]=new ce(t,h));n.setOptions(s).start(c)})}return this},style:function(t,e){var i=t;"string"==typeof t&&(i={},i[t]=e);for(var n in i){var s=i[n],r=Y(n=l(n));this.forEach(function(t){var e,i=g(t),o=i._animations;o&&(e=o[n])&&e.stop(!0),r.call(t,s)})}return this},compute:function(t){t=l(t);var e=this[0];if("transform"===t&&se)return E(e)(ne);var i=V(t).call(e);return null!=i?i.replace(M,function(t,i,n){return"px"===n?t:x(e,n)*i+"px"}):""}}),de.parse=function(t,e,i){return(_[l(t)]||N)(e,i)},e.exports=de},5:function(t,e){"use strict";var i=t("6"),n=t("7"),s=t("8"),r=t("a"),o=t("b"),u=t("c"),l=Object.defineProperty,a=Object.getOwnPropertyDescriptor;try{l({},"~",{}),a({},"~")}catch(h){l=null,a=null}var c=function(t,e,i){l(this,e,a(i,e)||{writable:!0,enumerable:!0,configurable:!0,value:t})},d=function(t,e){this[e]=t},f=function(t){return n(t,l?c:d,this.prototype),this},m=/^constructor|inherits|mixin$/,g=function(t){"function"===u(t)&&(t={constructor:t});var e=t.inherits,n=i(t,"constructor")?t.constructor:e?function(){return e.apply(this,arguments)}:function(){};if(e){s(n,e);var l=e.prototype,a=n.prototype=o(l);n.parent=l,a.constructor=n}n.implement||(n.implement=f);var h=t.mixin;if(h){"array"!==u(h)&&(h=[h]);for(var c=0;h.length>c;c++)n.implement(o(h[c].prototype))}return n.implement(r(t,function(t,e){return!e.match(m)}))};e.exports=g},6:function(t,e){"use strict";var i=Object.hasOwnProperty,n=function(t,e){return i.call(t,e)};e.exports=n},7:function(t,e){"use strict";var i=t("6"),n=function(t,e,i){for(var n in t)if(e.call(i,t[n],n,t)===!1)break;return t};if(!{valueOf:0}.propertyIsEnumerable("valueOf")){var s="constructor,toString,valueOf,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString".split(","),r=Object.prototype;n=function(t,e,n){for(var o in t)if(e.call(n,t[o],o,t)===!1)return t;for(var u=0;o=s[u];u++){var l=t[o];if((l!==r[o]||i(t,o))&&e.call(n,l,o,t)===!1)break}return t}}e.exports=n},8:function(t,e){"use strict";var i=t("9"),n=function(t,e){this[e]=t},s=function(t){for(var e=1,s=arguments.length;s>e;e++)i(arguments[e],n,t);return t};e.exports=s},9:function(t,e){"use strict";var i=t("7"),n=t("6"),s=function(t,e,s){return i(t,function(i,r){return n(t,r)?e.call(s,i,r,t):void 0}),t};e.exports=s},a:function(t,e){"use strict";var i=t("7"),n=function(t,e,n){var s={};return i(t,function(i,r){e.call(n,i,r,t)&&(s[r]=i)}),s};e.exports=n},b:function(t,e){"use strict";var i=function(t){var e=function(){};return e.prototype=t,new e};e.exports=i},c:function(t,e){"use strict";var i=Object.prototype.toString,n=/number|object|array|string|function|date|regexp|boolean/,s=function(t){if(null==t)return"null";var e=i.call(t).slice(8,-1).toLowerCase();return"number"===e&&isNaN(t)?"null":n.test(e)?e:"object"};e.exports=s},d:function(t,e){"use strict";var i=function(t){return(t+"").replace(/-\D/g,function(t){return t.charAt(1).toUpperCase()})};e.exports=i},e:function(t,e){"use strict";var i=t("f"),n=function(t){return i((t+"").replace(/\s+/g," "))};e.exports=n},f:function(t,e){"use strict";var i=function(t){return(t+"").replace(/^\s+|\s+$/g,"")};e.exports=i},g:function(t,e){"use strict";var i=function(t){return(t+"").replace(/\b[a-z]/g,function(t){return t.toUpperCase()})};e.exports=i},h:function(t,e){"use strict";var i=function(t){return(t+"").replace(/[A-Z]/g,function(t){return"-"+t.toLowerCase()})};e.exports=i},i:function(t,e){"use strict";var i=function(t,e,i){for(var n=t.length>>>0,s=Array(n),r=0,o=n;o>r;r++)s[r]=e.call(i,t[r],r,t);return s};e.exports=i},j:function(t,e){"use strict";var i=function(t,e,i){for(var n=0,s=t.length>>>0;s>n&&e.call(i,t[n],n,t)!==!1;n++);return t};e.exports=i},k:function(t,e,i,n){"use strict";var s=t("5"),r=t("j"),o=t("i"),u=t("l"),l=t("m"),a=t("n"),h=0,c=function(t){return t===n?"global":t.uniqueNumber||(t.uniqueNumber="n:"+(h++).toString(36))},d={},f=s({constructor:function g(t,e){if(null==t)return this&&this.constructor===g?new m:null;var i=t;if(t.constructor!==m){i=new m;var s;if("string"==typeof t)return i.search?(i[i.length++]=e||document,i.search(t)):null;if(t.nodeType||t===n)i[i.length++]=t;else if(t.length)for(var r={},o=0,u=t.length;u>o;o++){var l=g(t[o],e);if(l&&l.length)for(var a=0,h=l.length;h>a;a++){var f=l[a];s=c(f),r[s]||(i[i.length++]=f,r[s]=!0)}}}return i.length?1===i.length?(s=c(i[0]),d[s]||(d[s]=i)):i:null}}),m=s({inherits:f,constructor:function(){this.length=0},unlink:function(){return this.map(function(t){return delete d[c(t)],t})},forEach:function(t,e){return r(this,t,e)},map:function(t,e){return o(this,t,e)},filter:function(t,e){return u(this,t,e)},every:function(t,e){return l(this,t,e)},some:function(t,e){return a(this,t,e)}});e.exports=f},l:function(t,e){"use strict";var i=function(t,e,i){for(var n=[],s=0,r=t.length>>>0;r>s;s++){var o=t[s];e.call(i,o,s,t)&&n.push(o)}return n};e.exports=i},m:function(t,e){"use strict";var i=function(t,e,i){for(var n=0,s=t.length>>>0;s>n;n++)if(!e.call(i,t[n],n,t))return!1;return!0};e.exports=i},n:function(t,e){"use strict";var i=function(t,e,i){for(var n=0,s=t.length>>>0;s>n;n++)if(e.call(i,t[n],n,t))return!0;return!1};e.exports=i},o:function(t,e){"use strict";var i=t("5"),n=t("2").request,s=t("p"),r=t("i"),o="([\\d.]+)(s|ms)?",u="cubic-bezier\\(([-.\\d]+),([-.\\d]+),([-.\\d]+),([-.\\d]+)\\)",l=RegExp(o),a=RegExp(u);RegExp(u,"g");var h={"default":"cubic-bezier(0.25, 0.1, 0.25, 1.0)",linear:"cubic-bezier(0, 0, 1, 1)","ease-in":"cubic-bezier(0.42, 0, 1.0, 1.0)","ease-out":"cubic-bezier(0, 0, 0.58, 1.0)","ease-in-out":"cubic-bezier(0.42, 0, 0.58, 1.0)"};h.ease=h["default"];var c=function(t,e,i){return(e-t)*i+t},d=function(t){var e=[],i=(t+"").replace(/[-.\d]+/g,function(t){return e.push(+t),"@"});return[e,i]},f=i({constructor:function(t,e){this.setOptions(e),this.render=t||function(){};var i=this;this.bStep=function(t){return i.step(t)},this.bExit=function(t){i.exit(t)}},setOptions:function(t){if(null==t&&(t={}),!(this.duration=this.parseDuration(t.duration||"500ms")))throw Error("invalid duration");if(!(this.equation=this.parseEquation(t.equation||"default")))throw Error("invalid equation");return this.callback=t.callback||function(){},this},parseDuration:function(t){if(t=(t+"").match(l)){var e=+t[1],i=t[2]||"ms";if("s"===i)return 1e3*e;if("ms"===i)return e}},parseEquation:function(t,e){var i=typeof t;if("function"===i)return t;if("string"===i){t=h[t]||t;var n=t.replace(/\s+/g,"").match(a);if(n){if(t=r(n.slice(1),function(t){return+t}),e)return t;if("0,0,1,1"==""+t)return function(t){return t};i="object"}}return"object"===i?s(t[0],t[1],t[2],t[3],1e3/60/this.duration/4):void 0},cancel:function(t){this.to=t,this.cancelExit=n(this.bExit)},exit:function(t){this.render(this.to),delete this.cancelExit,this.callback(t)},start:function(t,e){if(this.stop(),0===this.duration)return this.cancel(e),this;this.isArray=!1,this.isNumber=!1;var i=typeof t,s=typeof e;"object"===i&&"object"===s?this.isArray=!0:"number"===i&&"number"===s&&(this.isNumber=!0);var r=d(t),o=d(e);return this.from=r[0],this.to=o[0],this.templateFrom=r[1],this.templateTo=o[1],this.from.length!==this.to.length||""+this.from==""+this.to?(this.cancel(e),this):(delete this.time,this.length=this.from.length,this.cancelStep=n(this.bStep),this)},stop:function(){return this.cancelExit?(this.cancelExit(),delete this.cancelExit):this.cancelStep&&(this.cancelStep(),delete this.cancelStep),this},step:function(t){this.time||(this.time=t);var e=(t-this.time)/this.duration;e>1&&(e=1);for(var i=this.equation(e),s=this.from,r=this.to,o=this.templateTo,u=0,l=this.length;l>u;u++){var a=s[u],h=r[u];o=o.replace("@",h!==a?c(a,h,i):h)}this.render(this.isArray?o.split(","):this.isNumber?+o:o,e),1!==e?this.cancelStep=n(this.bStep):(delete this.cancelStep,this.callback(t))}}),m=function(t){var e=new f(t);return{start:function(t,i,n){var s=typeof n;return e.setOptions("function"===s?{callback:n}:"string"===s||"number"===s?{duration:n}:n).start(t,i),this},stop:function(){return e.stop(),this}}};m.prototype=f.prototype,e.exports=m},p:function(t,e){e.exports=function(t,e,i,n,s){var r=function(e){var n=1-e;return 3*n*n*e*t+3*n*e*e*i+e*e*e},o=function(t){var i=1-t;return 3*i*i*t*e+3*i*t*t*n+t*t*t},u=function(e){var n=1-e;return 3*(2*(e-1)*e+n*n)*t+3*(-e*e*e+2*n*e)*i};return function(t){var e,i,n,l,a,h,c=t;for(n=c,h=0;8>h;h++){if(l=r(n)-c,s>Math.abs(l))return o(n);if(a=u(n),1e-6>Math.abs(a))break;n-=l/a}if(e=0,i=1,n=c,e>n)return o(e);if(n>i)return o(i);for(;i>e;){if(l=r(n),s>Math.abs(l-c))return o(n);c>l?e=n:i=n,n=.5*(i-e)+e}return o(n)}}},q:function(t,e){"use strict";var i=function(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])},n=function(t){var e=i(t);return e?[t[0]/e,t[1]/e]:[0,0]},s=function(t,e){return t[0]*e[0]+t[1]*e[1]},r=Math.atan2,o=function(t,e,i,n){return[i*t[0]+n*e[0],i*t[1]+n*e[1]]};e.exports=function(t,e,u,l,a,h){if(0===t*l-e*u)return!1;var c=[a,h],d=[[t,e],[u,l]],f=[i(d[0])];d[0]=n(d[0]);var m=s(d[0],d[1]);d[1]=o(d[1],d[0],1,-m),f[1]=i(d[1]),m/=f[1];var g=r(d[0][1],d[0][0]);return[c,g,m,f]}}}),define("qui/lib/moofx",function(){}),define("qui/lib/require-css/css!qui/controls/toolbar/Bar",[],function(){}),define("qui/controls/toolbar/Bar",["qui/controls/Control","qui/controls/contextmenu/Menu","qui/controls/contextmenu/Item","qui/controls/buttons/Button","qui/lib/moofx","css!qui/controls/toolbar/Bar.css"],function(t,e,i,n){"use strict";return new Class({Extends:t,Type:"qui/controls/toolbar/Bar",options:{"menu-button":!0,slide:!0,width:!1,type:"tabbar"},initialize:function(t){this.Fx=null,this.$Elm=null,this.Tabs=null,this.Menu=null,this.Container=null,this.Active=null,this.BtnLeft=null,this.BtnRight=null,this.items=[],this.btns=[],this.parent(t)},destroy:function(){var t,e;for(t=0,e=this.items.length;e>t;t++)this.items[t].destroy();for(t=0,e=this.btns.length;e>t;t++)this.btns[t].destroy();this.items=[],this.btns=[],this.$Elm&&this.$Elm.destroy(),this.BtnLeft&&this.BtnLeft.destroy(),this.BtnRight&&this.BtnRight.destroy(),this.Menu&&this.Menu.destroy(),this.Fx=null,this.$Elm=null,this.Tabs=null,this.Menu=null,this.Container=null,this.Active=null,this.BtnLeft=null,this.BtnRight=null},refresh:function(){if(!this.$Elm)return this;var t,e,i,n=this.items;for(this.Tabs.set("html",""),t=0,e=n.length;e>t;t++)i=n[t],i.inject(this.Tabs),this.Menu.appendChild(this.$addContextMenuItm(i));return this.getAttribute("menu-button")===!0?this.Menu.show():this.Menu.hide(),this.getAttribute("slide")===!0?(this.BtnLeft.show(),this.BtnRight.show()):(this.BtnLeft.hide(),this.BtnRight.hide()),this.resize(),this},create:function(){if(this.$Elm)return this.refresh(),this.$Elm;this.$Elm=new Element("div",{"class":"qui-toolbar","data-quiid":this.getId(),html:'<div class="qui-toolbar-container"><div class="qui-toolbar-tabs"></div></div>'}),this.getAttribute("styles")&&this.$Elm.setStyles(this.getAttribute("styles")),this.Tabs=this.$Elm.getElement(".qui-toolbar-tabs"),this.Container=this.$Elm.getElement(".qui-toolbar-container");this.items;return this.BtnLeft=new n({name:"toLeft","class":"qui-toolbar-button icon-chevron-left",events:{onClick:function(t){t.getAttribute("Toolbar").toLeft()}},Toolbar:this}),this.BtnRight=new n({name:"toRight","class":"qui-toolbar-button icon-chevron-right",events:{onClick:function(t){t.getAttribute("Toolbar").toRight()}},Toolbar:this}),this.Menu=new n({"class":"qui-toolbar-button icon-chevron-down"}),this.Menu.setParent(this),this.Menu.inject(this.$Elm,"top"),this.BtnLeft.inject(this.$Elm,"top"),this.BtnRight.inject(this.$Elm),this.Tabs.setStyles({position:"relative",left:0,"float":"left"}),this.refresh(),this.Fx=moofx(this.Tabs),this.$Elm},clear:function(){if(!this.Tabs)return this.fireEvent("clear",[this]),this;var t,e;for(t=0,e=this.items.length;e>t;t++)this.items[t].destroy();for(t=0,e=this.btns.length;e>t;t++)this.btns[t].destroy();return this.Tabs.set("html",""),delete this.items,delete this.Active,this.items=[],this.btns=[],this.Active=null,this.Menu&&(this.Menu.clear(),this.Menu.setDisable()),this.moveLeft&&this.moveLeft.setDisable(),this.moveRight&&this.moveRight.setDisable(),this.Tabs.setStyle("left",0),this.fireEvent("clear",[this]),this},hide:function(){return this.$Elm.setStyles({height:0,overflow:"hidden"}),this},show:function(){return this.$Elm.setStyle("height",null),this.$Elm.setStyle("overflow",null),this},toLeft:function(){return this.Fx?(this.Fx.animate({left:0}),this):void 0},toRight:function(){var t=this.Tabs.offsetLeft-150;return t<-1*(this.Tabs.offsetWidth-150)&&(t=0),this.Fx.animate({left:t}),this},toTab:function(t){if(this.getAttribute("slide")===!1)return this;if(!this.$Elm)return this;if(t==this.firstChild())return this.Fx.animate({left:0}),this;var e,i=(t.getElm(),this.$Elm.getElement(".qui-toolbar-container")),n=this.$Elm.getElement(".qui-toolbar-tabs"),s=n.getStyle("left").toInt()+t.getElm().offsetLeft,r=t.getElm().offsetLeft+t.getElm().offsetWidth;return 0>s?(this.Fx.animate({left:n.getStyle("left").toInt()+-1*s+20}),this):r>i.offsetWidth?(e=r-i.offsetWidth,this.Fx.animate({left:-1*(e+20)}),this):this},firstChild:function(){return this.items[0]},lastChild:function(){return this.items[this.items.length-1]},getChildren:function(t){return"undefined"!=typeof t?this.getElement(t):this.items},count:function(){return this.items.length},removeChild:function(t){var e,i,n=[],s=this.items,r=t.getAttribute("name");for(e=0,i=s.length;i>e;e++)s[e].getAttribute("name")==r?s[e].destroy():n.push(s[e]);return this.items=n,this},moveChildToPos:function(t,e){for(var i=[],n=this.items,s=0,r=n.length;r>s;s++)t!=n[s]?i.push(n[s]):n[s].destroy();return i.splice(e-1,0,t),e-2>=0&&i[e-2].getElm().inject(t.create(),"after"),this.items=i,this},getElement:function(t){var e,i,n=this.items;for(e=0,i=n.length;i>e;e++)if(n[e]&&n[e].getAttribute("name")==t)return n[e];return null},appendChild:function(t){if("undefined"==typeof t)return this;var e=this,i=typeOf(t);switch(i){case"qui/controls/buttons/Button":case"qui/controls/buttons/Select":case"qui/controls/buttons/Seperator":case"qui/controls/toolbar/Tab":break;case"element":return t.inject(this.Tabs),this;default:return this}if(t.setParent(this),"qui/controls/toolbar/Tab"==i&&t.addEvent("click",function(t){e.toTab(t)}),this.fireEvent("appendChild",[this,t]),"tabbar"===this.getAttribute("type")&&"qui/controls/buttons/Button"===t.getType()){this.btns.push(t),t.inject(this.BtnRight.getElm(),"before");var n=this.Container,s=t.getElm();return n.setStyle("width",n.getStyle("width").toInt()-s.getSize().x),this}return this.items.push(t),this.$Elm?(t.inject(this.Tabs),this.Menu&&this.Menu.appendChild(this.$addContextMenuItm(t)),this.resize(),this.Menu&&this.Menu.setEnable(),this.BtnLeft&&this.BtnLeft.setEnable(),this.BtnRight&&this.BtnRight.setEnable(),this):this},setItemActive:function(t){return this.Active&&(this.Active.leave(),this.Active.setNormal(),this.Active.getAttribute("ContextMenuItem")&&this.Active.getAttribute("ContextMenuItem").getElm().setStyle("fontWeight","")),this.Active=t,this.Active.setActive(),this.Active.getAttribute("ContextMenuItem")&&this.Active.getAttribute("ContextMenuItem").getElm().setStyle("fontWeight","bold"),this},getActive:function(){return this.Active},resize:function(){var t,e,i=0,n=0,s=this.Tabs.getChildren();for(t=0,e=s.length;e>t;t++)i=i+s[t].getSize().x.toInt()+30;return this.getAttribute("width")&&this.getAttribute("width").toString().contains("%")===!1?(n=this.getAttribute("width").toInt(),this.getAttribute("slide")&&(n=n-this.BtnLeft.getElm().getComputedSize().totalWidth-this.BtnRight.getElm().getComputedSize().totalWidth),this.getAttribute("menu-button")&&(n-=this.Menu.getElm().getComputedSize().totalWidth)):n="100%",this.Tabs.setStyle("width",i),this.Container.setStyle("width",n),this.getElm().setStyle("width",this.getAttribute("width")),this},$addContextMenuItm:function(t){var e=new i(t.getAttributes());return e.setAttribute("TAB",t),e.setAttribute("Toolbar",this),t.setAttribute("ContextMenuItem",e),e.addEvent("onMouseDown",function(t){var e=t.getAttribute("TAB"),i=t.getAttribute("Toolbar");e.click(),i.toTab(e)}),e}})}),define("qui/controls/buttons/Seperator",["qui/controls/Control"],function(t){"use strict";return new Class({Extends:t,Type:"qui/controls/buttons/Seperator",options:{height:!1},initialize:function(t){this.parent(t),this.addEvent("resize",function(){var t=this.getElm();t&&t.getParent()&&t.setStyle("height",t.getParent().getSize().y)})},create:function(){return this.$Elm=new Element("div.qui-buttons-seperator",{"data-quiid":this.getId()}),this.getAttribute("height")&&this.$Elm.setStyle("height",this.getAttribute("height")),this.fireEvent("create",[this]),this.$Elm}})}),define("qui/lib/require-css/css!qui/controls/desktop/panels/Sheet",[],function(){}),define("qui/controls/desktop/panels/Sheet",["qui/controls/Control","qui/controls/buttons/Button","css!qui/controls/desktop/panels/Sheet.css"],function(t,e){"use strict";return new Class({Extends:t,Type:"qui/controls/desktop/panels/Sheet",Binds:["$fxComplete"],options:{styles:!1},initialize:function(t){this.parent(t),this.$Elm=null,this.$Header=null,this.$Body=null,this.$Buttons=null,this.$FX=null},create:function(){return this.$Elm=new Element("div.qui-panel-sheet",{"data-quiid":this.getId(),html:'<div class="qui-panel-sheet-header box"></div><div class="qui-panel-sheet-body box"></div><div class="qui-panel-sheet-btn-container box"><div class="qui-panel-sheet-buttons"></div></div>',styles:{visibility:"hidden",display:"none"}}),this.getAttribute("styles")&&this.$Elm.setStyles(this.getAttribute("styles")),this.$Header=this.$Elm.getElement(".qui-panel-sheet-header"),this.$Body=this.$Elm.getElement(".qui-panel-sheet-body"),this.$Buttons=this.$Elm.getElement(".qui-panel-sheet-btn-container"),this.$Header.set("html",this.getAttribute("title")),this.$FX=moofx(this.$Elm),this.$Elm
},getContent:function(){return this.$Body},getBody:function(){return this.getContent()},getButtons:function(){return this.$Buttons},addButton:function(t){"qui/controls/buttons/Button"!==typeOf(t)&&(t=new e(t));var i,n,s,r=this.getButtons().getElement(".qui-panel-sheet-buttons"),o=0,u=t.getAttributes("styles")||{};for(u.margin="12px 5px",t.setAttribute("styles",u),t.inject(r),s=r.getElements("button"),i=0,n=s.length;n>i;i++)o+=s[i].getComputedSize().totalWidth;r.setStyle("width",o)},show:function(){var t=this.getElm(),i=t.getParent(),n=i.getSize();t.setStyles({visibility:null,left:-1*(n.x+50),height:n.y}),t.setStyle("display",null);var s=this.getButtons().getSize(),r=this.$Header.getSize();this.getBody().setStyles({height:n.y-s.y-r.y,width:"100%","float":"left"});var o=new e({text:"schließen / abbrechen",textimage:"icon-remove",events:{onClick:this.hide.bind(this)}});return new e({icon:"icon-remove",styles:{"float":"right"},events:{onClick:this.hide.bind(this)}}).inject(this.$Header),this.addButton(o),this.$FX.animate({left:0},{callback:this.$fxComplete}),this},hide:function(){var t=this.getElm(),e=t.getParent(),i=e.getSize();return this.$FX.animate({left:-1*(i.x+50)},{callback:this.$fxComplete}),this},$fxComplete:function(){return this.getElm().getStyle("left").toInt()>=0?void this.fireEvent("open",[this]):(this.fireEvent("close",[this]),void this.destroy())}})}),define("qui/lib/require-css/css!qui/controls/breadcrumb/Bar",[],function(){}),define("qui/controls/breadcrumb/Bar",["qui/controls/Control","css!qui/controls/breadcrumb/Bar.css"],function(t){"use strict";return new Class({Extends:t,Type:"qui/controls/breadcrumb/Bar",options:{width:!1,itemClasses:!1,cssclass:!1},initialize:function(t){this.$items=[],this.parent(t)},create:function(){return this.$Elm=new Element("div",{"class":"qui-breadcrumb box","data-quiid":this.getId()}),this.getAttribute("width")&&this.$Elm.setStyle("width",this.getAttribute("width")),this.getAttribute("cssclass")&&this.$Elm.addClass(this.getAttribute("cssclass")),this.$Elm},appendChild:function(t){if("qui/controls/breadcrumb/Item"!==t.getType())return this;if(this.$items.push(t),t.inject(this.getElm()),this.getAttribute("itemClasses")){var e=this.getAttribute("itemClasses");"array"==typeOf(e)&&(e=e.join(" ")),t.getElm().addClass(e)}return this},firstChild:function(){return"undefined"!=typeof this.$items[0]?this.$items[0]:!1},lastChild:function(){return this.$items.getLast()},getChildren:function(){return this.$items},clear:function(){for(var t=0,e=this.$items.length;e>t;t++)this.$items[t].destroy();this.$items=[]},resize:function(){this.getAttribute("width")&&this.getElm().setStyle("width",this.getAttribute("width"))}})}),define("qui/lib/require-css/css!qui/controls/desktop/Panel",[],function(){}),define("qui/controls/desktop/Panel",["qui/QUI","qui/controls/Control","qui/controls/loader/Loader","qui/controls/toolbar/Bar","qui/controls/buttons/Seperator","qui/controls/buttons/Button","qui/controls/desktop/panels/Sheet","qui/controls/breadcrumb/Bar","qui/controls/contextmenu/Menu","qui/utils/Controls","css!qui/controls/desktop/Panel.css"],function(t,e,i,n,s,r,o,u,l,a){"use strict";return new Class({Extends:e,Type:"qui/controls/desktop/Panel",Binds:["$onDestroy","$onSetAttribute"],options:{name:"qui-desktop-panel",content:!1,header:!0,title:!1,icon:!1,footer:!1,height:"100%","class":"",scrollbars:!0,collapsible:!0,collapseFooter:!0,closeable:!0,dragable:!0,breadcrumb:!1,toWindow:!1},initialize:function(t){this.$uid=String.uniqueID(),this.parent(t),this.Loader=new i,this.$Elm=null,this.$Header=null,this.$Title=null,this.$Footer=null,this.$Content=null,this.$Buttons=null,this.$Categories=null,this.$Breadcrumb=null,this.$ContextMenu=null,this.$ButtonBar=null,this.$CategoryBar=null,this.$BreadcrumbBar=null,this.$ActiveCat=null,this.$Dropable=null,this.addEvents({onDestroy:this.$onDestroy,onSetAttribute:this.$onSetAttribute})},create:function(){if(this.$Elm)return this.$Elm;var t=this;return this.$Elm=new Element("div",{"data-quiid":this.getId(),"class":"qui-panel box",tabindex:-1,styles:{height:this.getAttribute("height"),outline:"none","-moz-outline":"none"},html:'<div class="qui-panel-header box"></div><div class="qui-panel-buttons box"></div><div class="qui-panel-categories box"></div><div class="qui-panel-content box"></div><div class="qui-panel-footer box"></div>'}),this.Loader.inject(this.$Elm),this.$Header=this.$Elm.getElement(".qui-panel-header"),this.$Footer=this.$Elm.getElement(".qui-panel-footer"),this.$Content=this.$Elm.getElement(".qui-panel-content"),this.$Buttons=this.$Elm.getElement(".qui-panel-buttons"),this.$Categories=this.$Elm.getElement(".qui-panel-categories"),this.getAttribute("breadcrumb")&&(this.$Breadcrumb=new Element("div",{"class":"qui-panel-breadcrumb box"}).inject(this.$Buttons,"after")),this.getAttribute("styles")&&this.$Elm.setStyles(this.getAttribute("styles")),this.$Content.setStyle("display",null),this.$Buttons.setStyle("display","none"),this.$Categories.setStyle("display","none"),this.getAttribute("content")&&this.$Content.set("html",this.getAttribute("content")),this.getAttribute("collapsible")&&(this.$Collaps=new Element("div",{"class":"qui-panel-collapse icon-chevron-down"}).inject(this.$Header),this.$Header.setStyle("cursor","pointer"),this.$Header.addEvent("click",function(){t.toggle()})),this.getAttribute("dragable")&&this.$Header.setStyle("cursor","move"),this.$refresh(),this.fireEvent("create",[this]),this.$Elm},refresh:function(){return this.resize(),this.fireEvent("refresh",[this]),this.$refresh(),this},$refresh:function(){if(this.$Title||(this.$Icon=new Element("span.qui-panel-icon").inject(this.$Header),this.$Title=new Element("h2.qui-panel-title").inject(this.$Header)),this.getAttribute("title")&&this.$Title.set("html",this.getAttribute("title")),this.getAttribute("icon")){var t=this.getAttribute("icon");if(a.isFontAwesomeClass(t)){var e=this.$Icon.className;e=e.replace(/\bicon-\S+/g,""),this.$Icon.className=e,this.$Icon.addClass(t)}else new Element("img",{src:t}).inject(this.$Icon)}},resize:function(){if(this.getAttribute("header")===!1?this.$Header.setStyle("display","none"):this.$Header.setStyle("display",null),this.getAttribute("footer")===!1?this.$Footer.setStyle("display","none"):this.$Footer.setStyle("display",null),this.getButtonBar().count()?this.$Buttons.setStyle("display",null):this.$Buttons.setStyle("display","none"),this.isOpen()===!1)return this.fireEvent("resize",[this]),this;this.getAttribute("styles")&&this.getAttribute("styles").height&&this.setAttribute("height",this.getAttribute("styles").height);var t=this.getAttribute("height"),e=this.$Elm.getSize().x,i="auto";if(t.toString().match("%")){var n=this.$Elm.getParent()||document.body;t=t.toInt(),t=n.getSize().y*(t/100)}return t=t,this.getAttribute("breadcrumb")&&(t=t),t=t-this.$Buttons.getSize().y-2-this.$Footer.getSize().y-1-this.$Header.getSize().y,this.getAttribute("scrollbars")===!1&&(i="hidden"),this.$Categories.getSize().x?e-=this.$Categories.getSize().x:e="100%",this.$Content.setStyles({overflow:i,height:t,width:e}),this.$Elm.setStyle("height",this.getAttribute("height")),this.$ButtonBar&&this.$ButtonBar.resize(),this.fireEvent("resize",[this]),this},open:function(){return this.$Content.setStyle("display",null),this.$Elm.setStyle("height",this.getAttribute("height")),this.$Header.removeClass("qui-panel-close"),this.$Collaps&&(this.$Collaps.removeClass("qui-panel-expand"),this.$Collaps.removeClass("icon-chevron-right"),this.$Collaps.addClass("qui-panel-collapse"),this.$Collaps.addClass("icon-chevron-down")),this.fireEvent("open",[this]),this.resize(),this},minimize:function(){return this.$Content.setStyle("display","none"),this.$Footer.setStyle("display","none"),this.$Buttons.setStyle("display","none"),this.$Elm.setStyle("height",this.$Header.getSize().y),this.$Collaps.removeClass("qui-panel-collapse"),this.$Collaps.removeClass("icon-chevron-down"),this.$Collaps.addClass("qui-panel-expand"),this.$Collaps.addClass("icon-chevron-right"),this.$Header.addClass("qui-panel-close"),this.fireEvent("minimize",[this]),this},toggle:function(){return this.getAttribute("collapsible")===!1?this:(this.isOpen()?this.minimize():this.open(),this)},isOpen:function(){return"none"==this.$Content.getStyle("display")?!1:!0},highlight:function(){return this.getElm()?(new Element("div.qui-panel-highlight").inject(this.getElm()),this):this},normalize:function(){return this.getElm()?(this.getElm().getElements(".qui-panel-highlight").destroy(),this):this},getBody:function(){return this.getContent()},getContent:function(){return this.$Content},setContent:function(t){return this.$Content.set("html",t),this},getFooter:function(){return this.$Footer},setFooter:function(t){return this.$Footer.set("html",t),this},getHeader:function(){return this.$Header},addButton:function(e){return t.Controls.isControl(e)||(e="seperator"==e.type||"QUI\\Controls\\Buttons\\Seperator"==e.type?new s(e):new r(e)),this.getButtonBar().appendChild(e),1==this.getButtonBar().count()&&this.resize(),this},getButtons:function(t){return this.$ButtonBar?this.$ButtonBar.getChildren(t):[]},getButtonBar:function(){return this.$ButtonBar||(this.$Buttons.setStyle("display",null),this.$ButtonBar=new n({slide:!1,type:"buttons","menu-button":!1}).inject(this.$Buttons)),this.$ButtonBar},addCategory:function(t){"undefined"==typeof t.getType&&(t=new r(t));var e=this;return t.addEvents({onClick:function(t){e.$ActiveCat&&e.$ActiveCat==t||(e.fireEvent("categoryLeave",[e,e.$ActiveCat]),t.setActive())},onActive:function(t){e.$ActiveCat&&e.$ActiveCat.setNormal(),e.$ActiveCat=t,e.fireEvent("categoryEnter",[e,t])}}),this.getCategoryBar().appendChild(t),this},getCategory:function(t){return this.$CategoryBar?this.$CategoryBar.getChildren(t):[]},getCategoryBar:function(){return this.$CategoryBar||(this.$Categories.setStyle("display",null),this.$CategoryBar=new n({width:190,slide:!1,type:"buttons","menu-button":!1,events:{onClear:function(){this.$ActiveCat=null}.bind(this)}}).inject(this.$Categories)),this.$CategoryBar},getActiveCategory:function(){return this.$ActiveCat},getBreadcrumb:function(){return this.$BreadcrumbBar||(this.$BreadcrumbBar=new u({name:"panel-breadcrumb-"+this.getId()}).inject(this.$Breadcrumb)),this.$BreadcrumbBar},getContextMenu:function(){return this.$ContextMenu?this.$ContextMenu:(this.$ContextMenu=new l({title:this.getAttribute("title"),events:{blur:function(t){t.hide()}}}),this.$ContextMenu.inject(document.body),this.$ContextMenu)},createSheet:function(t){var e=new o(t).inject(this.$Elm);return e},$getDragable:function(e){var i=this;return i.$Dropable?void e(i.$Dropable):void require(["qui/classes/utils/DragDrop"],function(n){i.$Dropable=new n(i.$Header,{dropables:".qui-panel-drop",cssClass:"radius5",styles:{width:100,height:150},events:{onStart:function(t,e,n){i.fireEvent("dragDropStart",[i,e,n])},onComplete:function(){i.fireEvent("dragDropComplete",[i])},onDrag:function(t,e,n){i.fireEvent("drag",[i,n])},onEnter:function(t,e,i){i.highlight()},onLeave:function(t,e,i){i.highlight()},onDrop:function(e,n,s){if(s){var r=s.get("data-quiid");if(r){var o=t.Controls.getById(r);o.fireEvent("onDrop",[i])}}}}}),e(i.$Dropable)})},$onSetAttribute:function(t){if("dragable"==t){var e=this;return void e.$getDragable(function(t){return e.getAttribute("dragable")?(t.enable(),void e.$Header.setStyle("cursor","move")):(t.disable(),void e.$Header.setStyle("cursor","default"))})}},$onDestroy:function(){for(var t=[this.$Header,this.$Title,this.$Footer,this.$Content,this.$Buttons,this.$ButtonBar,this.$CategoryBar,this.$ActiveCat,this.$BreadcrumbBar,this.$ContextMenu],e=0,i=t.length;i>e;e++)t[e]&&"destroy"in t[e]&&t[e].destroy()}})});
//# sourceMappingURL=Panel.js.map