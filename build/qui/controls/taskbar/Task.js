define("qui/classes/DOM",[],function(){"use strict";return window.$quistorage={},new Class({Implements:[Options,Events],Type:"qui/classes/DOM",options:{},$uid:null,initialize:function(t){t=t||{},t.events&&(this.addEvents(t.events),delete t.events),t.methods&&(Object.append(this,t.methods),delete t.methods),this.setAttributes(t)},$family:function(){return"undefined"!=typeof this.Type?this.Type:typeOf(this)},getId:function(){return this.$uid||(this.$uid=String.uniqueID()),this.$uid},getType:function(){return typeOf(this)},setAttribute:function(t,e){if(this.fireEvent("setAttribute",[t,e]),"undefined"!=typeof this.options[t])return void(this.options[t]=e);var i=Slick.uidOf(this);return"undefined"==typeof window.$quistorage[i]&&(window.$quistorage[i]={}),window.$quistorage[i][t]=e,this},destroy:function(){this.fireEvent("destroy",[this]);var t=Slick.uidOf(this);t in window.$quistorage&&delete window.$quistorage[t],this.removeEvents()},setOptions:function(t){this.setAttributes(t)},setAttributes:function(t){t=t||{};for(var e in t)this.setAttribute(e,t[e]);return this},getAttribute:function(t){if(t in this.options)return this.options[t];var e=Slick.uidOf(this);return"undefined"==typeof window.$quistorage[e]?!1:"undefined"!=typeof window.$quistorage[e][t]?window.$quistorage[e][t]:!1},getAllAttributes:function(){return this.getAttributes()},getAttributes:function(){return this.options},getStorageAttributes:function(){var t=Slick.uidOf(this);return t in window.$quistorage?window.$quistorage[t]:{}},existAttribute:function(t){if("undefined"!=typeof this.options[t])return!0;var e=Slick.uidOf(this);return window.$quistorage[e]&&window.$quistorage[e][t]?!0:!1},getEvents:function(t){return"undefined"==typeof this.$events?!1:"undefined"!=typeof this.$events[t]?this.$events[t]:!1}})}),define("qui/classes/Controls",["require","qui/classes/DOM"],function(t,e){"use strict";return new Class({Extends:e,Type:"qui/classes/Controls",initialize:function(){this.$controls={},this.$cids={},this.$types={}},get:function(t){return"undefined"==typeof this.$controls[t]?[]:this.$controls[t]},getById:function(t){return t in this.$cids?this.$cids[t]:!1},getByType:function(t){return t in this.$types?this.$types[t]:[]},loadType:function(e,i){e.match(/qui\//)||(e="qui/"+e),t([modul],i)},isControl:function(t){return"undefined"!=typeof t&&t&&"undefined"!=typeof t.getType?!0:!1},add:function(t){var e=t.getAttribute("name"),i=typeOf(t);e&&""!==e||(e="#unknown"),"undefined"==typeof this.$controls[e]&&(this.$controls[e]=[]),"undefined"==typeof this.$types[i]&&(this.$types[i]=[]),this.$controls[e].push(t),this.$types[i].push(t),this.$cids[t.getId()]=t},destroy:function(t){var e=t.getAttribute("name"),i=typeOf(t),s=t.getId();e&&""!==e||(e="#unknown"),"undefined"!=typeof this.$cids[s]&&delete this.$cids[s];var n,r,o=[];if("undefined"!=typeof this.$controls[e]){for(n=0,r=this.$controls[e].length;r>n;n++)s!==this.$controls[e][n].getId()&&o.push(this.$controls[e][n]);this.$controls[e]=o,o.length||delete this.$controls[e]}if(o=[],"undefined"!=typeof this.$types[i])for(n=0,r=this.$types[i].length;r>n;n++)s!==this.$types[i][n].getId()&&o.push(this.$types[i][n]);this.$types[i]=o}})}),define("qui/classes/QUI",["require","qui/classes/DOM","qui/classes/Controls"],function(t,e,i){"use strict";return new Class({Extends:e,Type:"qui/classes/QUI",initialize:function(e){this.setAttributes({debug:!1,fetchErrors:!0}),this.parent(e),this.getAttribute("fetchErrors")&&(t.onError=function(t,e){self.trigger("ERROR :"+t+"\nRequire :"+e)},window.onerror=this.trigger.bind(this)),this.Controls=new i,this.MessageHandler=null},namespace:function(){for(var t,e=arguments,i=this,s=0,n=0,r=e.length,o=null,u=null;r>s;s+=1)for(o=e[s].split("."),t=o.length,n=0;t>n;n+=1)u=o[n],i[u]=i[u]||{},i=i[u];return i},triggerError:function(t,e){return this.fireEvent("onError",[t,e]),this.trigger(t.getMessage()),this},trigger:function(t,e,i){var s=t+"\nFile: "+e+"\nLinenumber: "+i;return console.error(s),this},getMessageHandler:function(e){if(this.MessageHandler)return void e(this.MessageHandler);var i=this;t(["qui/controls/messages/Handler"],function(t){i.MessageHandler=new t,e(i.MessageHandler)})},getControls:function(t){return this.Controls?void t(this.Controls):void 0}})}),define("qui/QUI",["qui/classes/QUI"],function(t){"use strict";return"undefined"==typeof window.QUI&&(window.QUI=new t),document.fireEvent("qui-loaded"),window.QUI}),define("qui/lib/require-css/normalize",[],function(){function t(t,i,n){if(t.match(u)||t.match(o))return t;t=r(t);var a=n.match(o),l=i.match(o);return!l||a&&a[1]==l[1]&&a[2]==l[2]?s(e(t,i),n):e(t,i)}function e(t,e){if("./"==t.substr(0,2)&&(t=t.substr(2)),t.match(u)||t.match(o))return t;var i=e.split("/"),s=t.split("/");for(i.pop();curPart=s.shift();)".."==curPart?i.pop():i.push(curPart);return i.join("/")}function s(t,e){var s=e.split("/");for(s.pop(),e=s.join("/")+"/",i=0;e.substr(i,1)==t.substr(i,1);)i++;for(;"/"!=e.substr(i,1);)i--;e=e.substr(i+1),t=t.substr(i+1),s=e.split("/");var n=t.split("/");for(out="";s.shift();)out+="../";for(;curPart=n.shift();)out+=curPart+"/";return out.substr(0,out.length-1)}var n=/([^:])\/+/g,r=function(t){return t.replace(n,"$1/")},o=/[^\:\/]*:\/\/([^\/])*/,u=/^(\/|data:)/,a=function(e,i,s){i=r(i),s=r(s);for(var n,o,e,u=/@import\s*("([^"]*)"|'([^']*)')|url\s*\(\s*(\s*"([^"]*)"|'([^']*)'|[^\)]*\s*)\s*\)/gi;n=u.exec(e);){o=n[3]||n[2]||n[5]||n[6]||n[4];var a;a=t(o,i,s);var l=n[5]||n[6]?1:0;e=e.substr(0,u.lastIndex-o.length-l-1)+a+e.substr(u.lastIndex-l-1),u.lastIndex=u.lastIndex+(a.length-o.length)}return e};return a.convertURIBase=t,a.absoluteURI=e,a.relativeURI=s,a}),define("qui/lib/require-css/css",[],function(){if("undefined"==typeof window)return{load:function(t,e,i){i()}};var t=document.getElementsByTagName("head")[0],e=window.navigator.userAgent.match(/Trident\/([^ ;]*)|AppleWebKit\/([^ ;]*)|Opera\/([^ ;]*)|rv\:([^ ;]*)(.*?)Gecko\/([^ ;]*)|MSIE\s([^ ;]*)/)||0,i=!1,s=!0;e[1]||e[7]?i=parseInt(e[1])<6||parseInt(e[7])<=9:e[2]?s=!1:e[4]&&(i=parseInt(e[4])<18);var n={};n.pluginBuilder="./css-builder";var r,o,u,a=function(){r=document.createElement("style"),t.appendChild(r),o=r.styleSheet||r.sheet},l=0,h=[],c=function(t){l++,32==l&&(a(),l=0),o.addImport(t),r.onload=f},f=function(){u();var t=h.shift();return t?(u=t[1],void c(t[0])):void(u=null)},d=function(t,e){if(o&&o.addImport||a(),o&&o.addImport)u?h.push([t,e]):(c(t),u=e);else{r.textContent='@import "'+t+'";';var i=setInterval(function(){try{r.sheet.cssRules,clearInterval(i),e()}catch(t){}},10)}},g=function(e,i){var n=document.createElement("link");if(n.type="text/css",n.rel="stylesheet",s)n.onload=function(){n.onload=function(){},setTimeout(i,7)};else var r=setInterval(function(){for(var t=0;t<document.styleSheets.length;t++){var e=document.styleSheets[t];if(e.href==n.href)return clearInterval(r),i()}},10);n.href=e,t.appendChild(n)};return n.normalize=function(t,e){return".css"==t.substr(t.length-4,4)&&(t=t.substr(0,t.length-4)),e(t)},n.load=function(t,e,s){(i?d:g)(e.toUrl(t+".css"),s)},n}),define("qui/lib/require-css/css!qui/controls/Control",[],function(){}),define("qui/controls/Control",["qui/QUI","qui/classes/DOM","css!qui/controls/Control.css"],function(t,e){"use strict";return new Class({Extends:e,Type:"qui/controls/Control",$Parent:null,options:{name:""},initialize:function(e){this.parent(e),t.Controls.add(this)},create:function(){return this.$Elm?this.$Elm:(this.$Elm=new Element("div.QUI-control"),this.$Elm)},inject:function(e,i){return this.fireEvent("drawBegin",[this]),"undefined"!=typeof this.$Elm&&this.$Elm||(this.$Elm=this.create()),"undefined"!=typeof t&&"undefined"!=typeof t.Controls&&t.Controls.isControl(e)?e.appendChild(this):this.$Elm.inject(e,i),this.fireEvent("inject",[this]),this},serialize:function(){return{attributes:this.getAttributes(),type:this.getType()}},unserialize:function(t){t.attributes&&this.setAttributes(t.attributes)},destroy:function(){this.fireEvent("destroy",[this]),"undefined"!=typeof this.$Elm&&this.$Elm&&this.$Elm.destroy(),this.$Elm=null,t.Controls.destroy(this)},getElm:function(){return"undefined"!=typeof this.$Elm&&this.$Elm||this.create(),this.$Elm},getParent:function(){return this.$Parent||!1},setParent:function(t){return this.$Parent=t,this},getPath:function(){var t="/"+this.getAttribute("name"),e=this.getParent();return e?e.getPath()+t:t},hide:function(){return this.$Elm&&this.$Elm.setStyle("display","none"),this},show:function(){return this.$Elm&&this.$Elm.setStyle("display",null),this},highlight:function(){return this.fireEvent("highlight",[this]),this},normalize:function(){return this.fireEvent("normalize",[this]),this},focus:function(){return this.$Elm&&this.$Elm.focus(),this},resize:function(){this.fireEvent("resize",[this])}})}),define("qui/classes/utils/DragDrop",["qui/classes/DOM"],function(t){"use strict";return new Class({Extends:t,Type:"qui/classes/utils/DragDrop",Binds:["$complete","$onDrag","$onDrop","$onLeave","$onEnter"],options:{dropables:[document.body],styles:!1,cssClass:!1,delay:500,limit:{x:!1,y:!1}},initialize:function(t,e){var i=this;this.parent(e),this.$Drag=null,this.$Element=t,this.$enable=!0,t.addEvents({mousedown:function(t){i.$enable&&(i.setAttribute("_stopdrag",!1),i.$timer=i.$start.delay(i.getAttribute("delay"),i,t),t.stop())},mouseup:function(t){"undefined"!=typeof i.$timer&&clearTimeout(i.$timer),i.$stop(t)}})},getElm:function(){return this.$Elm},enable:function(){this.$enable=!0},disable:function(){this.$enable=!1},$start:function(t){if(this.$enable&&!(t.rightClick||Browser.ie8||this.getAttribute("_mousedown")||this.getAttribute("_stopdrag"))){this.setAttribute("_mousedown",!0);var e=t.page.x,i=t.page.y,s=this.$Element,n=s.getSize(),r=this.getAttribute("limit"),o=document.body.getSize();this.$Drag=new Element("div",{"class":"box",styles:{position:"absolute",top:i-20,left:e-40,zIndex:1e3,MozOutline:"none",outline:0,color:"#fff",padding:10,cursor:"pointer",width:n.x,height:n.y,background:"rgba(0,0,0, 0.5)"}}).inject(document.body),this.getAttribute("styles")&&this.$Drag.setStyles(this.getAttribute("styles")),this.getAttribute("cssClass")&&this.$Drag.addClass(this.getAttribute("cssClass")),this.$Drag.focus(),this.fireEvent("start",[this,this.$Drag,t]),r.x||(r.x=[0,o.x-this.$Drag.getSize().x]),r.y||(r.y=[0,o.y-this.$Drag.getSize().y]);var u=this.getAttribute("dropables");"array"===typeOf(u)&&(u=u.join(",")),new Drag.Move(this.$Drag,{precalculate:!0,droppables:u,onComplete:this.$complete,onDrop:this.$onDrop,onEnter:this.$onEnter,onLeave:this.$onLeave,onDrag:this.$onDrag,limit:r}).start({page:{x:e,y:i}})}},$stop:function(){if(!Browser.ie8){if(!this.getAttribute("_mousedown"))return void this.setAttribute("_stopdrag",!0);this.setAttribute("_mousedown",!1),("undefined"!=typeof this.$Drag||this.$Drag)&&(this.fireEvent("stop",[this,this.$Drag]),this.$Drag.destroy(),this.$Drag=null)}},$complete:function(t){this.fireEvent("complete",[this,t]),this.$stop()},$onDrag:function(t,e){this.fireEvent("drag",[this,t,e])},$onDrop:function(t,e,i){this.fireEvent("drop",[this,t,e,i])},$onEnter:function(t,e){this.fireEvent("enter",[this,t,e])},$onLeave:function(t,e){this.fireEvent("leave",[this,t,e])}})}),define("qui/utils/Controls",["qui/QUI"],function(t){"use strict";return{isFontAwesomeClass:function(t){return t?!t.match(/icon-/)&&!t.match(/fa-/)||t.match(/\./)?!1:!0:!1},highlight:function(e){if(e){var i=e.get("data-quiid");i&&t.Controls.getById(i).highlight()}},normalize:function(e){if(e){var i=e.get("data-quiid");i&&t.Controls.getById(i).normalize()}}}}),define("qui/lib/require-css/css!qui/controls/taskbar/Task",[],function(){}),define("qui/controls/taskbar/Task",["qui/QUI","qui/controls/Control","qui/classes/utils/DragDrop","qui/utils/Controls","css!qui/controls/taskbar/Task.css"],function(t,e,i,s){"use strict";return new Class({Extends:e,Type:"qui/controls/taskbar/Task",Binds:["close","click","$onDestroy"],options:{name:"qui-task",icon:!1,text:"",cssClass:"",closeable:!0,dragable:!0},initialize:function(t,e){this.$Instance=t||null,this.$Elm=null,this.addEvents({onDestroy:this.$onDestroy}),"undefined"!=typeof t&&(t.setAttribute("Task",this),t.addEvent("onRefresh",function(t){t.getAttribute("Task").refresh()}),t.addEvent("onDestroy",function(t){var e=t.getAttribute("Task");e.$Instance=null,e.destroy()}),this.parent(e))},serialize:function(){return{attributes:this.getAttributes(),type:this.getType(),instance:this.getInstance()?this.getInstance().serialize():""}},unserialize:function(e){this.setAttributes(e.attributes);var i=e.instance;return i?void t.Controls.getByType(i.type,function(t){var i=new t(e.instance);i.unserialize(e.instance),this.initialize(i,e.attributes)}.bind(this)):this},create:function(){if(this.$Elm)return this.$Elm;var e=this;return this.$Elm=new Element("div",{"class":"qui-task radius5 box",html:'<span class="qui-task-icon"></span><span class="qui-task-text"></span>',styles:{outline:"none"},tabindex:-1,events:{click:e.click,focus:function(t){e.fireEvent("focus",[e,t])},blur:function(t){e.fireEvent("blur",[e,t])},contextmenu:function(t){e.fireEvent("contextMenu",[e,t]),t.stop()}}}),this.getAttribute("dragable")&&(this.$_enter=null,new i(this.$Elm,{dropables:[".qui-taskgroup",".qui-taskbar"],cssClass:"radius5",events:{onEnter:function(e,i){if(i){var s=i.get("data-quiid");s&&t.Controls.getById(s).highlight()}},onLeave:function(e,i){if(i){var s=i.get("data-quiid");s&&t.Controls.getById(s).normalize()}},onDrop:function(i,s){if(s){var n=s.get("data-quiid");if(n){var r=t.Controls.getById(n);r.normalize(),r.appendChild(e)}}}}})),this.getAttribute("cssClass")&&this.$Elm.addClass(this.getAttribute("cssClass")),this.getAttribute("closeable")&&new Element("div",{"class":"qui-task-close",html:'<span class="icon-remove"></span>',events:{click:this.close}}).inject(this.$Elm),"undefined"!=typeof this.$serialize&&this.unserialize(this.$serialize),this.refresh(),this.$Elm},refresh:function(){if(!this.$Elm)return void this.fireEvent("refresh",[this]);var t=this.$Elm.getElement(".qui-task-icon"),e=this.$Elm.getElement(".qui-task-text");if(this.getIcon()){var i=this.getIcon();t.className="qui-task-icon",t.setStyle("background-image",null),s.isFontAwesomeClass(i)?t.addClass(i):t.setStyle("background-image","url("+i+")")}if(this.getTitle()){var n=this.getTitle();n=n.substring(0,19),n.length>19&&(n+="..."),e.set("html",n)}this.fireEvent("refresh",[this])},getIcon:function(){return this.getInstance()?this.getInstance().getAttribute("icon"):""},getTitle:function(){return this.getInstance()?this.getInstance().getAttribute("title"):""},getInstance:function(){return this.$Instance},setInstance:function(t){this.$Instance=t},getTaskbar:function(){var t=this.getParent();return"qui/controls/taskbar/Group"==typeOf(t)&&(t=t.getParent()),t},activate:function(){return this.isActive()||!this.$Elm?this:(this.$Elm.addClass("active"),this.fireEvent("activate",[this]),this)},normalize:function(){return this.$Elm&&(this.$Elm.removeClass("active"),this.$Elm.removeClass("highlight"),this.$Elm.removeClass("select"),this.$Elm.setStyle("display",null)),this.fireEvent("normalize",[this]),this},hide:function(){return this.$Elm&&this.$Elm.setStyle("display","none"),this},isActive:function(){return this.$Elm?this.$Elm.hasClass("active"):!1},click:function(t){return this.fireEvent("click",[this,t]),this.isActive()||this.activate(),this},close:function(t){return this.fireEvent("close",[this,t]),this.destroy(),this},focus:function(){return this.$Elm&&this.$Elm.focus(),this},highlight:function(){return this.$Elm&&this.$Elm.addClass("highlight"),this.fireEvent("highlight",[this]),this},select:function(){return this.$Elm&&this.$Elm.addClass("select"),this.fireEvent("select",[this]),this},isSelected:function(){return this.$Elm?this.$Elm.hasClass("select"):!1},unselect:function(){return this.$Elm&&this.$Elm.removeClass("select"),this.fireEvent("unselect",[this]),this},$onDestroy:function(){this.getInstance()&&this.getInstance().destroy(),this.$Instance=null}})});
//# sourceMappingURL=Task.js.map